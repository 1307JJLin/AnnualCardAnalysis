# 2022年度数据分析报告 ｜杰然不同之GR


# 本报告由公众号【杰然不同之GR】编写，整理并发布，仅作个人学习使用，请勿用于任何商业用途，转载及其他形式合作请与我联系 

简易目录

1.数据预处理
   
1.1 数据合并和一些纠错

1.2 新特征生成

1.2.1) 根据date生成月日还有星期

1.2.2) 根据start time 和end time 生成时和分

1.2.3) 根据start和end生成中间时间

1.2.4) 根据事项的中间时间确定事项做的时候处于一天的时段

1.2.5) 根据时长大小分为长中短

1.2.6) 修改一些前后差别不大的事件

1.2.7) 统一事项与属性的对应关系 

2.数据可视化

2.1 变量分类

2.1.1) 日期类变量: date

2.1.2) 数值类变量: duration, phone 

2.1.3) 类别变量: event, year, month, day, weekday, mid_hour, day_period, week_order, duration_attr, attr, 

2.2 单变量分析

2.2.1) 数值变量的直方图

2.2.2) 类别变量的饼图，柱形图

2.2.3) 专注力分析

2.2.4) 各个月份，各年, 各小时的event关键词词云图

2.3 双变量分析

2.3.1) PyCatFlow图

2.3.2) 单个类别变量 vs 数值 sns.stripplot  sns.swarmplot  sns.boxplot   sns.violinplot  

2.3.3) 两个类别变量 VS 数值 sns.countplot  sns.barplot  sns.factorplot  sns.pointplot 

2.4 衍生数据可视化

2.4.1) 日度汇总各类时间总时长

2.4.2) 每天的第一件和最后一件事

2.4.3) 每天的第一件和最后一件事的时间

2.4.4) 每天做的事项数目的统计

2.4.5) 每天做事项先后编号并统计

2.4.6) 各事项关于日期求和的透视表

2.4.7) 每年, 月, 星期的事项关键词词云图

2.4.8) 每天事项的对应先后以及月度关联的网络图

2.5 一键式EDA

3.数据分析

3.1 方差分析每月或是每年的事项是否有差异

3.1.1) 原始事项时长数据的方差分析

3.1.2) 衍生数据的方差分析

3.2 LSTM预测前后事项

3.2.1) 建立字符索引

3.2.2) 建立LSTM模型

3.2.3) 模型训练

3.3 时长数据的简单聚类

3.4 关于日期的缺失值处理

3.5 关于日期的傅里叶分解求周期

3.6 关于日期的传统时间序列分析

3.6.1) ARIMA分析

3.6.2) GARCH分析

3.6.3) VAR分析

3.7 关于日期的NeuralProphet 时间序列

4.数据挖掘

4.1 通过生成聚合特征做日度时长数据的特征工程

4.2 类别变量的one-hot encoding

4.3 利用boruta筛选特征

4.4 利用PCA降维

4.5 利用optuna优化参数

4.6 stacking 融合


```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import os
import jieba
import statsmodels.tsa.stattools as st
import warnings
import lightgbm as lgb
import xgboost as xgb
import networkx as nx 
import pycatflow as pcf
import statsmodels.api as sm
import statsmodels
from collections import Counter
import optuna
import pylab as pl 
import matplotlib.cm as cm 
import torch
import random
from scipy.cluster.hierarchy import linkage, dendrogram
from scipy.stats import kstest, shapiro
from optuna.samplers import TPESampler
from gensim.corpora import Dictionary 
from gensim.models import TfidfModel
from wordcloud import WordCloud
from scipy import stats, signal, interpolate
from arch import arch_model
from boruta import BorutaPy
from statsmodels.tsa.stattools import adfuller
from statsmodels.tsa import stattools
from statsmodels.formula.api import ols
from statsmodels.stats.anova import anova_lm
from statsmodels.tsa.seasonal import seasonal_decompose
from statsmodels.graphics.tsaplots import plot_acf, plot_pacf
from statsmodels.tsa.arima_model import ARMA
from statsmodels.stats.diagnostic import acorr_ljungbox
from sklearn.preprocessing import StandardScaler 
from sklearn.ensemble import RandomForestRegressor, AdaBoostRegressor, GradientBoostingRegressor
from sklearn.metrics import mean_squared_error
from sklearn.decomposition import PCA
from autoviz.AutoViz_Class import AutoViz_Class
from tqdm import tqdm
from neuralprophet import NeuralProphet
from PIL import Image, ImageDraw, ImageFont
from matplotlib import rcParams
from torch import nn
from mpl_toolkits.mplot3d import Axes3D
from utils import part1, part2, part3, part4, funcs
from sklearn.ensemble import StackingRegressor
from sklearn.model_selection import GroupKFold, KFold
from sklearn.model_selection._split import _BaseKFold, indexable, _num_samples
from sklearn.utils.validation import _deprecate_positional_args
from lightgbm import LGBMRegressor
from xgboost import XGBRegressor
from sklearn.feature_extraction.text import TfidfVectorizer
from mlxtend.frequent_patterns import apriori, association_rules
from mlxtend.preprocessing import TransactionEncoder

config = {
    "font.family":'serif',
    "font.size": 40,
    'font.weight':'bold',
    "mathtext.fontset":'stix',
    'figure.titleweight': 'bold',
    'axes.titleweight': 'bold',
    'axes.labelweight': 'bold',
    "font.serif": ['STSong'],
    'axes.unicode_minus':False
}
rcParams.update(config)
path = 'D:/打卡/2022/年度总结'
warnings.filterwarnings("ignore")
%matplotlib inline
```

    C:\Users\hp\AppData\Roaming\Python\Python37\site-packages\pkg_resources\__init__.py:126: PkgResourcesDeprecationWarning: al is an invalid version and will not be supported in a future release
      PkgResourcesDeprecationWarning,
    

    Imported AutoViz_Class version: 0.0.84. Call using:
        AV = AutoViz_Class()
        AV.AutoViz(filename, sep=',', depVar='', dfte=None, header=0, verbose=0,
                                lowess=False,chart_format='svg',max_rows_analyzed=150000,max_cols_analyzed=30)
    Note: verbose=0 or 1 generates charts and displays them in your local Jupyter notebook.
          verbose=2 does not show plot but creates them and saves them in AutoViz_Plots directory in your local machine.
    

# 1.数据预处理

## 1.1 数据合并和一些纠错


```python
# 循环读入每天的数据
df = pd.DataFrame()
for month in [f'0{n}' for n in range(1, 10)] + ['10', '11', '12']:
    for day in [f'0{n}' for n in range(1, 10)] + [str(n) for n in range(10, 32)]:
        file = f'2022-{month}-{day}打卡记录.xlsx'
        phone = f'2022-{month}-{day}打卡总结.xlsx'
        try:
            temp = pd.read_excel(file)
            temp['phone'] = pd.read_excel(phone).loc[0, '手机时间']
            df = pd.concat([df, temp], axis=0)
        except:
            continue
```


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>event</th>
      <th>start</th>
      <th>end</th>
      <th>duration</th>
      <th>attr</th>
      <th>phone</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-01-01</td>
      <td>华尔街日报</td>
      <td>08:39:18</td>
      <td>11:40:35</td>
      <td>182</td>
      <td>有效时间</td>
      <td>64</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-01-01</td>
      <td>做家务</td>
      <td>11:40:35</td>
      <td>12:09:59</td>
      <td>30</td>
      <td>必要时间</td>
      <td>64</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-01-01</td>
      <td>量化</td>
      <td>12:09:59</td>
      <td>12:26:46</td>
      <td>17</td>
      <td>有效时间</td>
      <td>64</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-01-01</td>
      <td>午饭</td>
      <td>12:26:46</td>
      <td>13:06:55</td>
      <td>41</td>
      <td>必要时间</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-01-01</td>
      <td>人文课</td>
      <td>13:06:55</td>
      <td>13:17:12</td>
      <td>11</td>
      <td>有效时间</td>
      <td>64</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>19:16:59</td>
      <td>19:43:03</td>
      <td>26</td>
      <td>浪费时间</td>
      <td>17</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2022-12-30</td>
      <td>口语</td>
      <td>19:43:03</td>
      <td>21:16:20</td>
      <td>93</td>
      <td>有效时间</td>
      <td>17</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>21:16:20</td>
      <td>21:37:19</td>
      <td>21</td>
      <td>浪费时间</td>
      <td>17</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2022-12-30</td>
      <td>找资源</td>
      <td>21:37:19</td>
      <td>22:05:35</td>
      <td>28</td>
      <td>必要时间</td>
      <td>17</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2022-12-30</td>
      <td>写日记</td>
      <td>22:05:35</td>
      <td>22:38:41</td>
      <td>33</td>
      <td>必要时间</td>
      <td>17</td>
    </tr>
  </tbody>
</table>
<p>5086 rows × 7 columns</p>
</div>




```python
# 一些纠错
corrects = {
    '口音':'口语', 
    '策划摄影':'摄影',
    '买食物':'购物', 
    '驾校体检':'咨询驾校', 
    '洗澡':'洗漱',
    '法律咨询':'咨询',
    '生日准备':'购物',
    '买蛋糕':'购物',
    '蒸饭':'煮饭',
    '准备礼物':'购物',
    '摄影策划':'摄影',
    '拿外卖':'拿快递',
    '买东西':'购物'
}

df['event'] = df['event'].apply(lambda x: corrects.get(x) if corrects.get(x) is not None else x)
df.to_excel('2022汇总.xlsx', index=False)
```

## 1.2  新特征生成


```python
df = pd.concat(
    [
        pd.read_excel(f'{n}汇总.xlsx')['date	event	start	end	duration	attr	phone'.split()]
        for n in [2019, 2020, 2021, 2022]
    ], axis=0
)
```

### 1.2.1 根据date生成月日还有星期


```python
# 1.2.1 根据date生成月日还有星期
df['event'] = df['event'].str.strip()
df['year'] = df['date'].astype(str).apply(lambda x:str(x.split('-')[0]))
df['month'] = df['date'].astype(str).apply(lambda x:str(x.split('-')[1]))
df['day'] = df['date'].astype(str).apply(lambda x:str(x.split('-')[2]))
df['weekday'] = pd.to_datetime(df['date']).dt.weekday + 1
```

### 1.2.2 根据start time和end time生成时和分


```python
# 1.2.2 根据start time和end time生成时和分
df['start_hour'] = df['start'].astype(str).apply(lambda x:str(x.split(':')[0]))
df['end_hour'] = df['end'].astype(str).apply(lambda x:str(x.split(':')[0]))
```

### 1.2.3 根据start和end生成中间时间


```python
# 1.2.3 根据start和end生成中间时间
df['mid_time'] = df.apply(lambda x: part1.get_mid(x['start'], x['duration']), axis=1)
```

### 1.2.4 根据事项的中间时间确定事项做的时候处于一天的时段


```python
# 1.2.4 根据事项的中间时间确定事项做的时候处于一天的时段
df['mid_hour'] = df['mid_time'].astype(str).apply(lambda x:str(x.split(':')[0]))
df['day_period'] = df['mid_hour'].map(part1.get_period)
df['week_order'] = df['date'].map(lambda x: pd.Period(x, freq='W'))
```

### 1.2.5 根据时长大小分为长中短


```python
df['duration_attr'] = df['duration'].map(part1.get_duration)
df.tail()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>event</th>
      <th>start</th>
      <th>end</th>
      <th>duration</th>
      <th>attr</th>
      <th>phone</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>weekday</th>
      <th>start_hour</th>
      <th>end_hour</th>
      <th>mid_time</th>
      <th>mid_hour</th>
      <th>day_period</th>
      <th>week_order</th>
      <th>duration_attr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5081</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>19:16:59</td>
      <td>19:43:03</td>
      <td>26</td>
      <td>浪费时间</td>
      <td>17.0</td>
      <td>2022</td>
      <td>12</td>
      <td>30</td>
      <td>5</td>
      <td>19</td>
      <td>19</td>
      <td>19:29</td>
      <td>19</td>
      <td>evening</td>
      <td>2022-12-26/2023-01-01</td>
      <td>short</td>
    </tr>
    <tr>
      <th>5082</th>
      <td>2022-12-30</td>
      <td>口语</td>
      <td>19:43:03</td>
      <td>21:16:20</td>
      <td>93</td>
      <td>有效时间</td>
      <td>17.0</td>
      <td>2022</td>
      <td>12</td>
      <td>30</td>
      <td>5</td>
      <td>19</td>
      <td>21</td>
      <td>20:29</td>
      <td>20</td>
      <td>evening</td>
      <td>2022-12-26/2023-01-01</td>
      <td>long</td>
    </tr>
    <tr>
      <th>5083</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>21:16:20</td>
      <td>21:37:19</td>
      <td>21</td>
      <td>浪费时间</td>
      <td>17.0</td>
      <td>2022</td>
      <td>12</td>
      <td>30</td>
      <td>5</td>
      <td>21</td>
      <td>21</td>
      <td>21:26</td>
      <td>21</td>
      <td>evening</td>
      <td>2022-12-26/2023-01-01</td>
      <td>short</td>
    </tr>
    <tr>
      <th>5084</th>
      <td>2022-12-30</td>
      <td>找资源</td>
      <td>21:37:19</td>
      <td>22:05:35</td>
      <td>28</td>
      <td>必要时间</td>
      <td>17.0</td>
      <td>2022</td>
      <td>12</td>
      <td>30</td>
      <td>5</td>
      <td>21</td>
      <td>22</td>
      <td>21:51</td>
      <td>21</td>
      <td>evening</td>
      <td>2022-12-26/2023-01-01</td>
      <td>short</td>
    </tr>
    <tr>
      <th>5085</th>
      <td>2022-12-30</td>
      <td>写日记</td>
      <td>22:05:35</td>
      <td>22:38:41</td>
      <td>33</td>
      <td>必要时间</td>
      <td>17.0</td>
      <td>2022</td>
      <td>12</td>
      <td>30</td>
      <td>5</td>
      <td>22</td>
      <td>22</td>
      <td>22:21</td>
      <td>22</td>
      <td>evening</td>
      <td>2022-12-26/2023-01-01</td>
      <td>middle</td>
    </tr>
  </tbody>
</table>
</div>



### 1.2.6 修改一些前后差别不大的事件


```python
# 1.2.6 修改一些前后差别不大的事件
df['event'] = df['event'].map(part1.correct_events)
```

### 1.2.7 事项与属性的对应


```python
# 1.2.7 事项与属性的对应
# 各别事项前后不统一 需要统一修正 修正成该事项出现最多的属性
events = df['event'].unique()
event2attr = {}
for e in events:
    attr = df[df['event'] == e]['attr'].value_counts().index[0]
    event2attr[e] = attr

df['attr'] = df['event'].map(event2attr)
df.to_excel('4年汇总.xlsx', index=False)
```


```python
# 检查是否还存在事项的属性不唯一的情况
df[['event', 'attr']].drop_duplicates().to_excel('事项性质对应表.xlsx', index=False)
df[['event', 'attr']].drop_duplicates()['event'].value_counts()
```




    尝试耳机          1
    讲座            1
    公开课           1
    hackerrank    1
    剪辑视频          1
                 ..
    转账            1
    洗漱            1
    课             1
    写作            1
    找地            1
    Name: event, Length: 271, dtype: int64



# 2.数据可视化

## 2.1 变量分类


```python
date_vars = ['date']
years = [2022]#range(2019, 2023)

numeric_vars = [
    'duration', 'phone'
]

cate_vars = [
    'event', 'year', 'month', 'day', 
    'weekday', 'mid_hour', 'day_period', 'week_order', 'duration_attr', 'attr'
]
```

## 2.2 单变量分析

### 2.2.1) 数值变量的直方图


```python
# 2.2.1) 数值变量的直方图
part = '2.2.1'
for col in numeric_vars:
    for year in years:
        part2.numeric_hist(df, col, year, part, path)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_30_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_30_1.png)
    


### 2.2.2) 类别变量的饼图


```python
# 2.2.2) 类别变量的饼图
# 类别变量饼图
part = '2.2.2'

for col in cate_vars:
    if col == 'year':
        continue
    for year in years:
        part2.plot_pie(df, col, 15, part, path, year)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_32_8.png)
    


### 2.2.3) 专注力分析


```python
# 2.2.3) 专注力分析
part = '2.2.3'
title = f'{part} 有效时间在不同年和时长段的柱形图'
temp = df[df['attr'] == '有效时间'].groupby(['year', 'duration_attr'])['date'].\
    count().unstack()
temp = temp / temp.sum(axis=0)  #计算频率
temp.plot(
        kind='bar', 
        figsize=(20, 10), 
    )
plt.title(title, fontsize=20)
plt.xlabel('Year', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.legend(fontsize=20)
file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_34_0.png)
    



```python
part2.concentrate(df, 2022, part, path)
```


    <Figure size 800x550 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_35_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_35_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_35_3.png)
    



```python
part2.concentrate(df, 2021, part, path)
```


    <Figure size 800x550 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_36_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_36_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_36_3.png)
    



```python
part2.concentrate(df, 2020, part, path)
```


    <Figure size 800x550 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_37_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_37_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_37_3.png)
    



```python
part2.concentrate(df, 2019, part, path)
```


    <Figure size 800x550 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_38_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_38_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_38_3.png)
    


## 2.3 双变量分析

### 2.3.1) PyCatFlow图


```python
# 2.3.1) PyCatFlow图
column_order = { 
    date: i + 1 for i, date in enumerate(df['date'].unique()) 
}
df['column_order'] = df['date'].map(column_order)
translate = pd.read_csv('event.csv', encoding='utf-8')
chi = translate['Chinese'].values
eng = translate['English'].dropna().values
translates = dict(zip(chi, eng))

translates
```




    {'托福写作与听力': 'TOEFL Writing and Listening',
     'python': 'python',
     '快递': 'express',
     '搜索术': 'Search technique',
     '午休': 'noon break',
     '托福听力': 'TOEFL Listening ',
     '博弈论': 'Game Theory',
     '磨蹭': 'Procrastinate',
     '晚饭': 'dinner',
     '雷欧奥特曼': 'Ultraman Leo',
     '复习偏微分': 'Review partial differential',
     '托福写作': 'TOEFL Writing',
     '课': 'course',
     'PPT': 'PPT',
     '午饭走路': 'Lunch walk',
     '重师游玩': 'Heavy division tour',
     'K歌': 'go to karaoke',
     '晚饭归来': 'Come back from dinner',
     '中央银行学': 'Central Banking',
     '有限元': 'Finite element',
     '午饭': 'lunch',
     '托福口语': 'TOEFL Speaking',
     '万矿量化': '10,000 ore quantification',
     '托福课': 'TOEFL',
     '大决战': 'A decisive battle',
     '偏微分': 'partial differential',
     '编程作业': 'Programming jobs',
     '睡觉': 'sleep',
     '单词': 'word',
     '玩游戏': 'play a game',
     'GMAT': 'GMAT',
     '口语视频': 'Oral video',
     '听力视频': 'Listening video',
     '蹲坑': 'latrine pit',
     'AQF': 'AQF',
     '打字': 'typing',
     '排练pr': 'Rehearse pr',
     '公开课': 'Open class',
     '听力': 'hearing',
     '托福听力真题': 'True TOEFL Listening Test',
     '交材料': 'Submit materials',
     'GMAT长难句': 'GMAT long difficult sentence',
     'GMAT试题': 'GMAT questions',
     'GMAT直播': 'GMAT Live',
     '写作课': 'Writing class',
     '银行会计': 'Bank accounting',
     '复习': 'review',
     '改代码': 'Change code',
     '逐鹿九州': 'Chasing for Deer in Jiuzhou',
     '排练ppt': 'Rehearse ppt',
     '看论文': 'Reading papers',
     'gmat': 'gmat',
     '林俊杰': 'Lin Junjie',
     '独立写作': 'Independent Writing',
     '托福公开课': 'TOEFL Open Class',
     '托福阅读': 'TOEFL Reading',
     '托福精听': 'TOEFL Listening Comprehension',
     '托福真题': 'TOEFL True Test',
     '写作视频': 'Writing Video',
     '手机': 'mobile phone',
     '写作': 'writing',
     '口语': 'oral language',
     '成绩': 'achievement',
     '写作和听力': 'Writing and Listening',
     '排练': 'Rehearse',
     '中央银行': 'central bank',
     '听力写作': 'Listening Writing',
     'GMAT视频': 'GMAT Video',
     '量化': 'quantification',
     'gis': 'gis',
     '背单词': 'recite words',
     '柯南': 'Conan',
     '炼句': 'Refining sentences',
     'python尝试': 'Python attempts',
     '托福听力与口语': 'TOEFL Listening and Speaking',
     '单词与精听': 'Words and intensive listening',
     '改作文': 'correct compositions',
     '长难句': 'Long difficult sentence',
     '拿计算器': 'Take a calculator',
     'GMAT学习': 'GMAT Learning',
     '写报告': 'Write a report',
     '实习资料': 'Internship materials',
     'R': 'R',
     '理发': 'haircut',
     '写日记': 'keep a diary',
     'GRE': 'GRE',
     '课与单词': 'Lesson and Word',
     '拍视频': 'Take a video',
     '审核视频': 'Audit Video',
     'matlab': 'matlab',
     '经验交流会': 'have a meeting to exchange experience',
     '简历': 'resume',
     '风险管理': 'risk management ',
     '罗布剧场版': 'Rob Theatre Edition',
     'PDE': 'PDE',
     '剪辑视频': 'Clip Video',
     '洗头': 'wash hair',
     '考试': 'examination',
     '找实习': 'Looking for internship',
     '听讲座': 'Listen to the lecture',
     '外出': 'go out',
     '等候': 'wait',
     '开幕式': 'The opening ceremony',
     '填信息': 'Fill in information',
     '答疑': 'answering question',
     '编程': 'programming',
     '摄影': 'Photography',
     '尝试耳机': 'Try headphones',
     '找地': 'Land search',
     '托福模考': 'TOEFL Model Test',
     '整理资料': 'put file in order',
     'GRE阅读': 'GRE Reading',
     'GRE长难句': 'GRE long difficult sentence',
     '作图': 'Mapping',
     '打印': 'Print',
     '金融法': 'Financial law',
     '做图': 'Mapping',
     '抢课': 'Snatch lessons',
     '查文献': 'Literature search',
     '讲座': 'lecture',
     '买药': 'Buy medicine',
     '读论文': 'Reading papers',
     '留学咨询': 'Overseas Study Consultation',
     'GRE填空': 'GRE fill in the blank',
     '咨询': 'consulting service',
     '实习工作': 'Internship',
     '数值分析': 'numerical analysis',
     '托福': 'TOEFL',
     '论文': 'paper',
     '开会': 'attend a meeting',
     '商业伦理': 'business ethics ',
     '装软件': 'Install software',
     '量化课程': 'Quantitative courses',
     '量化作业': 'Quantitative operation',
     '练字': 'practise calligraphy',
     '开户': 'Account opening',
     'GRE数学': 'GRE Mathematics',
     'GRE写作': 'GRE Writing',
     '期权定价': 'Option pricing',
     '订酒店': 'Hotel reservation',
     '打印成绩单': 'Print transcripts',
     '量化项目': 'Quantitative project',
     '搬家': 'house-moving',
     '拿成绩单': 'Take the transcript',
     '托福报名': 'TOEFL registration',
     '面试': 'interview',
     '午饭.': 'Lunch',
     '填表': 'Fill in the form',
     '可视化': 'visualization',
     '建模': 'modeling',
     '散步': 'take a walk',
     '项目管理': 'project management',
     '衍生工具': 'Derivatives',
     '聚餐': 'dinner party',
     '转账': 'transfer accounts',
     '改CV': 'Change CV',
     '体侧': 'Corporeal side',
     '华尔街日报': 'Wall Street Journal',
     'kaggle': 'kaggle',
     'hackerrank': 'hackerrank',
     'C++': 'C++',
     '随机过程': 'random process',
     'leetcode': 'leetcode',
     '希腊神话': 'MYTHOS',
     'vn.py': 'vn.py',
     '推荐信': 'recommendation',
     '数据分析': 'Data analysis',
     '文书修改': 'Amendment',
     '视频内容': 'Video content',
     'youtube': 'youtube',
     '借书': 'Borrow books',
     '随机微积分': 'Stochastic calculus',
     '圣经': 'Bible',
     '文书': 'document',
     '计量': 'metering',
     '西洋画': 'Western painting',
     '算法课程': 'Algorithm course',
     '选课指导': 'Course Selection Guidance',
     '考试报名': 'Examination registration',
     '复变': 'Complex variable',
     '毕业论文': 'dissertation',
     '干洗': 'dry cleaning',
     '金数': 'Gold number',
     '金融人脉': 'Financial contacts',
     '陪诊': 'Accompanying',
     '走亲': 'Leaving relatives',
     '算分': 'Score',
     '买东西': 'shopping',
     '实变': 'Real change',
     '回家': 'get home',
     '人工智能': 'artificial intelligence',
     '泛函': 'functional',
     '人文书籍': 'Humanities books',
     '测度论': 'Measure theory',
     '人文课': 'Humanities',
     '开证明': 'Issue a certificate',
     '导员谈话': 'Talk with facilitators',
     '修图': 'Map revision',
     '导师谈话': 'Mentor Talk',
     '人文教程': 'Humanities Course',
     '准备材料': 'Prepare materials',
     '整理笔记': 'Organize notes',
     '写推文': 'Twitter',
     '运动': 'motion',
     '看工作': 'Look at work',
     '安装软件': 'Install software',
     '洗衣服': 'wash clothes',
     '更新设备': 'Update device',
     '做家务': 'do housework',
     '写计划': 'Write Plan',
     '数据库': 'database',
     '找工作': 'job-hunting',
     '修复电脑': 'Repairing the PC',
     '游玩': 'play',
     '制订计划': 'Plan',
     '演唱会': 'vocal concert',
     '制作视频': 'Make Video',
     '修U盘': 'Repair USB flash disk',
     '搜集资源': 'Gather resources',
     '缴费': 'pay',
     '接单工作': 'Order receiving',
     '监工': 'overseer',
     'linux': 'linux',
     '数据竞赛': 'Data Contest',
     '爬虫': 'Reptile',
     '检查设备': 'Check equipment',
     '逛街': 'Shopping',
     '正则': 'regular',
     '机器学习': 'machine learning',
     '清理内存': 'Clean memory',
     '换锁': 'Change lock',
     '制定计划': 'draw up a plan',
     '下载软件': 'Download a software',
     '化妆': 'Make up',
     '接种疫苗': 'vaccination',
     '找资源': 'Find resources',
     '配置环境': 'Configuring the environment',
     '深度学习': 'Deep learning',
     '大数据': 'big data',
     '线上研讨': 'Online discussion',
     '做视频': 'Make a video',
     '报名考试': 'Sign up for the exam',
     '外出游玩': 'Go out and play',
     '图神经网络': 'Fig. Neural network',
     '洗漱': 'Wash and gargle',
     '移动端爬虫': 'Mobile crawler',
     '闲聊': 'gossip',
     '爬虫进阶': 'Advanced Crawler',
     '购物': 'shopping',
     '看奥运': 'Watch the Olympics',
     '咨询驾校': 'Consulting driving schools',
     '科一': 'Section I',
     '科二': 'Section II',
     '科四': 'Section IV',
     '赶车': 'Drive',
     '科三': 'Section III',
     'plotly数据可视化': 'Plot data visualization',
     'python高阶': 'Python high order',
     '地理': 'Geography',
     '改密码': 'Change password',
     '做手工': 'Handwork',
     '强化学习': 'Intensive learning',
     '输液': 'infusion',
     '数据挖掘': 'data mining ',
     '做讲义': 'Make handouts',
     '申请': 'apply',
     '看发布会': 'Watch the press conference',
     '核酸': 'nucleic acid',
     '洗碗': 'Wash dishes',
     '煮饭': 'cook rice'}




```python
df['eng_event'] = df['event'].map(translates)

df['eng_attr'] = df['attr'].map({
    '有效时间':'effective',
    '浪费时间':'wasteful',
    '必要时间':'necessary',
})

temp = df[df['year'] == '2022']
temp[['eng_event', 'eng_attr', 'date', 'column_order']].\
to_csv('2022.csv', encoding='gbk', index=False)
```


```python
# Loading and parsing data:
data = pcf.read_file(
    "2022.csv", 
    columns="date", 
    nodes="eng_event", 
    categories="eng_attr", 
    column_order="column_order"
)

# Generating the visualization
viz = pcf.visualize(
    data,
    spacing=100,
    width=88000,
    maxValue=20,
    minValue=2
)
viz
```




    
![svg](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_43_0.svg)
    



### 2.3.2) 单个类别变量 vs 数值


```python
# 2.3.2) 单个类别变量 vs 数值
# 类别变量 VS 数值变量
part = '2.3.2'
for num in numeric_vars:
    for cate in cate_vars:
        part2.plot_num_vs_cate(df, num, cate, path, part)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_19.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_26.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_27.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_32.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_33.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_34.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_35.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_36.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_37.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_38.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_39.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_40.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_41.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_42.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_43.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_44.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_45.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_46.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_47.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_48.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_49.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_50.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_51.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_52.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_53.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_54.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_55.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_56.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_57.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_58.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_59.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_60.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_61.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_62.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_63.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_64.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_65.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_66.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_67.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_68.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_69.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_70.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_71.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_72.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_73.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_74.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_75.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_76.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_77.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_78.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_79.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_80.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_81.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_82.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_83.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_84.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_85.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_86.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_87.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_88.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_89.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_90.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_91.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_92.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_93.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_94.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_95.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_96.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_97.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_98.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_99.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_100.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_101.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_102.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_103.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_104.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_105.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_106.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_45_107.png)
    



```python
for num in numeric_vars:
    for cate in cate_vars:
        part2.plot_box(df, num, cate, path, part)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_46_19.png)
    


### 2.3.3) 两个类别变量 VS 数值


```python
# 2.3.3) 两个类别变量 VS 数值
part = '2.3.3'
for idx, v in enumerate(cate_vars):
    if idx == len(cate_vars) - 1:
        break
    for k in cate_vars[idx + 1:]:
        part2.plot_count_plot(df, v, k, path, part)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_19.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_26.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_27.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_32.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_33.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_34.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_35.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_36.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_37.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_38.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_39.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_40.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_41.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_42.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_43.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_48_44.png)
    


## 2.4 衍生数据可视化

### 2.4.1) 日度汇总各类时间总时长


```python
# 2.4.1) 日度汇总各类时间总时长
part = '2.4.1'
daily_attr = df.groupby(['date', 'attr'])['duration'].\
    agg('sum').unstack().reset_index()

daily_attr = pd.merge(
    daily_attr, 
    df[['date', 'phone']].drop_duplicates(), 
    on='date'
).rename(columns={'phone':'手机时间'})

daily_attr
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>必要时间</th>
      <th>有效时间</th>
      <th>浪费时间</th>
      <th>手机时间</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-02-27</td>
      <td>160.0</td>
      <td>590.0</td>
      <td>80.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04</td>
      <td>650.0</td>
      <td>160.0</td>
      <td>30.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-05</td>
      <td>395.0</td>
      <td>342.0</td>
      <td>108.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-03-06</td>
      <td>370.0</td>
      <td>340.0</td>
      <td>130.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-03-07</td>
      <td>495.0</td>
      <td>265.0</td>
      <td>80.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>2022-12-26</td>
      <td>334.0</td>
      <td>426.0</td>
      <td>87.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>1187</th>
      <td>2022-12-27</td>
      <td>301.0</td>
      <td>442.0</td>
      <td>93.0</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>1188</th>
      <td>2022-12-28</td>
      <td>341.0</td>
      <td>475.0</td>
      <td>58.0</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>1189</th>
      <td>2022-12-29</td>
      <td>293.0</td>
      <td>479.0</td>
      <td>81.0</td>
      <td>32.0</td>
    </tr>
    <tr>
      <th>1190</th>
      <td>2022-12-30</td>
      <td>226.0</td>
      <td>484.0</td>
      <td>134.0</td>
      <td>17.0</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 5 columns</p>
</div>




```python
daily_attr.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>必要时间</th>
      <th>有效时间</th>
      <th>浪费时间</th>
      <th>手机时间</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1190.000000</td>
      <td>1191.000000</td>
      <td>1185.000000</td>
      <td>1130.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>248.842017</td>
      <td>453.571788</td>
      <td>105.305485</td>
      <td>44.834513</td>
    </tr>
    <tr>
      <th>std</th>
      <td>116.887071</td>
      <td>131.499406</td>
      <td>49.670990</td>
      <td>66.057240</td>
    </tr>
    <tr>
      <th>min</th>
      <td>4.000000</td>
      <td>21.000000</td>
      <td>13.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>168.000000</td>
      <td>394.000000</td>
      <td>70.000000</td>
      <td>25.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>230.500000</td>
      <td>476.000000</td>
      <td>97.000000</td>
      <td>34.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>323.000000</td>
      <td>552.000000</td>
      <td>131.000000</td>
      <td>47.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>711.000000</td>
      <td>705.000000</td>
      <td>448.000000</td>
      <td>700.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
daily_attr[daily_attr['date'] >= '2022-01-01'].describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>必要时间</th>
      <th>有效时间</th>
      <th>浪费时间</th>
      <th>手机时间</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>326.000000</td>
      <td>326.000000</td>
      <td>322.000000</td>
      <td>326.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>297.003067</td>
      <td>430.058282</td>
      <td>87.565217</td>
      <td>22.975460</td>
    </tr>
    <tr>
      <th>std</th>
      <td>106.621675</td>
      <td>103.539987</td>
      <td>35.328592</td>
      <td>10.066212</td>
    </tr>
    <tr>
      <th>min</th>
      <td>29.000000</td>
      <td>116.000000</td>
      <td>18.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>218.000000</td>
      <td>373.000000</td>
      <td>63.000000</td>
      <td>16.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>293.000000</td>
      <td>441.500000</td>
      <td>87.000000</td>
      <td>22.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>357.000000</td>
      <td>503.750000</td>
      <td>107.000000</td>
      <td>29.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>711.000000</td>
      <td>610.000000</td>
      <td>263.000000</td>
      <td>64.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
title = f'{part} 日度汇总各类时间总时长'
daily_attr.set_index('date').plot(
    kind='line', figsize=(20, 10)
)

plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Sum of daily duration', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.legend(loc=0, fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_54_0.png)
    



```python
# 生成新数据
daily_attr['weekday'] = pd.to_datetime(daily_attr['date']).dt.weekday + 1
daily_attr['month'] = daily_attr['date'].apply(lambda x:str(x).split('-')[1])
daily_attr['day'] = daily_attr['date'].apply(lambda x:str(x).split('-')[2])
daily_attr['week_order'] = daily_attr['date'].map(lambda x: pd.Period(x, freq='W'))
daily_attr['day_of_year'] = pd.to_datetime(daily_attr['date']).dt.day_of_year
daily_attr['year'] = pd.to_datetime(daily_attr['date']).dt.year
```


```python
# 每年各类时间折线图对比
for col in '必要时间	有效时间	浪费时间	手机时间'.split():
    part2.line_compare(daily_attr, col, part, path)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_56_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_56_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_56_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_56_3.png)
    



```python
# 插值
daily_attr_copy = daily_attr.copy()
daily_attr_copy = daily_attr_copy.rename(
    columns={
        '必要时间': 'necessary time',	
        '有效时间': 'effective time',	
        '浪费时间': 'waste time',	
        '手机时间': 'phone time',
    }
)
daily_attr_copy = daily_attr_copy.dropna()
daily_attr_copy = daily_attr_copy[daily_attr_copy['date'] >= '2022-01-01']
```


```python
x, y, z = 'waste time', 'necessary time', 'effective time'
part2.daily_interpolate(daily_attr_copy, x, y, z, path, part, n=400)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_58_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_58_1.png)
    



```python
x, y, z = 'phone time', 'necessary time', 'effective time'
part2.daily_interpolate(daily_attr_copy, x, y, z, path, part)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_59_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_59_1.png)
    



```python
# 4年各类时间在月，日，星期的对比
for c in ['weekday', 'day_of_year', 'month']:
    for tt in '必要时间	有效时间	浪费时间	手机时间'.split():
        for fun in [part2.get_max_sum_year, part2.get_max_mean_year]:
            part2.plot_max_year(daily_attr, c, tt, fun, part, path)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_19.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_26.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_27.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_32.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_33.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_34.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_35.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_36.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_37.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_38.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_39.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_40.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_41.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_42.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_43.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_44.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_45.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_46.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_60_47.png)
    


### 2.4.2) 每天的第一件和最后一件事


```python
# 2.4.2) 每天的第一件和最后一件事
part = '2.4.2'
first_last_event = pd.DataFrame()

# 每天做的第一件事
first_last_event['first_event'] = df[['date', 'event']].\
    groupby(['date'])['event'].first()

# 每天做的最后一件事
first_last_event['last_event'] = df[['date', 'event']].\
    groupby(['date'])['event'].last()

    
first_last_event = first_last_event.reset_index()
first_last_event
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>first_event</th>
      <th>last_event</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-02-27</td>
      <td>托福写作与听力</td>
      <td>托福写作</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04</td>
      <td>托福听力</td>
      <td>托福听力</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-05</td>
      <td>托福听力</td>
      <td>公开课</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-03-06</td>
      <td>托福听力</td>
      <td>磨蹭</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-03-07</td>
      <td>手机</td>
      <td>排练</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>2022-12-26</td>
      <td>华尔街日报</td>
      <td>写日记</td>
    </tr>
    <tr>
      <th>1187</th>
      <td>2022-12-27</td>
      <td>写报告</td>
      <td>写日记</td>
    </tr>
    <tr>
      <th>1188</th>
      <td>2022-12-28</td>
      <td>华尔街日报</td>
      <td>写日记</td>
    </tr>
    <tr>
      <th>1189</th>
      <td>2022-12-29</td>
      <td>华尔街日报</td>
      <td>写日记</td>
    </tr>
    <tr>
      <th>1190</th>
      <td>2022-12-30</td>
      <td>华尔街日报</td>
      <td>写日记</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 3 columns</p>
</div>




```python
df.groupby(['year'])['event'].value_counts().unstack()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>event</th>
      <th>AQF</th>
      <th>C++</th>
      <th>GMAT</th>
      <th>GMAT学习</th>
      <th>GMAT直播</th>
      <th>GMAT视频</th>
      <th>GMAT试题</th>
      <th>GMAT长难句</th>
      <th>GRE</th>
      <th>GRE写作</th>
      <th>...</th>
      <th>银行会计</th>
      <th>长难句</th>
      <th>闲聊</th>
      <th>陪诊</th>
      <th>随机微积分</th>
      <th>随机过程</th>
      <th>雷欧奥特曼</th>
      <th>面试</th>
      <th>项目管理</th>
      <th>风险管理</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019</th>
      <td>75.0</td>
      <td>24.0</td>
      <td>35.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>20.0</td>
      <td>31.0</td>
      <td>...</td>
      <td>88.0</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>19.0</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>15.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>NaN</td>
      <td>31.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>208.0</td>
      <td>9.0</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2022</th>
      <td>NaN</td>
      <td>12.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 271 columns</p>
</div>




```python
df.groupby(['year', 'event'])['duration'].sum().reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>event</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019</td>
      <td>AQF</td>
      <td>3880</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019</td>
      <td>C++</td>
      <td>1768</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019</td>
      <td>GMAT</td>
      <td>1473</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019</td>
      <td>GMAT学习</td>
      <td>60</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019</td>
      <td>GMAT直播</td>
      <td>100</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>371</th>
      <td>2022</td>
      <td>赶车</td>
      <td>155</td>
    </tr>
    <tr>
      <th>372</th>
      <td>2022</td>
      <td>输液</td>
      <td>644</td>
    </tr>
    <tr>
      <th>373</th>
      <td>2022</td>
      <td>运动</td>
      <td>11493</td>
    </tr>
    <tr>
      <th>374</th>
      <td>2022</td>
      <td>量化</td>
      <td>16222</td>
    </tr>
    <tr>
      <th>375</th>
      <td>2022</td>
      <td>闲聊</td>
      <td>475</td>
    </tr>
  </tbody>
</table>
<p>376 rows × 3 columns</p>
</div>




```python
# 整体的饼图
part2.plot_pie(first_last_event, 'first_event', 15, part, path)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_65_0.png)
    



```python
# 2019饼图
part2.plot_pie(
    first_last_event[first_last_event['date'] < '2020-01-01'], 
    'first_event', 
    15, 
    part, 
    path,
    year=2019
)
part2.plot_pie(
    first_last_event[first_last_event['date'] < '2020-01-01'], 
    'last_event', 
    15, 
    part, 
    path,
    year=2019
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_66_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_66_1.png)
    



```python
# 2020饼图
temp = first_last_event[
    (first_last_event['date'] < '2021-01-01') & (first_last_event['date'] >= '2020-01-01')
]
part2.plot_pie(
    temp, 
    'first_event', 
    15, 
    part, 
    path,
    year=2020
)
part2.plot_pie(
    temp, 
    'last_event', 
    5, 
    part, 
    path,
    year=2020
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_67_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_67_1.png)
    



```python
# 2021饼图
temp = first_last_event[
    (first_last_event['date'] < '2022-01-01') & (first_last_event['date'] >= '2021-01-01')
]
part2.plot_pie(
    temp, 
    'first_event', 
    15, 
    part, 
    path,
    year=2021
)
part2.plot_pie(
    temp, 
    'last_event', 
    5, 
    part, 
    path,
    year=2021
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_68_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_68_1.png)
    



```python
# 2022饼图
temp = first_last_event[
    (first_last_event['date'] < '2023-01-01') & (first_last_event['date'] >= '2022-01-01')
]
part2.plot_pie(
    temp, 
    'first_event', 
    15, 
    part, 
    path,
    year=2022
)
part2.plot_pie(
    temp, 
    'last_event', 
    5, 
    part, 
    path,
    year=2022
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_69_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_69_1.png)
    


### 2.4.3) 每天的第一件和最后一件事的时间


```python
# 2.4.3) 每天的第一件和最后一件事的时间
part = '2.4.3'
first_last_time = pd.merge(
    df.groupby(['date'])['start', 'start_hour'].first(), 
    df.groupby(['date'])['end', 'end_hour'].last(), 
    on='date'
).reset_index().rename(columns={
    'start':'first_start_time', 
    'start_hour':'first_start_hour',
    'end':'last_end_time', 
    'end_hour':'last_end_hour'
})

first_last_time
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>first_start_time</th>
      <th>first_start_hour</th>
      <th>last_end_time</th>
      <th>last_end_hour</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-02-27</td>
      <td>07:40:00</td>
      <td>07</td>
      <td>21:30:00</td>
      <td>21</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04</td>
      <td>07:40:00</td>
      <td>07</td>
      <td>21:40:00</td>
      <td>21</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-05</td>
      <td>07:40:00</td>
      <td>07</td>
      <td>21:45:00</td>
      <td>21</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-03-06</td>
      <td>07:40:00</td>
      <td>07</td>
      <td>21:40:00</td>
      <td>21</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-03-07</td>
      <td>07:40:00</td>
      <td>07</td>
      <td>21:40:00</td>
      <td>21</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>2022-12-26</td>
      <td>08:38:55</td>
      <td>08</td>
      <td>22:44:52</td>
      <td>22</td>
    </tr>
    <tr>
      <th>1187</th>
      <td>2022-12-27</td>
      <td>08:35:12</td>
      <td>08</td>
      <td>22:32:48</td>
      <td>22</td>
    </tr>
    <tr>
      <th>1188</th>
      <td>2022-12-28</td>
      <td>08:34:53</td>
      <td>08</td>
      <td>23:08:45</td>
      <td>23</td>
    </tr>
    <tr>
      <th>1189</th>
      <td>2022-12-29</td>
      <td>08:39:24</td>
      <td>08</td>
      <td>22:51:25</td>
      <td>22</td>
    </tr>
    <tr>
      <th>1190</th>
      <td>2022-12-30</td>
      <td>08:34:17</td>
      <td>08</td>
      <td>22:38:41</td>
      <td>22</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 5 columns</p>
</div>




```python
# 2019饼图
temp = first_last_time[first_last_time['date'] < '2020-01-01']
part2.plot_pie(
    temp, 
    'first_start_hour', 
    15, 
    part, 
    path,
    year=2019
)
part2.plot_pie(
    temp, 
    'last_end_hour', 
    5, 
    part, 
    path,
    year=2019
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_72_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_72_1.png)
    



```python
# 2020饼图
temp = first_last_time[
    (first_last_time['date'] < '2021-01-01') & (first_last_time['date'] >= '2020-01-01')
]
part2.plot_pie(
    temp, 
    'first_start_hour', 
    15, 
    part, 
    path,
    year=2020
)
part2.plot_pie(
    temp, 
    'last_end_hour', 
    5, 
    part, 
    path,
    year=2020
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_73_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_73_1.png)
    



```python
# 2021饼图
temp = first_last_time[
    (first_last_time['date'] < '2022-01-01') & (first_last_time['date'] >= '2021-01-01')
]
part2.plot_pie(
    temp, 
    'first_start_hour', 
    15, 
    part, 
    path,
    year=2021
)
part2.plot_pie(
    temp, 
    'last_end_hour', 
    5, 
    part, 
    path,
    year=2021
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_74_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_74_1.png)
    



```python
# 2022饼图
temp = first_last_time[
    (first_last_time['date'] < '2023-01-01') & (first_last_time['date'] >= '2022-01-01')
]
part2.plot_pie(
    temp, 
    'first_start_hour', 
    15, 
    part, 
    path,
    year=2022
)
part2.plot_pie(
    temp, 
    'last_end_hour', 
    5, 
    part, 
    path,
    year=2022
)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_75_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_75_1.png)
    


### 2.4.4) 每天做的事项数目的统计


```python
# 2.4.4) 每天做的事项数目的统计
part = '2.4.4'
df.groupby('date')['event'].count().\
    reset_index().\
    sort_values(by='event', ascending=False)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>event</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>45</th>
      <td>2019-04-18</td>
      <td>30</td>
    </tr>
    <tr>
      <th>129</th>
      <td>2019-07-21</td>
      <td>28</td>
    </tr>
    <tr>
      <th>122</th>
      <td>2019-07-13</td>
      <td>27</td>
    </tr>
    <tr>
      <th>125</th>
      <td>2019-07-16</td>
      <td>27</td>
    </tr>
    <tr>
      <th>116</th>
      <td>2019-07-07</td>
      <td>27</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>511</th>
      <td>2020-10-27</td>
      <td>4</td>
    </tr>
    <tr>
      <th>902</th>
      <td>2022-02-13</td>
      <td>4</td>
    </tr>
    <tr>
      <th>527</th>
      <td>2020-11-12</td>
      <td>3</td>
    </tr>
    <tr>
      <th>528</th>
      <td>2020-11-13</td>
      <td>3</td>
    </tr>
    <tr>
      <th>470</th>
      <td>2020-09-14</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 2 columns</p>
</div>




```python
title = f'{part} 每天做的事项数目的统计'
df.groupby('date')['event'].count().plot(
    figsize=(20, 10)
)
plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Count', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_78_0.png)
    



```python
title = f'{part} 每天做的事项数目的统计直方图'
df.groupby('date')['event'].count().plot(
    kind='hist', figsize=(20, 10)
)

plt.title(title, fontsize=20)
plt.xlabel('Count', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_79_0.png)
    


### 2.4.5) 各年，每天，每月做得最多的事以及各年的相似度


```python
# 各年
df.groupby(['year'])[['event']].agg(
    lambda x:','.join(x[0] for x in Counter(x).most_common(10))
)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>event</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019</th>
      <td>磨蹭,单词,玩游戏,晚饭,午休,午饭,写日记,托福听力,托福口语,偏微分</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>磨蹭,华尔街日报,玩游戏,写日记,午饭,晚饭,午休,人文书籍,算法课程,随机微积分</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>磨蹭,人文课,运动,华尔街日报,量化,玩游戏,接单工作,写日记,午饭,晚饭</td>
    </tr>
    <tr>
      <th>2022</th>
      <td>玩游戏,磨蹭,华尔街日报,摄影,量化,接单工作,晚饭,写日记,午饭,午休</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 每月做的次数最多的事
df.groupby(['month'])[['event']].agg(
    lambda x:','.join(x[0] for x in Counter(x).most_common(10))
)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>event</th>
    </tr>
    <tr>
      <th>month</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01</th>
      <td>华尔街日报,玩游戏,磨蹭,晚饭,午休,午饭,量化,写日记,人文课,运动</td>
    </tr>
    <tr>
      <th>02</th>
      <td>华尔街日报,磨蹭,玩游戏,午饭,午休,接单工作,晚饭,写日记,量化,运动</td>
    </tr>
    <tr>
      <th>03</th>
      <td>磨蹭,华尔街日报,玩游戏,人文课,晚饭,午休,午饭,写日记,人文书籍,接单工作</td>
    </tr>
    <tr>
      <th>04</th>
      <td>磨蹭,玩游戏,午饭,晚饭,午休,写日记,人文课,华尔街日报,人文书籍,接单工作</td>
    </tr>
    <tr>
      <th>05</th>
      <td>磨蹭,玩游戏,晚饭,华尔街日报,午饭,午休,写日记,单词,人文书籍,接单工作</td>
    </tr>
    <tr>
      <th>06</th>
      <td>磨蹭,玩游戏,写日记,午饭,晚饭,午休,华尔街日报,单词,人文课,人文书籍</td>
    </tr>
    <tr>
      <th>07</th>
      <td>磨蹭,玩游戏,晚饭,单词,写日记,午饭,午休,运动,人文书籍,华尔街日报</td>
    </tr>
    <tr>
      <th>08</th>
      <td>磨蹭,玩游戏,量化,运动,晚饭,午饭,写日记,午休,华尔街日报,人文书籍</td>
    </tr>
    <tr>
      <th>09</th>
      <td>磨蹭,量化,华尔街日报,运动,玩游戏,摄影,写日记,午饭,晚饭,午休</td>
    </tr>
    <tr>
      <th>10</th>
      <td>磨蹭,玩游戏,华尔街日报,写日记,晚饭,运动,午饭,午休,摄影,量化</td>
    </tr>
    <tr>
      <th>11</th>
      <td>磨蹭,华尔街日报,玩游戏,写日记,接单工作,午饭,晚饭,午休,运动,人文课</td>
    </tr>
    <tr>
      <th>12</th>
      <td>磨蹭,华尔街日报,玩游戏,接单工作,写日记,午休,晚饭,午饭,运动,量化</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 各天做的次数最多的事
df.groupby(['weekday'])[['event']].agg(
    lambda x:','.join(x[0] for x in Counter(x).most_common(10))
)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>event</th>
    </tr>
    <tr>
      <th>weekday</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>磨蹭,玩游戏,华尔街日报,写日记,晚饭,午休,午饭,运动,接单工作,量化</td>
    </tr>
    <tr>
      <th>2</th>
      <td>磨蹭,玩游戏,华尔街日报,写日记,晚饭,午饭,午休,运动,量化,接单工作</td>
    </tr>
    <tr>
      <th>3</th>
      <td>磨蹭,玩游戏,华尔街日报,晚饭,午饭,写日记,午休,运动,量化,接单工作</td>
    </tr>
    <tr>
      <th>4</th>
      <td>磨蹭,玩游戏,华尔街日报,晚饭,写日记,午休,午饭,运动,量化,人文书籍</td>
    </tr>
    <tr>
      <th>5</th>
      <td>磨蹭,玩游戏,华尔街日报,写日记,晚饭,午饭,午休,运动,量化,人文课</td>
    </tr>
    <tr>
      <th>6</th>
      <td>磨蹭,玩游戏,华尔街日报,晚饭,午饭,午休,写日记,人文书籍,运动,量化</td>
    </tr>
    <tr>
      <th>7</th>
      <td>磨蹭,玩游戏,华尔街日报,晚饭,写日记,午饭,午休,运动,接单工作,人文书籍</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 各年做的总时间最多的事
df.groupby(['year', 'event'])[['duration']].sum().\
    reset_index().groupby('year')[['event', 'duration']].apply(
        lambda x:x[x['duration'].isin(x['duration'].nlargest(3))].\
            sort_values(by='duration', ascending=False)
    )
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>event</th>
      <th>duration</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">2019</th>
      <th>138</th>
      <td>磨蹭</td>
      <td>20281</td>
    </tr>
    <tr>
      <th>51</th>
      <td>单词</td>
      <td>14006</td>
    </tr>
    <tr>
      <th>133</th>
      <td>玩游戏</td>
      <td>10519</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">2020</th>
      <th>204</th>
      <td>华尔街日报</td>
      <td>53118</td>
    </tr>
    <tr>
      <th>243</th>
      <td>磨蹭</td>
      <td>16673</td>
    </tr>
    <tr>
      <th>239</th>
      <td>玩游戏</td>
      <td>16422</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">2021</th>
      <th>278</th>
      <td>华尔街日报</td>
      <td>52995</td>
    </tr>
    <tr>
      <th>308</th>
      <td>磨蹭</td>
      <td>22089</td>
    </tr>
    <tr>
      <th>316</th>
      <td>量化</td>
      <td>21526</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">2022</th>
      <th>331</th>
      <td>华尔街日报</td>
      <td>61696</td>
    </tr>
    <tr>
      <th>343</th>
      <td>接单工作</td>
      <td>24538</td>
    </tr>
    <tr>
      <th>344</th>
      <td>摄影</td>
      <td>22883</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 各月做的总时间最多的事
df.groupby(['month', 'event'])[['duration']].sum().\
    reset_index().groupby('month')[['event', 'duration']].apply(
        lambda x:x[x['duration'].isin(x['duration'].nlargest(5))].\
            sort_values(by='duration', ascending=False)
    )
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>event</th>
      <th>duration</th>
    </tr>
    <tr>
      <th>month</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">01</th>
      <th>12</th>
      <td>华尔街日报</td>
      <td>15727</td>
    </tr>
    <tr>
      <th>40</th>
      <td>量化</td>
      <td>4321</td>
    </tr>
    <tr>
      <th>19</th>
      <td>接单工作</td>
      <td>3807</td>
    </tr>
    <tr>
      <th>30</th>
      <td>玩游戏</td>
      <td>3641</td>
    </tr>
    <tr>
      <th>10</th>
      <td>午休</td>
      <td>3496</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">02</th>
      <th>58</th>
      <td>华尔街日报</td>
      <td>12469</td>
    </tr>
    <tr>
      <th>70</th>
      <td>接单工作</td>
      <td>4295</td>
    </tr>
    <tr>
      <th>82</th>
      <td>玩游戏</td>
      <td>2976</td>
    </tr>
    <tr>
      <th>91</th>
      <td>量化</td>
      <td>2969</td>
    </tr>
    <tr>
      <th>56</th>
      <td>午休</td>
      <td>2767</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">03</th>
      <th>133</th>
      <td>华尔街日报</td>
      <td>16288</td>
    </tr>
    <tr>
      <th>186</th>
      <td>磨蹭</td>
      <td>5146</td>
    </tr>
    <tr>
      <th>183</th>
      <td>玩游戏</td>
      <td>4722</td>
    </tr>
    <tr>
      <th>117</th>
      <td>人文课</td>
      <td>4387</td>
    </tr>
    <tr>
      <th>163</th>
      <td>接单工作</td>
      <td>4374</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">04</th>
      <th>222</th>
      <td>华尔街日报</td>
      <td>13063</td>
    </tr>
    <tr>
      <th>261</th>
      <td>磨蹭</td>
      <td>5946</td>
    </tr>
    <tr>
      <th>259</th>
      <td>玩游戏</td>
      <td>4769</td>
    </tr>
    <tr>
      <th>244</th>
      <td>接单工作</td>
      <td>4105</td>
    </tr>
    <tr>
      <th>213</th>
      <td>人文课</td>
      <td>3995</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">05</th>
      <th>302</th>
      <td>华尔街日报</td>
      <td>15716</td>
    </tr>
    <tr>
      <th>335</th>
      <td>磨蹭</td>
      <td>5799</td>
    </tr>
    <tr>
      <th>320</th>
      <td>接单工作</td>
      <td>5671</td>
    </tr>
    <tr>
      <th>333</th>
      <td>玩游戏</td>
      <td>5616</td>
    </tr>
    <tr>
      <th>325</th>
      <td>晚饭</td>
      <td>4562</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">06</th>
      <th>370</th>
      <td>华尔街日报</td>
      <td>14038</td>
    </tr>
    <tr>
      <th>404</th>
      <td>磨蹭</td>
      <td>6315</td>
    </tr>
    <tr>
      <th>401</th>
      <td>玩游戏</td>
      <td>4333</td>
    </tr>
    <tr>
      <th>396</th>
      <td>晚饭</td>
      <td>3942</td>
    </tr>
    <tr>
      <th>369</th>
      <td>午饭</td>
      <td>3793</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">07</th>
      <th>441</th>
      <td>华尔街日报</td>
      <td>13752</td>
    </tr>
    <tr>
      <th>479</th>
      <td>磨蹭</td>
      <td>6520</td>
    </tr>
    <tr>
      <th>474</th>
      <td>玩游戏</td>
      <td>5270</td>
    </tr>
    <tr>
      <th>428</th>
      <td>人工智能</td>
      <td>4710</td>
    </tr>
    <tr>
      <th>489</th>
      <td>量化</td>
      <td>4063</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">08</th>
      <th>515</th>
      <td>华尔街日报</td>
      <td>14336</td>
    </tr>
    <tr>
      <th>547</th>
      <td>量化</td>
      <td>6955</td>
    </tr>
    <tr>
      <th>540</th>
      <td>磨蹭</td>
      <td>6614</td>
    </tr>
    <tr>
      <th>537</th>
      <td>玩游戏</td>
      <td>6103</td>
    </tr>
    <tr>
      <th>527</th>
      <td>摄影</td>
      <td>4614</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">09</th>
      <th>565</th>
      <td>华尔街日报</td>
      <td>12460</td>
    </tr>
    <tr>
      <th>583</th>
      <td>量化</td>
      <td>5721</td>
    </tr>
    <tr>
      <th>580</th>
      <td>磨蹭</td>
      <td>5114</td>
    </tr>
    <tr>
      <th>572</th>
      <td>摄影</td>
      <td>5041</td>
    </tr>
    <tr>
      <th>578</th>
      <td>玩游戏</td>
      <td>3202</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">10</th>
      <th>605</th>
      <td>华尔街日报</td>
      <td>12575</td>
    </tr>
    <tr>
      <th>632</th>
      <td>磨蹭</td>
      <td>7651</td>
    </tr>
    <tr>
      <th>617</th>
      <td>摄影</td>
      <td>4929</td>
    </tr>
    <tr>
      <th>629</th>
      <td>玩游戏</td>
      <td>4237</td>
    </tr>
    <tr>
      <th>622</th>
      <td>晚饭</td>
      <td>3774</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">11</th>
      <th>669</th>
      <td>华尔街日报</td>
      <td>15319</td>
    </tr>
    <tr>
      <th>685</th>
      <td>接单工作</td>
      <td>7931</td>
    </tr>
    <tr>
      <th>703</th>
      <td>磨蹭</td>
      <td>7778</td>
    </tr>
    <tr>
      <th>716</th>
      <td>量化</td>
      <td>4179</td>
    </tr>
    <tr>
      <th>668</th>
      <td>午饭</td>
      <td>4009</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">12</th>
      <th>735</th>
      <td>华尔街日报</td>
      <td>17704</td>
    </tr>
    <tr>
      <th>747</th>
      <td>接单工作</td>
      <td>9059</td>
    </tr>
    <tr>
      <th>766</th>
      <td>磨蹭</td>
      <td>7696</td>
    </tr>
    <tr>
      <th>730</th>
      <td>写报告</td>
      <td>5104</td>
    </tr>
    <tr>
      <th>764</th>
      <td>玩游戏</td>
      <td>4700</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 各天做的总时间最多的事
df.groupby(['weekday', 'event'])[['duration']].sum().\
    reset_index().groupby('weekday')[['event', 'duration']].apply(
        lambda x:x[x['duration'].isin(x['duration'].nlargest(5))].\
            sort_values(by='duration', ascending=False)
    )
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>event</th>
      <th>duration</th>
    </tr>
    <tr>
      <th>weekday</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1</th>
      <th>39</th>
      <td>华尔街日报</td>
      <td>25560</td>
    </tr>
    <tr>
      <th>98</th>
      <td>磨蹭</td>
      <td>9669</td>
    </tr>
    <tr>
      <th>68</th>
      <td>接单工作</td>
      <td>9159</td>
    </tr>
    <tr>
      <th>94</th>
      <td>玩游戏</td>
      <td>7408</td>
    </tr>
    <tr>
      <th>36</th>
      <td>午休</td>
      <td>6691</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2</th>
      <th>170</th>
      <td>华尔街日报</td>
      <td>24349</td>
    </tr>
    <tr>
      <th>228</th>
      <td>磨蹭</td>
      <td>10950</td>
    </tr>
    <tr>
      <th>226</th>
      <td>玩游戏</td>
      <td>7563</td>
    </tr>
    <tr>
      <th>202</th>
      <td>接单工作</td>
      <td>7506</td>
    </tr>
    <tr>
      <th>252</th>
      <td>量化</td>
      <td>6697</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">3</th>
      <th>301</th>
      <td>华尔街日报</td>
      <td>27067</td>
    </tr>
    <tr>
      <th>365</th>
      <td>磨蹭</td>
      <td>10520</td>
    </tr>
    <tr>
      <th>363</th>
      <td>玩游戏</td>
      <td>8176</td>
    </tr>
    <tr>
      <th>334</th>
      <td>接单工作</td>
      <td>8075</td>
    </tr>
    <tr>
      <th>386</th>
      <td>量化</td>
      <td>7543</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">4</th>
      <th>438</th>
      <td>华尔街日报</td>
      <td>26339</td>
    </tr>
    <tr>
      <th>507</th>
      <td>磨蹭</td>
      <td>9891</td>
    </tr>
    <tr>
      <th>506</th>
      <td>玩游戏</td>
      <td>8403</td>
    </tr>
    <tr>
      <th>475</th>
      <td>接单工作</td>
      <td>7918</td>
    </tr>
    <tr>
      <th>527</th>
      <td>量化</td>
      <td>6684</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">5</th>
      <th>575</th>
      <td>华尔街日报</td>
      <td>23753</td>
    </tr>
    <tr>
      <th>638</th>
      <td>磨蹭</td>
      <td>9319</td>
    </tr>
    <tr>
      <th>609</th>
      <td>接单工作</td>
      <td>7618</td>
    </tr>
    <tr>
      <th>633</th>
      <td>玩游戏</td>
      <td>7277</td>
    </tr>
    <tr>
      <th>658</th>
      <td>量化</td>
      <td>6304</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">6</th>
      <th>706</th>
      <td>华尔街日报</td>
      <td>23503</td>
    </tr>
    <tr>
      <th>762</th>
      <td>磨蹭</td>
      <td>9983</td>
    </tr>
    <tr>
      <th>758</th>
      <td>玩游戏</td>
      <td>7279</td>
    </tr>
    <tr>
      <th>742</th>
      <td>晚饭</td>
      <td>6592</td>
    </tr>
    <tr>
      <th>731</th>
      <td>接单工作</td>
      <td>6153</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">7</th>
      <th>839</th>
      <td>华尔街日报</td>
      <td>22876</td>
    </tr>
    <tr>
      <th>901</th>
      <td>磨蹭</td>
      <td>9940</td>
    </tr>
    <tr>
      <th>896</th>
      <td>玩游戏</td>
      <td>7261</td>
    </tr>
    <tr>
      <th>871</th>
      <td>接单工作</td>
      <td>6797</td>
    </tr>
    <tr>
      <th>836</th>
      <td>午休</td>
      <td>6025</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 计算各年的余弦相似度
for col in ['year', 'month', 'weekday']:
    part2.plot_sim_heatmap(df, col, part, path)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_87_0.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_87_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_87_2.png)
    


### 2.4.6) 每天做事项先后编号并统计


```python
# 2.4.6) 每天做事项先后编号并统计
part = '2.4.6'
def get_order(alist):
    return range(1, 1 + len(alist))

daily_event_order = df.groupby('date')['event'].agg(get_order)
daily_event_order = pd.concat(
    [daily_event_order.explode().reset_index().rename(columns={'event':'order'}), 
    df['event'].reset_index()], axis=1
)[['date', 'event', 'order']]
daily_event_order['order'] = daily_event_order['order'].astype(int)
daily_event_order
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>event</th>
      <th>order</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-02-27</td>
      <td>托福写作与听力</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-02-27</td>
      <td>python</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-02-27</td>
      <td>快递</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-02-27</td>
      <td>搜索术</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-02-27</td>
      <td>午休</td>
      <td>5</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19592</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>14</td>
    </tr>
    <tr>
      <th>19593</th>
      <td>2022-12-30</td>
      <td>口语</td>
      <td>15</td>
    </tr>
    <tr>
      <th>19594</th>
      <td>2022-12-30</td>
      <td>磨蹭</td>
      <td>16</td>
    </tr>
    <tr>
      <th>19595</th>
      <td>2022-12-30</td>
      <td>找资源</td>
      <td>17</td>
    </tr>
    <tr>
      <th>19596</th>
      <td>2022-12-30</td>
      <td>写日记</td>
      <td>18</td>
    </tr>
  </tbody>
</table>
<p>19597 rows × 3 columns</p>
</div>




```python
# 每个事项平均处于每天的第几件事
event_mean_order = daily_event_order[
    (daily_event_order['date'] < '2023-01-01') & 
    (daily_event_order['date'] >= '2022-01-01')
].groupby('event')['order'].mean()

title = f'{part} 各事项平均顺序的统计柱形图'
event_mean_order.sort_values().plot(
    kind='bar', figsize=(20, 10)
)
plt.title(title, fontsize=20)
plt.xlabel('Event', fontsize=20)
plt.ylabel('Mean Order', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_90_0.png)
    



```python
# 每个次序做得最多的事
order_most_event = daily_event_order[
    (daily_event_order['date'] < '2023-01-01') & 
    (daily_event_order['date'] >= '2022-01-01')
].groupby(['order', 'event'])['date'].agg('count').reset_index()

order_most_event = order_most_event.rename(
    columns={'date': 'count'}
)
```


```python
# 每个顺序做的最多的k件事
k = 1
order_mostk_event = pd.concat(
    [order_most_event[order_most_event['order'] == m].\
    sort_values(by='count', ascending=False)[:k] 
    for m in order_most_event['order'].unique()], axis=0
)
order_mostk_event
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>order</th>
      <th>event</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>华尔街日报</td>
      <td>208</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2</td>
      <td>午饭</td>
      <td>103</td>
    </tr>
    <tr>
      <th>39</th>
      <td>3</td>
      <td>午饭</td>
      <td>115</td>
    </tr>
    <tr>
      <th>59</th>
      <td>4</td>
      <td>午休</td>
      <td>131</td>
    </tr>
    <tr>
      <th>93</th>
      <td>5</td>
      <td>玩游戏</td>
      <td>110</td>
    </tr>
    <tr>
      <th>118</th>
      <td>6</td>
      <td>玩游戏</td>
      <td>105</td>
    </tr>
    <tr>
      <th>143</th>
      <td>7</td>
      <td>摄影</td>
      <td>55</td>
    </tr>
    <tr>
      <th>182</th>
      <td>8</td>
      <td>磨蹭</td>
      <td>62</td>
    </tr>
    <tr>
      <th>219</th>
      <td>9</td>
      <td>运动</td>
      <td>57</td>
    </tr>
    <tr>
      <th>251</th>
      <td>10</td>
      <td>运动</td>
      <td>47</td>
    </tr>
    <tr>
      <th>270</th>
      <td>11</td>
      <td>晚饭</td>
      <td>85</td>
    </tr>
    <tr>
      <th>301</th>
      <td>12</td>
      <td>晚饭</td>
      <td>75</td>
    </tr>
    <tr>
      <th>326</th>
      <td>13</td>
      <td>接单工作</td>
      <td>49</td>
    </tr>
    <tr>
      <th>356</th>
      <td>14</td>
      <td>接单工作</td>
      <td>51</td>
    </tr>
    <tr>
      <th>382</th>
      <td>15</td>
      <td>写日记</td>
      <td>39</td>
    </tr>
    <tr>
      <th>407</th>
      <td>16</td>
      <td>写日记</td>
      <td>66</td>
    </tr>
    <tr>
      <th>431</th>
      <td>17</td>
      <td>写日记</td>
      <td>55</td>
    </tr>
    <tr>
      <th>452</th>
      <td>18</td>
      <td>写日记</td>
      <td>43</td>
    </tr>
    <tr>
      <th>468</th>
      <td>19</td>
      <td>写日记</td>
      <td>23</td>
    </tr>
    <tr>
      <th>475</th>
      <td>20</td>
      <td>写日记</td>
      <td>5</td>
    </tr>
    <tr>
      <th>478</th>
      <td>21</td>
      <td>写日记</td>
      <td>1</td>
    </tr>
    <tr>
      <th>483</th>
      <td>22</td>
      <td>写日记</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>



### 2.4.7) 各事项关于日期的透视表


```python
# 2.4.7) 各事项关于日期的透视表
part = '2.4.7'

# 日度时长总和透视
sum_pivot = part2.get_pivot(df, 'date', 'event', 'duration', 'sum')
sum_pivot
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>event_duration_pivot_sum_AQF</th>
      <th>event_duration_pivot_sum_C++</th>
      <th>event_duration_pivot_sum_GMAT</th>
      <th>event_duration_pivot_sum_GMAT学习</th>
      <th>event_duration_pivot_sum_GMAT直播</th>
      <th>event_duration_pivot_sum_GMAT视频</th>
      <th>event_duration_pivot_sum_GMAT试题</th>
      <th>event_duration_pivot_sum_GMAT长难句</th>
      <th>event_duration_pivot_sum_GRE</th>
      <th>event_duration_pivot_sum_GRE写作</th>
      <th>...</th>
      <th>event_duration_pivot_sum_银行会计</th>
      <th>event_duration_pivot_sum_长难句</th>
      <th>event_duration_pivot_sum_闲聊</th>
      <th>event_duration_pivot_sum_陪诊</th>
      <th>event_duration_pivot_sum_随机微积分</th>
      <th>event_duration_pivot_sum_随机过程</th>
      <th>event_duration_pivot_sum_雷欧奥特曼</th>
      <th>event_duration_pivot_sum_面试</th>
      <th>event_duration_pivot_sum_项目管理</th>
      <th>event_duration_pivot_sum_风险管理</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-02-27</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>40</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-04</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-05</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-06</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-07</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-12-26</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-27</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-28</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-29</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-30</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 271 columns</p>
</div>




```python
# 接单工作每天总时长分析
print(
    'The mean time for 接单工作 in year 2022 every day is', sum_pivot['event_duration_pivot_sum_接单工作'][
                        sum_pivot.index >= '2022-01-01'
].mean()
)

sum_pivot['event_duration_pivot_sum_接单工作'][
    sum_pivot['event_duration_pivot_sum_接单工作'] > 0
]
```

    The mean time for 接单工作 in year 2022 every day is 75.26993865030674
    




    date
    2020-11-15    473
    2020-11-16    354
    2020-11-17     87
    2020-11-18    183
    2020-11-19    187
                 ... 
    2022-12-19     57
    2022-12-22    102
    2022-12-23     81
    2022-12-24    109
    2022-12-25     48
    Name: event_duration_pivot_sum_接单工作, Length: 444, dtype: int64




```python
title = f'{part} 每日接单工作时长折线图'

sum_pivot['event_duration_pivot_sum_接单工作'][
    sum_pivot['event_duration_pivot_sum_接单工作'] > 0
].plot(figsize=(20, 10), title=title)

plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Sum of duration', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_96_0.png)
    



```python
title = f'{part} 每日接单工作时长直方图'

sum_pivot['event_duration_pivot_sum_接单工作'][
    sum_pivot['event_duration_pivot_sum_接单工作'] > 0
].plot(
    kind='hist', figsize=(20, 10), title=title
)

plt.title(title, fontsize=20)
plt.xlabel('Sum of duration', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_97_0.png)
    



```python
# 磨蹭每天总时长分析
print(
    'The mean time for 磨蹭 in year 2022 every day is', sum_pivot['event_duration_pivot_sum_磨蹭'][
                    sum_pivot.index >= '2022-01-01'
].mean()
)

sum_pivot['event_duration_pivot_sum_磨蹭'][
    sum_pivot['event_duration_pivot_sum_磨蹭'] > 0
]
```

    The mean time for 磨蹭 in year 2022 every day is 34.44478527607362
    




    date
    2019-02-27     40
    2019-03-04     30
    2019-03-05    108
    2019-03-06     90
    2019-03-07     60
                 ... 
    2022-12-26     58
    2022-12-27     46
    2022-12-28     36
    2022-12-29     81
    2022-12-30    112
    Name: event_duration_pivot_sum_磨蹭, Length: 1078, dtype: int64




```python
title = f'{part} 每日磨蹭时长折线图'

sum_pivot['event_duration_pivot_sum_磨蹭'][
    sum_pivot['event_duration_pivot_sum_磨蹭'] > 0
].plot(figsize=(20, 10), title=title)


plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Sum of duration', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_99_0.png)
    



```python
title = f'{part} 每日磨蹭时长直方图'

sum_pivot['event_duration_pivot_sum_磨蹭'][
    sum_pivot['event_duration_pivot_sum_磨蹭'] > 0
].plot(
    kind='hist', figsize=(20, 10), title=title
)

plt.title(title, fontsize=20)
plt.xlabel('Count', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_100_0.png)
    



```python
# 次数透视
count_pivot = part2.get_pivot(df, 'date', 'event', 'duration', 'count')
count_pivot
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>event_duration_pivot_count_AQF</th>
      <th>event_duration_pivot_count_C++</th>
      <th>event_duration_pivot_count_GMAT</th>
      <th>event_duration_pivot_count_GMAT学习</th>
      <th>event_duration_pivot_count_GMAT直播</th>
      <th>event_duration_pivot_count_GMAT视频</th>
      <th>event_duration_pivot_count_GMAT试题</th>
      <th>event_duration_pivot_count_GMAT长难句</th>
      <th>event_duration_pivot_count_GRE</th>
      <th>event_duration_pivot_count_GRE写作</th>
      <th>...</th>
      <th>event_duration_pivot_count_银行会计</th>
      <th>event_duration_pivot_count_长难句</th>
      <th>event_duration_pivot_count_闲聊</th>
      <th>event_duration_pivot_count_陪诊</th>
      <th>event_duration_pivot_count_随机微积分</th>
      <th>event_duration_pivot_count_随机过程</th>
      <th>event_duration_pivot_count_雷欧奥特曼</th>
      <th>event_duration_pivot_count_面试</th>
      <th>event_duration_pivot_count_项目管理</th>
      <th>event_duration_pivot_count_风险管理</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-02-27</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-04</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-05</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-06</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2019-03-07</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-12-26</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-27</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-28</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-29</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2022-12-30</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 271 columns</p>
</div>




```python
# 接单工作次数分析
title = f'{part} 每日接单工作次数折线图'

count_pivot['event_duration_pivot_count_接单工作'][
    count_pivot['event_duration_pivot_count_接单工作'] > 0
].plot(figsize=(20, 10), title=title)

plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Count', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_102_0.png)
    



```python
title = f'{part} 每日接单工作次数直方图'

count_pivot['event_duration_pivot_count_接单工作'][
    count_pivot['event_duration_pivot_count_接单工作'] > 0
].plot(kind='hist', figsize=(20, 10), title=title)

plt.title(title, fontsize=20)
plt.xlabel('Count', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_103_0.png)
    



```python
# 磨蹭次数分析
print(
    'The mean count for 磨蹭 in year 2022 every day is', count_pivot['event_duration_pivot_count_磨蹭'][
                    count_pivot.index >= '2022-01-01'
].mean()
)

count_pivot['event_duration_pivot_count_磨蹭'][
    count_pivot['event_duration_pivot_count_磨蹭'] > 0
]
```

    The mean count for 磨蹭 in year 2022 every day is 1.4570552147239264
    




    date
    2019-02-27    1
    2019-03-04    1
    2019-03-05    4
    2019-03-06    2
    2019-03-07    2
                 ..
    2022-12-26    2
    2022-12-27    2
    2022-12-28    1
    2022-12-29    4
    2022-12-30    4
    Name: event_duration_pivot_count_磨蹭, Length: 1078, dtype: int64




```python
title = f'{part} 每日磨蹭次数折线图'

count_pivot['event_duration_pivot_count_磨蹭'][
    count_pivot['event_duration_pivot_count_磨蹭'] > 0
].plot(figsize=(20, 10), title=title)

plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Count', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_105_0.png)
    



```python
title = f'{part} 每日磨蹭次数直方图'

count_pivot['event_duration_pivot_count_磨蹭'][
    count_pivot['event_duration_pivot_count_磨蹭'] > 0
].plot(kind='hist', figsize=(20, 10), title=title)

plt.title(title, fontsize=20)
plt.xlabel('Count', fontsize=20)
plt.ylabel('Frequency', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_106_0.png)
    


### 2.4.8) 每年, 月, 星期的事项关键词词云图


```python
part = '2.4.8'
# 年度关键词词云图
col = 'year'
year_key_words = part2.get_key_words(df, col)
part2.plot_key_word_cloud(year_key_words, col, part, path=path, mask=1)
year_key_words
```

    4it [01:13, 18.26s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019</td>
      <td>[托福写作与听力, python, 快递, 搜索术, 午休, 托福听力, 博弈论, 博弈论,...</td>
      <td>单词 偏微分 GRE填空 课 银行会计 托福听力 练字 AQF 托福口语 GRE阅读 数值分...</td>
      <td>[托福写作与听力, python, 搜索术, 托福听力, 博弈论, 博弈论, 晚饭, 雷欧奥...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>[复变, 玩游戏, 写报告, 算法课程, 午饭, 午休, 西洋画, 单词, 毕业论文, 量化...</td>
      <td>人工智能 随机微积分 泛函 单词 实变 毕业论文 python 人文书籍 金数 算法课程 运...</td>
      <td>[复变, 算法课程, 西洋画, 单词, 毕业论文, 随机过程, 复变, 复变, 算法课程, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2021</td>
      <td>[华尔街日报, 运动, 华尔街日报, 午饭, 人文课, 午休, 磨蹭, 华尔街日报, 玩游戏...</td>
      <td>人文课 运动 机器学习 接单工作 人文书籍 深度学习 做家务 大数据 托福写作 算法课程 数...</td>
      <td>[运动, 人文课, 人文书籍, 算法课程, 运动, 算法课程, 人文课, linux, 运动...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022</td>
      <td>[华尔街日报, 做家务, 量化, 午饭, 人文课, 午休, 量化, 华尔街日报, 运动, 量...</td>
      <td>洗漱 接单工作 运动 python高阶 人文书籍 听力 人文教程 科一 口语 洗碗 人文课 ...</td>
      <td>[做家务, 人文课, 运动, 人文书籍, 运动, 图神经网络, 洗漱, 做家务, 移动端爬虫...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_108_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_108_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_108_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_108_5.png)
    



```python
# 年度关键词词云图
part2.plot_key_word_cloud(year_key_words, col, part, path=path, mask=None)
```

    4it [00:09,  2.36s/it]
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_109_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_109_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_109_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_109_4.png)
    



```python
# 2022年每月关键词
col = 'month'
month_key_words = part2.get_key_words(df[df['year'] == '2022'], col)
part2.plot_key_word_cloud(month_key_words, col, part, path=path)
month_key_words
```

    12it [00:26,  2.24s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01</td>
      <td>[华尔街日报, 做家务, 量化, 午饭, 人文课, 午休, 量化, 华尔街日报, 运动, 量...</td>
      <td>gis 移动端爬虫 洗漱 爬虫进阶 闲聊 数据分析 散步 量化 人文课 图神经网络 购物 爬...</td>
      <td>[量化, 人文课, 量化, 量化, 量化, 量化, 图神经网络, 洗漱, 量化, 移动端爬虫...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02</td>
      <td>[接单工作, 午饭, 接单工作, 午休, 华尔街日报, 运动, 摄影, 玩游戏, 华尔街日报...</td>
      <td>洗漱 咨询驾校 散步 量化 数据分析 闲聊 看奥运 gis 科一 人文课</td>
      <td>[散步, 看奥运, 量化, 量化, 洗漱, 量化, 量化, 散步, 洗漱, 量化, 散步, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>03</td>
      <td>[华尔街日报, 午饭, 人文课, 午休, 玩游戏, 人文书籍, 运动, 接单工作, 玩游戏,...</td>
      <td>科一 洗漱 科二 人文课 图神经网络 人文教程 购物 爬虫 量化 快递</td>
      <td>[人文课, 科一, 科一, 人文课, 科一, 洗漱, 科一, 科一, 科一, 科一, 人文课...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04</td>
      <td>[华尔街日报, 磨蹭, 运动, 晚饭, 人文课, 玩游戏, 接单工作, 洗漱, 写日记, 华...</td>
      <td>科四 洗漱 科三 赶车 深度学习 人文课 图神经网络 爬虫 散步 快递</td>
      <td>[人文课, 洗漱, 科四, 人文课, 洗漱, 科四, 科四, 科四, 人文课, 洗漱, 人文...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>05</td>
      <td>[华尔街日报, 接单工作, 晚饭, 散步, 接单工作, 写日记, 华尔街日报, 午饭, 磨蹭...</td>
      <td>python高阶 人文教程 深度学习 人文课 洗漱 plotly数据可视化 外出游玩 理发 ...</td>
      <td>[散步, 外出游玩, 深度学习, 散步, 深度学习, 人文课, 洗漱, 人文课, 深度学习,...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>06</td>
      <td>[华尔街日报, 磨蹭, 午饭, 人文课, 午休, 华尔街日报, 玩游戏, 人文书籍, 人文教...</td>
      <td>python高阶 人文教程 地理 写报告 人文课 做手工 改密码 购物 快递</td>
      <td>[人文课, 人文教程, python高阶, 人文课, 人文教程, python高阶, 地理,...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>07</td>
      <td>[华尔街日报, 摄影, 午饭, 午休, 摄影, 磨蹭, 人文教程, 磨蹭, 人文书籍, 接单...</td>
      <td>强化学习 python高阶 数据竞赛 做讲义 输液 人文教程 量化 数据挖掘 人文课 地理 ...</td>
      <td>[人文教程, 人文课, python高阶, python高阶, 人文教程, python高阶...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>08</td>
      <td>[华尔街日报, 快递, 午饭, 华尔街日报, 午休, 玩游戏, 量化, 磨蹭, 量化, 人文...</td>
      <td>C++ 听力 量化 爬虫进阶 数据竞赛 申请 散步 爬虫 快递</td>
      <td>[快递, 量化, 量化, 数据竞赛, 量化, 量化, 数据竞赛, 量化, C++, 量化, ...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>09</td>
      <td>[量化, 华尔街日报, 午饭, 午休, 玩游戏, 量化, 摄影, 磨蹭, 运动, 听力, 磨...</td>
      <td>口语 量化 核酸 听力 看发布会 爬虫 快递 人文课</td>
      <td>[量化, 量化, 听力, 量化, 量化, 量化, 听力, 人文课, 快递, 量化, 量化, ...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>[量化, 华尔街日报, 午饭, 华尔街日报, 午休, 玩游戏, 人文书籍, 摄影, 磨蹭, ...</td>
      <td>口语 听力 量化 数据分析 核酸 散步 数据竞赛 爬虫 人文课 快递</td>
      <td>[量化, 爬虫, 口语, 量化, 量化, 爬虫, 数据分析, 数据分析, 散步, 数据分析,...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>[量化, 华尔街日报, 磨蹭, 午饭, 午休, 玩游戏, 摄影, 做家务, 人文书籍, 听力...</td>
      <td>洗碗 听力 核酸 写报告 煮饭 口语 量化 购物 人文教程 安装软件 数据竞赛 咨询 爬虫 ...</td>
      <td>[量化, 听力, 爬虫, 核酸, 量化, 听力, 口语, 量化, 听力, 口语, 量化, 听...</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>[华尔街日报, 午饭, 午休, 玩游戏, 写报告, 明朝, 运动, 听力, 玩游戏, 接单工...</td>
      <td>听力 写报告 口语 洗碗 找资源 人文教程 煮饭 量化 明朝 购物 洗漱 快递</td>
      <td>[写报告, 明朝, 听力, 洗碗, 量化, 听力, 洗碗, 口语, 量化, 听力, 煮饭, ...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_110_13.png)
    



```python
# 2022年 每day_period关键词
col = 'day_period'
day_period_key_words = part2.get_key_words(df[df['year'] == '2022'], col)
part2.plot_key_word_cloud(day_period_key_words, col, part, path=path)
day_period_key_words
```

    4it [00:08,  2.15s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>day_period</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>afternoon</td>
      <td>[人文课, 午休, 量化, 午休, 量化, 玩游戏, 人文书籍, 摄影, 量化, 磨蹭, 运...</td>
      <td>午休 人文书籍 晚饭 听力 人文教程 科四 人文课 gis C++ 口语 数据分析 散步 科...</td>
      <td>[人文课, 午休, 午休, 人文书籍, 午休, 移动端爬虫, 人文课, 午休, 人文书籍, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>evening</td>
      <td>[晚饭, 磨蹭, 图神经网络, 磨蹭, 洗漱, 写日记, 晚饭, 人文课, 洗漱, 移动端爬...</td>
      <td>写日记 洗漱 晚饭 口语 人文课 听力 散步 人文书籍 人文教程 数据竞赛 gis 洗碗 爬...</td>
      <td>[晚饭, 图神经网络, 洗漱, 写日记, 晚饭, 人文课, 洗漱, 移动端爬虫, 写日记, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>morning</td>
      <td>[华尔街日报, 做家务, 华尔街日报, 运动, 华尔街日报, 做家务, 华尔街日报, 运动,...</td>
      <td>赶车 午饭 快递 申请 人文书籍</td>
      <td>[快递, 午饭, 午饭, 赶车, 赶车, 赶车, 快递, 人文书籍, 午饭, 申请, 午饭,...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>noon</td>
      <td>[量化, 午饭, 量化, 午饭, 华尔街日报, 午饭, 量化, 午饭, 午饭, 人文课, 华...</td>
      <td>午饭 人文课 午休 科一 洗碗 地理 晚饭 煮饭 强化学习 科三 购物</td>
      <td>[午饭, 午饭, 午饭, 午饭, 午饭, 人文课, 午饭, 午饭, 午饭, 午饭, 午饭, ...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_111_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_111_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_111_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_111_5.png)
    



```python
# 2022年 duration_attr关键词
col = 'duration_attr'
duration_attr_key_words = part2.get_key_words(df[df['year'] == '2022'], col)
part2.plot_key_word_cloud(duration_attr_key_words, col, part, path=path)
duration_attr_key_words
```

    3it [00:06,  2.27s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>duration_attr</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>long</td>
      <td>[华尔街日报, 华尔街日报, 摄影, 图神经网络, 洗漱, 华尔街日报, 移动端爬虫, 移动...</td>
      <td>散步 输液 C++ 强化学习 找资源 科三 外出游玩 改密码 数据挖掘 看奥运 申请 赶车</td>
      <td>[散步, 散步, 散步, 散步, 散步, 散步, 散步, 散步, 散步, 散步, 看奥运, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>middle</td>
      <td>[做家务, 午饭, 午休, 量化, 运动, 午休, 量化, 玩游戏, 量化, 晚饭, 磨蹭,...</td>
      <td>购物 散步 核酸 洗碗 咨询 plotly数据可视化 理发 看发布会 C++ 赶车 煮饭</td>
      <td>[购物, 散步, 散步, 散步, 散步, 散步, 购物, 购物, 赶车, 赶车, 散步, 理...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>short</td>
      <td>[量化, 人文课, 量化, 午饭, 人文书籍, 磨蹭, 运动, 磨蹭, 写日记, 做家务, ...</td>
      <td>洗碗 核酸 煮饭 强化学习 购物 做手工 安装软件 明朝 找资源 申请 科三</td>
      <td>[购物, 科三, 做手工, 购物, 强化学习, 强化学习, 强化学习, 强化学习, 申请, ...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_112_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_112_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_112_4.png)
    



```python
# 2022年 attr关键词
col = 'attr'
attr_key_words = part2.get_key_words(df[df['year'] == '2022'], col, threshold=.8)
part2.plot_key_word_cloud(attr_key_words, col, part, path=path)
attr_key_words
```

    3it [00:06,  2.09s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>attr</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>必要时间</td>
      <td>[做家务, 午饭, 午休, 运动, 午饭, 午休, 运动, 晚饭, 洗漱, 写日记, 做家务...</td>
      <td>接单工作 晚饭 写日记 午休 午饭 运动</td>
      <td>[午饭, 午休, 运动, 午饭, 午休, 运动, 晚饭, 写日记, 午饭, 午休, 运动, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>有效时间</td>
      <td>[华尔街日报, 量化, 人文课, 量化, 华尔街日报, 量化, 量化, 人文书籍, 摄影, ...</td>
      <td>华尔街日报 摄影 量化 人文书籍 人文课 听力</td>
      <td>[华尔街日报, 量化, 人文课, 量化, 华尔街日报, 量化, 量化, 人文书籍, 摄影, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>浪费时间</td>
      <td>[玩游戏, 磨蹭, 磨蹭, 磨蹭, 磨蹭, 玩游戏, 玩游戏, 磨蹭, 玩游戏, 磨蹭, 玩...</td>
      <td>玩游戏 磨蹭</td>
      <td>[玩游戏, 磨蹭, 磨蹭, 磨蹭, 磨蹭, 玩游戏, 玩游戏, 磨蹭, 玩游戏, 磨蹭, 玩...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_113_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_113_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_113_4.png)
    



```python
# 2022年 weekday关键词
col = 'weekday'
weekday_key_words = part2.get_key_words(df[df['year'] == '2022'], col, threshold=1)
part2.plot_key_word_cloud(weekday_key_words, col, part, path=path)
weekday_key_words
```

    7it [00:16,  2.37s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>weekday</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>[华尔街日报, 运动, 量化, 午饭, 午休, 量化, 玩游戏, 人文书籍, 摄影, 量化,...</td>
      <td>外出游玩 数据挖掘 图神经网络 咨询 快递 科一 咨询驾校 深度学习 输液 数据竞赛 煮饭 C++</td>
      <td>[图神经网络, 咨询驾校, 科一, 科一, 科一, 科一, 科一, 图神经网络, 图神经网络...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>[华尔街日报, 做家务, 华尔街日报, 午饭, 午休, 量化, 磨蹭, 移动端爬虫, 玩游戏...</td>
      <td>闲聊 科一 移动端爬虫 图神经网络 深度学习 地理 快递 煮饭 爬虫进阶 C++ 数据竞赛 ...</td>
      <td>[移动端爬虫, 移动端爬虫, 爬虫进阶, 闲聊, 闲聊, 数据分析, 数据分析, 闲聊, 闲...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>[华尔街日报, 运动, 量化, 午饭, 人文课, 午休, 量化, 磨蹭, 人文书籍, 移动端...</td>
      <td>科一 爬虫进阶 深度学习 科二 数据竞赛 做讲义 找资源 煮饭 移动端爬虫 强化学习 地理 ...</td>
      <td>[移动端爬虫, 爬虫, 移动端爬虫, 爬虫进阶, 爬虫进阶, 爬虫进阶, 数据分析, 科一,...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>[华尔街日报, 运动, 午饭, 人文课, 午休, 量化, 玩游戏, 人文书籍, 移动端爬虫,...</td>
      <td>明朝 地理 移动端爬虫 强化学习 做讲义 找资源 快递 数据分析 科一 爬虫进阶 C++ 数据竞赛</td>
      <td>[移动端爬虫, 移动端爬虫, 移动端爬虫, 快递, 数据分析, 数据分析, 爬虫进阶, 数据...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>[华尔街日报, 做家务, 华尔街日报, 午饭, 午休, 量化, 玩游戏, 人文书籍, 数据分...</td>
      <td>plotly数据可视化 安装软件 看发布会 看奥运 做讲义 找资源 闲聊 图神经网络 深度学...</td>
      <td>[数据分析, 图神经网络, 闲聊, 爬虫进阶, 闲聊, 闲聊, 看奥运, 咨询驾校, 科一,...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>[华尔街日报, 做家务, 量化, 午饭, 人文课, 午休, 量化, 华尔街日报, 运动, 华...</td>
      <td>理发 煮饭 科三 赶车 爬虫进阶 咨询驾校 图神经网络 输液 闲聊 快递 科一 移动端爬虫 ...</td>
      <td>[爬虫进阶, 数据分析, 移动端爬虫, 爬虫进阶, 闲聊, 数据分析, 咨询驾校, 科一, ...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>[华尔街日报, 运动, 华尔街日报, 午饭, 午休, 量化, 玩游戏, 人文书籍, 摄影, ...</td>
      <td>申请 科二 做手工 改密码 科三 咨询 煮饭 赶车 数据分析 咨询驾校 输液 闲聊 移动端爬...</td>
      <td>[移动端爬虫, 数据分析, 闲聊, 咨询驾校, 科二, 科二, 赶车, 科三, 科三, 爬虫...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_114_8.png)
    



```python
# 2022年 mid_hour关键词
col = 'mid_hour'
midhour_key_words = part2.get_key_words(df[df['year'] == '2022'], col, threshold=1)
part2.plot_key_word_cloud(midhour_key_words, col, part, path=path)
midhour_key_words
```

    16it [00:33,  2.07s/it]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mid_hour</th>
      <th>event</th>
      <th>key_words</th>
      <th>plot_words</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>[华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街...</td>
      <td>华尔街日报 申请 输液 午饭 磨蹭 玩游戏 核酸 摄影 接单工作</td>
      <td>[华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>[做家务, 运动, 做家务, 运动, 运动, 做家务, 运动, 运动, 做家务, 运动, 爬...</td>
      <td>运动 华尔街日报 赶车 午饭 做家务 快递 磨蹭 闲聊 爬虫 python高阶 人文书籍 量...</td>
      <td>[做家务, 运动, 做家务, 运动, 运动, 做家务, 运动, 运动, 做家务, 运动, 爬...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>[量化, 午饭, 量化, 午饭, 华尔街日报, 午饭, 量化, 午饭, 午饭, 人文课, 华...</td>
      <td>午饭 人文课 华尔街日报 量化 洗碗 磨蹭 科一 午休 煮饭 晚饭 摄影 玩游戏 科三 写报...</td>
      <td>[量化, 午饭, 量化, 午饭, 华尔街日报, 午饭, 量化, 午饭, 午饭, 人文课, 华...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>[人文课, 午休, 午休, 午休, 人文课, 午休, 午休, 午休, 午休, 午休, 午休,...</td>
      <td>午休 人文课 玩游戏 午饭 洗碗 磨蹭 量化 输液 华尔街日报 听力 核酸 接单工作 摄影</td>
      <td>[人文课, 午休, 午休, 午休, 人文课, 午休, 午休, 午休, 午休, 午休, 午休,...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>[量化, 量化, 量化, 量化, 量化, 玩游戏, 量化, 玩游戏, 量化, 玩游戏, 量化...</td>
      <td>玩游戏 人文书籍 量化 人文教程 C++ 摄影 华尔街日报 午休 咨询 磨蹭 找资源 写报告...</td>
      <td>[量化, 量化, 量化, 量化, 量化, 玩游戏, 量化, 玩游戏, 量化, 玩游戏, 量化...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>15</td>
      <td>[玩游戏, 人文书籍, 磨蹭, 磨蹭, 人文书籍, 人文书籍, 人文书籍, 人文书籍, 人文...</td>
      <td>运动 人文教程 磨蹭 人文书籍 C++ 华尔街日报 玩游戏 摄影 写报告 科三 找资源 咨询...</td>
      <td>[玩游戏, 人文书籍, 磨蹭, 磨蹭, 人文书籍, 人文书籍, 人文书籍, 人文书籍, 人文...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>16</td>
      <td>[摄影, 移动端爬虫, 数据分析, 玩游戏, 爬虫进阶, 摄影, gis, 摄影, gis,...</td>
      <td>运动 科四 人文书籍 磨蹭 玩游戏 科一 摄影 python高阶 C++ gis 量化 听力...</td>
      <td>[摄影, 移动端爬虫, 数据分析, 玩游戏, 爬虫进阶, 摄影, gis, 摄影, gis,...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>17</td>
      <td>[量化, 玩游戏, 移动端爬虫, 移动端爬虫, 摄影, 磨蹭, 玩游戏, gis, 玩游戏,...</td>
      <td>运动 听力 人文书籍 晚饭 磨蹭 玩游戏 科一 做家务 数据分析 煮饭 深度学习 gis 科...</td>
      <td>[量化, 玩游戏, 移动端爬虫, 移动端爬虫, 摄影, 磨蹭, 玩游戏, gis, 玩游戏,...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>18</td>
      <td>[磨蹭, 运动, 运动, 晚饭, 运动, 图神经网络, 玩游戏, 运动, 磨蹭, 运动, 运...</td>
      <td>晚饭 人文书籍 散步 听力 运动 口语 做家务 磨蹭 科一 玩游戏 数据分析 接单工作 煮饭...</td>
      <td>[磨蹭, 运动, 运动, 晚饭, 运动, 图神经网络, 玩游戏, 运动, 磨蹭, 运动, 运...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>19</td>
      <td>[晚饭, 磨蹭, 晚饭, 人文课, 洗漱, 人文课, 晚饭, 人文课, 晚饭, 人文课, 玩...</td>
      <td>晚饭 散步 人文课 人文书籍 玩游戏 洗碗 听力 磨蹭 快递 煮饭 洗漱 做讲义 购物 理发...</td>
      <td>[晚饭, 磨蹭, 晚饭, 人文课, 洗漱, 人文课, 晚饭, 人文课, 晚饭, 人文课, 玩...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>20</td>
      <td>[图神经网络, 洗漱, 玩游戏, 移动端爬虫, 玩游戏, 洗漱, 洗漱, gis, 洗漱, ...</td>
      <td>口语 洗漱 洗碗 玩游戏 接单工作 听力 python高阶 数据竞赛 人文教程 快递 爬虫进...</td>
      <td>[图神经网络, 洗漱, 玩游戏, 移动端爬虫, 玩游戏, 洗漱, 洗漱, gis, 洗漱, ...</td>
    </tr>
    <tr>
      <th>11</th>
      <td>21</td>
      <td>[磨蹭, 移动端爬虫, 量化, gis, 移动端爬虫, 闲聊, gis, 数据分析, 接单工...</td>
      <td>写日记 洗漱 口语 python高阶 磨蹭 量化 玩游戏 数据竞赛 人文教程 移动端爬虫 接...</td>
      <td>[磨蹭, 移动端爬虫, 量化, gis, 移动端爬虫, 闲聊, gis, 数据分析, 接单工...</td>
    </tr>
    <tr>
      <th>12</th>
      <td>22</td>
      <td>[洗漱, 写日记, 玩游戏, 写日记, 磨蹭, 写日记, 洗漱, 写日记, 写日记, 洗漱,...</td>
      <td>写日记 洗漱 科二 磨蹭 安装软件 申请 gis 爬虫进阶 咨询驾校 科一 玩游戏 地理 图...</td>
      <td>[洗漱, 写日记, 玩游戏, 写日记, 磨蹭, 写日记, 洗漱, 写日记, 写日记, 洗漱,...</td>
    </tr>
    <tr>
      <th>13</th>
      <td>23</td>
      <td>[写日记, 写日记, gis, 购物, 写日记, 写日记, 接单工作, 写日记, 接单工作,...</td>
      <td>写日记 购物 gis 接单工作</td>
      <td>[写日记, 写日记, gis, 购物, 写日记, 写日记, 接单工作, 写日记, 接单工作,...</td>
    </tr>
    <tr>
      <th>14</th>
      <td>8</td>
      <td>[磨蹭, 华尔街日报, 磨蹭, 磨蹭, 摄影, 写报告, 摄影, 磨蹭, 华尔街日报, 量化...</td>
      <td>量化 华尔街日报 磨蹭 核酸 写报告 接单工作 摄影</td>
      <td>[磨蹭, 华尔街日报, 磨蹭, 磨蹭, 摄影, 写报告, 摄影, 磨蹭, 华尔街日报, 量化...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>9</td>
      <td>[接单工作, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 赶车, ...</td>
      <td>华尔街日报 赶车 核酸 量化 写报告 人文书籍 接单工作 摄影</td>
      <td>[接单工作, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 华尔街日报, 赶车, ...</td>
    </tr>
  </tbody>
</table>
</div>




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_115_17.png)
    


### 2.4.9) 每天事项的对应先后以及月度关联的网络图


```python
# 2.4.8) 每天事项的对应先后以及月度关联的网络图
part = '2.4.9'
```


```python
part2.month2event(df, 2019, event2attr, part, path)
```

    Graph with 191 nodes and 382 edges
    closeness_centrality: {03:0.4572523175320546,04:0.2692777794256113,07:0.1394011177962664,12:0.13277097048546493,11:0.12883784994447534,10:0.10803750916166831,05:0.09977897603185464,06:0.09923630697863964,08:0.06414521384918247,午休:0.04648614079325427,晚饭:0.04648614079325427,磨蹭:0.04648614079325427,午饭:0.03919373630488256,单词:0.03919373630488256,玩游戏:0.03919373630488256,02:0.03598766194153918,课:0.025507645065616487,托福写作:0.024362091998945182,托福听力:0.024362091998945182,python:0.02126713360431389,偏微分:0.020026401040076688,写日记:0.01980998609452924,改代码:0.01975553467497096,托福口语:0.01906265828995403,AQF:0.017690435733647817,量化:0.016576121288826455,快递:0.01281538101362764,托福阅读:0.011840349889026103,答疑:0.011201296343490938,写报告:0.010217375792229116,有限元:0.009321979391153366,R:0.008164247301759752,蹲坑:0.008089495525327032,银行会计:0.008089495525327032,K歌:0.007356176079295712,考试:0.005472248924211232,理发:0.005453541273174771,口语视频:0.005191397387444578,数值分析:0.003720717365208246,练字:0.00330731229167906,抢课:0.0032035590377984704,GMAT:0.0026681048478284903,万矿量化:0.0026681048478284903,中央银行学:0.0026681048478284903,写作视频:0.0026681048478284903,听力视频:0.0026681048478284903,晚饭归来:0.0026681048478284903,背单词:0.0026681048478284903,拿计算器:0.0026092820836242647,面试:0.0022317815556604638,gis:0.0022047880021490176,GRE阅读:0.0021339783876838307,睡觉:0.0018717880947989058,GRE:0.0018627976687680566,实习工作:0.0018439615705372328,搜索术:0.0015811135439913733,打印:0.0014855108260084717,简历:0.0014824578380383297,matlab:0.0013955278211271666,讲座:0.0013018506957270513,C++:0.0012423285255868252,leetcode:0.0012423285255868252,华尔街日报:0.0012423285255868252,博弈论:0.0011986661442993415,GRE填空:0.0009813980670580493,搬家:0.0007181770126040304,随机过程:0.0004354817415765359,项目管理:0.0004354817415765359,圣经:0.0004141676460435833,kaggle:0.0003926791379667068,衍生工具:0.0003926791379667068,留学咨询:0.0003452549879701593,GRE写作:0.0002766374796881582,GRE数学:0.0002766374796881582,量化课程:0.0002766374796881582,量化项目:0.0002766374796881582,金融法:0.00023040102437321737,复习偏微分:0.0,托福写作与听力:0.0,雷欧奥特曼:0.0,GMAT学习:0.0,GMAT直播:0.0,GMAT视频:0.0,GMAT试题:0.0,GMAT长难句:0.0,PPT:0.0,gmat:0.0,python尝试:0.0,中央银行:0.0,交材料:0.0,公开课:0.0,写作:0.0,写作和听力:0.0,写作课:0.0,午饭走路:0.0,单词与精听:0.0,口语:0.0,听力:0.0,听力写作:0.0,复习:0.0,大决战:0.0,成绩:0.0,手机:0.0,打字:0.0,托福公开课:0.0,托福听力与口语:0.0,托福听力真题:0.0,托福真题:0.0,托福精听:0.0,托福课:0.0,排练:0.0,排练ppt:0.0,排练pr:0.0,改作文:0.0,林俊杰:0.0,柯南:0.0,炼句:0.0,独立写作:0.0,看论文:0.0,编程作业:0.0,逐鹿九州:0.0,重师游玩:0.0,长难句:0.0,PDE:0.0,剪辑视频:0.0,听讲座:0.0,填信息:0.0,外出:0.0,实习资料:0.0,审核视频:0.0,尝试耳机:0.0,开幕式:0.0,托福模考:0.0,找地:0.0,找实习:0.0,拍视频:0.0,摄影:0.0,洗头:0.0,等候:0.0,经验交流会:0.0,编程:0.0,罗布剧场版:0.0,课与单词:0.0,风险管理:0.0,GRE长难句:0.0,买药:0.0,作图:0.0,做图:0.0,整理资料:0.0,查文献:0.0,读论文:0.0,咨询:0.0,商业伦理:0.0,开会:0.0,托福:0.0,装软件:0.0,论文:0.0,午饭.:0.0,开户:0.0,打印成绩单:0.0,托福报名:0.0,拿成绩单:0.0,期权定价:0.0,订酒店:0.0,量化作业:0.0,可视化:0.0,填表:0.0,建模:0.0,hackerrank:0.0,体侧:0.0,改CV:0.0,散步:0.0,聚餐:0.0,转账:0.0,vn.py:0.0,youtube:0.0,借书:0.0,希腊神话:0.0,推荐信:0.0,数据分析:0.0,文书修改:0.0,视频内容:0.0,随机微积分:0.0,复变:0.0,文书:0.0,毕业论文:0.0,算法课程:0.0,考试报名:0.0,西洋画:0.0,计量:0.0,选课指导:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_118_1.png)
    



```python
part2.month2event(df, 2020, event2attr, part, path)
```

    Graph with 92 nodes and 296 edges
    closeness_centrality: {01:0.2029823692109427,05:0.15495926498066973,06:0.15399296612814442,11:0.14453107382605673,08:0.12512875429519477,10:0.11779572420521407,07:0.10613535679996633,09:0.08100070691810421,02:0.07924873197891706,12:0.0727719148690161,03:0.05127174390592551,写日记:0.039619974551610544,午休:0.039619974551610544,午饭:0.039619974551610544,华尔街日报:0.039619974551610544,晚饭:0.039619974551610544,玩游戏:0.039619974551610544,磨蹭:0.039619974551610544,算法课程:0.039619974551610544,python:0.03399501175854304,单词:0.03126391360688127,04:0.029595312295767895,人文书籍:0.026456827045210882,量化:0.024778153344420014,人文课:0.017290518015537177,随机微积分:0.014712368157577487,答疑:0.014376262105025567,人工智能:0.014195720900242813,快递:0.011022440659818344,修图:0.007982155947349457,实变:0.007465874636167103,毕业论文:0.007465874636167103,运动:0.006317643413172771,散步:0.00556580994750997,写报告:0.005098831407517786,做家务:0.00430100791989382,泛函:0.003182536572888448,写推文:0.0020231750885077384,C++:0.0016561440193894428,开会:0.0014216936216715616,摄影:0.0009631726138505637,理发:0.0007376887399498576,可视化:0.0007125234637785702,讲座:0.0006592454543243918,简历:0.0005261570227648415,金数:0.0004768136204190192,金融人脉:0.0004768136204190192,准备材料:0.00047346697483546324,linux:0.0003538497665929014,接单工作:0.0003538497665929014,安装软件:0.0002844833049589899,面试:0.00026885964301785693,测度论:3.9680650483280006e-05,买东西:0.0,复变:0.0,干洗:0.0,算分:0.0,西洋画:0.0,走亲:0.0,陪诊:0.0,随机过程:0.0,回家:0.0,抢课:0.0,做图:0.0,交材料:0.0,听讲座:0.0,导员谈话:0.0,开证明:0.0,改代码:0.0,人文教程:0.0,填表:0.0,导师谈话:0.0,打印:0.0,论文:0.0,整理笔记:0.0,看工作:0.0,写计划:0.0,数据库:0.0,更新设备:0.0,洗衣服:0.0,修复电脑:0.0,找工作:0.0,制作视频:0.0,制订计划:0.0,游玩:0.0,演唱会:0.0,修U盘:0.0,搜集资源:0.0,监工:0.0,缴费:0.0,数据竞赛:0.0,爬虫:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_119_1.png)
    



```python
part2.month2event(df, 2021, event2attr, part, path)
```

    Graph with 68 nodes and 261 edges
    closeness_centrality: {11:0.1816540675332552,02:0.18040893281131606,10:0.16592556781722115,03:0.10504888626796965,07:0.09687061418463837,01:0.08603545328246136,06:0.08397692659436322,08:0.07377459850838426,12:0.06576398184713529,05:0.05471373646424981,09:0.033937891705670895,人文书籍:0.03138090273110895,人文课:0.03138090273110895,写日记:0.03138090273110895,午休:0.03138090273110895,午饭:0.03138090273110895,华尔街日报:0.03138090273110895,接单工作:0.03138090273110895,晚饭:0.03138090273110895,玩游戏:0.03138090273110895,磨蹭:0.03138090273110895,运动:0.03138090273110895,量化:0.03138090273110895,爬虫:0.022602634611299147,04:0.02204764239536538,做家务:0.021334093680330027,摄影:0.021334093680330027,数据分析:0.01399519641078937,散步:0.00938564268781081,gis:0.0029451838113563333,快递:0.0021590062725934775,深度学习:0.0021448596425087054,算法课程:0.0019485839751549072,写报告:0.0017511220137640376,答疑:0.0015645502266457378,机器学习:0.001196266994079652,写推文:0.0006918798931057058,linux:0.000674872753401214,安装软件:0.0006301919575829361,制定计划:0.00044854429427075885,托福写作:0.0004228154134067608,托福口语:0.0004228154134067608,托福听力:0.0004228154134067608,托福阅读:0.0004228154134067608,线上研讨:0.0004228154134067608,改代码:0.0,检查设备:0.0,修图:0.0,整理笔记:0.0,正则:0.0,走亲:0.0,逛街:0.0,写计划:0.0,清理内存:0.0,换锁:0.0,下载软件:0.0,化妆:0.0,拍视频:0.0,接种疫苗:0.0,找资源:0.0,配置环境:0.0,买东西:0.0,大数据:0.0,监工:0.0,做视频:0.0,报名考试:0.0,演唱会:0.0,外出游玩:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_120_1.png)
    



```python
part2.month2event(df, 2022, event2attr, part, path)
```

    Graph with 71 nodes and 277 edges
    closeness_centrality: {07:0.17096154721015738,05:0.13397666314343495,11:0.11613108816538072,04:0.11310016833427795,02:0.10741722785704759,01:0.10349888748081973,12:0.09490074201593167,06:0.08973588847282542,08:0.06923023749832655,03:0.06501819110783796,09:0.05083068475901244,10:0.04172041308538246,人文书籍:0.02992030722320863,做家务:0.02992030722320863,写日记:0.02992030722320863,午休:0.02992030722320863,午饭:0.02992030722320863,华尔街日报:0.02992030722320863,接单工作:0.02992030722320863,摄影:0.02992030722320863,晚饭:0.02992030722320863,玩游戏:0.02992030722320863,磨蹭:0.02992030722320863,运动:0.02992030722320863,快递:0.02371510828654817,人文课:0.021355199388730352,量化:0.01900552788097062,爬虫:0.009833906695445965,人文教程:0.007466107076061923,购物:0.007135731680887533,洗漱:0.006959790002339045,散步:0.006096261844638235,听力:0.002199568356293475,数据竞赛:0.002185962745210238,python高阶:0.0019845593552949383,口语:0.0010752450991759314,写报告:0.001040829165046458,图神经网络:0.0010056697534510217,数据分析:0.0007157993578499977,咨询:0.0006136747448920149,深度学习:0.0005219982433728908,申请:0.0005124213433774797,找资源:0.0004935436936802538,地理:0.0004921281390267599,核酸:0.0004283506985416356,科一:0.0003033612661329248,爬虫进阶:0.000297066654624894,gis:0.0002525731745661476,闲聊:0.0002525731745661476,洗碗:0.0001878371706756207,煮饭:0.0001878371706756207,移动端爬虫:0.0,咨询驾校:0.0,看奥运:0.0,科二:0.0,科三:0.0,科四:0.0,赶车:0.0,plotly数据可视化:0.0,外出游玩:0.0,理发:0.0,做手工:0.0,改密码:0.0,做讲义:0.0,强化学习:0.0,数据挖掘:0.0,输液:0.0,C++:0.0,看发布会:0.0,安装软件:0.0,明朝:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_121_1.png)
    



```python
part2.PostEvent(df, 2019, event2attr, part, path)
```

    DiGraph with 172 nodes and 1122 edges
    closeness_centrality: {磨蹭:0.2689928545282383,晚饭:0.15082003635428495,午饭:0.130910124141229,玩游戏:0.12184725836014403,午休:0.08737071349783798,偏微分:0.06164382960553884,托福听力:0.05051191444021736,单词:0.04756417246778019,托福口语:0.042428777894809894,托福写作:0.041728131830994754,写日记:0.035104497186089434,K歌:0.03250773993808049,课:0.023979542184815957,练字:0.02341739809425364,AQF:0.023332059728657244,有限元:0.02108823017594834,华尔街日报:0.020905049231176566,银行会计:0.020548254696734342,答疑:0.01932385022494907,蹲坑:0.018253193576662937,GRE填空:0.01626022369540655,R:0.014259726568760001,GMAT长难句:0.013540354314929438,听力视频:0.012374194984748682,林俊杰:0.011296215852155874,PPT:0.011248710010319917,托福阅读:0.011142591401048313,午饭走路:0.011042311661506708,重师游玩:0.010835913312693497,数值分析:0.01047497020896129,python:0.009826393104955446,炼句:0.008255933952528379,写作和听力:0.008255933952528379,改代码:0.008152500545125802,中央银行学:0.00808071500583512,GRE阅读:0.007855948686380586,金融法:0.0077608088157148595,希腊神话:0.007743503707736928,博弈论:0.0069639316204959684,实习工作:0.0062570543234517,大决战:0.00614816314248276,西洋画:0.006019752074599924,背单词:0.005741676124027088,项目管理:0.005713033926064328,GMAT试题:0.005710354317165462,matlab:0.0056897144822841425,hackerrank:0.005686619308910331,独立写作:0.00565015479876161,编程:0.0056415548675610595,外出:0.0056415548675610595,找地:0.0056415548675610595,看论文:0.0056415548675610595,雷欧奥特曼:0.0056415548675610595,托福公开课:0.0054437564499484,排练:0.005435156518747851,摄影:0.00543515651874785,gmat:0.0054351565187478485,复习偏微分:0.0054351565187478485,等候:0.005435156518747848,托福模考:0.005435156518747848,晚饭归来:0.003730567911057835,量化:0.0034764421087624077,GMAT:0.0034396491771589437,C++:0.0029915826770370965,成绩:0.0028207774337805297,写作:0.002786377708978328,快递:0.0026759332510206866,GRE:0.002251642157100918,GRE写作:0.0020666458553682287,量化课程:0.0019503824881759704,写报告:0.001684763863744852,kaggle:0.0011915136214420998,编程作业:0.0011652730721866985,简历:0.0011203083477737538,leetcode:0.0010638941716083097,算法课程:0.0009199066361637303,面试:0.000899315034478795,万矿量化:0.0008500050734412576,随机过程:0.0008246222320504611,考试:0.0006846776324102859,写作视频:0.0006775234664811549,量化作业:0.000580879915285178,中央银行:0.00053704179091176,圣经:0.0005248595538208204,拿计算器:0.00044357608796387403,gis:0.0003860056759056176,搜索术:0.00036377195682360606,理发:0.00035342858015386015,拍视频:0.0003346845219910235,打印:0.0003114794950201255,量化项目:0.0003112554220361724,GRE数学:0.0002929457460396445,睡觉:0.0002807697596139289,散步:0.00016315742777225207,借书:0.0001570935472905246,风险管理:0.00014076585800012011,衍生工具:0.000140231829417321,体侧:0.00011110416167175713,口语视频:9.562510238257154e-05,口语:6.879944960440316e-05,可视化:5.494400489240531e-05,vn.py:4.652153258964405e-05,计量:4.046062869592281e-05,听力:3.945407033234961e-05,留学咨询:3.9273019149180134e-05,选课指导:3.270605164613542e-05,GMAT视频:3.268205973110649e-05,听讲座:3.0140711255262335e-05,作图:2.0379863951641692e-05,GRE长难句:1.4818342991717604e-05,期权定价:1.1856191888816141e-05,剪辑视频:9.828492800629022e-06,数据分析:9.555479111722663e-06,聚餐:4.873294346978557e-06,整理资料:4.510186140733097e-06,GMAT直播:0.0,打印成绩单:0.0,托福报名:0.0,PDE:0.0,经验交流会:0.0,python尝试:0.0,交材料:0.0,做图:0.0,写作课:0.0,抢课:0.0,排练ppt:0.0,考试报名:0.0,复习:0.0,尝试耳机:0.0,推荐信:0.0,洗头:0.0,午饭.:0.0,讲座:0.0,咨询:0.0,商业伦理:0.0,填信息:0.0,填表:0.0,GMAT学习:0.0,实习资料:0.0,审核视频:0.0,视频内容:0.0,建模:0.0,开会:0.0,开户:0.0,打字:0.0,托福:0.0,排练pr:0.0,搬家:0.0,柯南:0.0,逐鹿九州:0.0,托福听力真题:0.0,托福课:0.0,订酒店:0.0,托福真题:0.0,托福精听:0.0,找实习:0.0,拿成绩单:0.0,改CV:0.0,改作文:0.0,随机微积分:0.0,文书:0.0,文书修改:0.0,转账:0.0,查文献:0.0,毕业论文:0.0,公开课:0.0,罗布剧场版:0.0,装软件:0.0,论文:0.0,读论文:0.0,课与单词:0.0,长难句:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_122_1.png)
    



```python
part2.PostEvent(df, 2020, event2attr, part, path)
```

    DiGraph with 79 nodes and 585 edges
    closeness_centrality: {磨蹭:0.19847676892816918,华尔街日报:0.16954090026832686,玩游戏:0.12686995777595692,晚饭:0.084557167067304,午饭:0.08248795571101021,午休:0.07666060438462056,写日记:0.06805367008193336,运动:0.06633375315654648,人文书籍:0.06279252585038551,毕业论文:0.05026527476866241,算法课程:0.04059942805895062,单词:0.03758041634922656,人文课:0.03466882917535755,接单工作:0.02696962952566258,量化:0.023993260576316986,python:0.022974608640712726,随机微积分:0.020893085709818595,人工智能:0.01909307557305843,安装软件:0.014495289720304647,实变:0.01433451507668957,C++:0.013031828617953019,面试:0.01232101232101232,修图:0.005147687817163926,泛函:0.004719697109202765,做家务:0.0036577283148220697,写报告:0.00214573418746181,金数:0.0020229496434742804,快递:0.001739220732326772,答疑:0.0014366167480158753,写推文:0.0013996729818601442,金融人脉:0.0013614091536169456,填表:0.0011513517008022503,数据库:0.001093307712663589,复变:0.0005893151054441377,散步:0.0005584820145259705,找工作:0.0004245754245754245,测度论:0.0002603178023346091,走亲:0.00016352694924123498,摄影:6.724045185583647e-05,开会:6.66000666000666e-05,西洋画:6.66000666000666e-05,做图:5.55000555000555e-05,linux:5.5032686611633974e-05,打印:4.995004995004995e-05,讲座:4.757147614290471e-05,论文:3.9176509764745056e-05,看工作:3.468753468753469e-05,随机过程:2.3785738071452354e-05,买东西:0.0,交材料:0.0,准备材料:0.0,人文教程:0.0,修U盘:0.0,演唱会:0.0,写计划:0.0,制作视频:0.0,制订计划:0.0,游玩:0.0,算分:0.0,开证明:0.0,简历:0.0,陪诊:0.0,可视化:0.0,听讲座:0.0,回家:0.0,更新设备:0.0,导员谈话:0.0,导师谈话:0.0,干洗:0.0,监工:0.0,搜集资源:0.0,改代码:0.0,数据竞赛:0.0,整理笔记:0.0,理发:0.0,洗衣服:0.0,爬虫:0.0,修复电脑:0.0,缴费:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_123_1.png)
    



```python
part2.PostEvent(df, 2021, event2attr, part, path)
```

    DiGraph with 56 nodes and 423 edges
    closeness_centrality: {玩游戏:0.18249125558531543,磨蹭:0.1661710459193416,接单工作:0.14802918578585458,午饭:0.126913468958689,量化:0.11630089596948588,午休:0.06400425125704232,摄影:0.06316299627445138,晚饭:0.06098139046187643,运动:0.05199228253188912,人文课:0.047404551397264905,华尔街日报:0.04202643268116109,托福写作:0.039858432812978274,人文书籍:0.030351762997727284,写日记:0.0295568577513022,爬虫:0.0286987321730262,深度学习:0.018723169834280948,走亲:0.018181818181818184,修图:0.017508417508417515,做家务:0.011000346457784619,机器学习:0.01065731816681718,gis:0.007130221674190773,散步:0.006343026128379664,写报告:0.0055097445195406245,数据分析:0.005128604449053523,托福听力:0.002769878732132852,算法课程:0.0018726323778783364,快递:0.0012252141797596346,托福口语:0.001078703032451039,安装软件:0.0006129672796339464,答疑:0.000523926129986736,接种疫苗:0.0002805836139169472,正则:0.00010791677458344124,linux:8.417508417508418e-05,配置环境:5.180005180005181e-05,下载软件:0.0,买东西:0.0,写推文:0.0,大数据:0.0,拍视频:0.0,做视频:0.0,写计划:0.0,制定计划:0.0,化妆:0.0,外出游玩:0.0,改代码:0.0,逛街:0.0,托福阅读:0.0,找资源:0.0,报名考试:0.0,换锁:0.0,演唱会:0.0,整理笔记:0.0,检查设备:0.0,线上研讨:0.0,清理内存:0.0,监工:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_124_1.png)
    



```python
part2.PostEvent(df, 2022, event2attr, part, path)
```

    DiGraph with 59 nodes and 555 edges
    closeness_centrality: {玩游戏:0.18905500566000258,晚饭:0.1254973597485473,磨蹭:0.12362093545444759,接单工作:0.11126256300039834,摄影:0.0878352813654452,运动:0.07009357233568192,量化:0.06979250004453226,洗漱:0.044469050030883334,人文书籍:0.04435792437267095,午饭:0.04417647358523649,写日记:0.04387194576553569,华尔街日报:0.027691658651317327,人文课:0.02303021676321981,口语:0.020209394942111693,散步:0.019817638161677704,写报告:0.017595788966024904,gis:0.013184985904197526,人文教程:0.011926943568647772,午休:0.011147730963470296,听力:0.008798125804632944,科三:0.004447435998359454,数据竞赛:0.004093202119517911,做家务:0.003392858166625145,python高阶:0.0027019758118716946,数据分析:0.001945971905670849,购物:0.0015200207362782582,科一:0.0013630945759695629,爬虫:0.0013560707809670586,爬虫进阶:0.0012907254246530431,闲聊:0.0008148116587318039,移动端爬虫:0.0007378082201931887,核酸:0.0007257800190973493,快递:0.0006392564850870325,煮饭:0.00048423798423798424,图神经网络:0.00041658863853803534,科四:0.000384499046023547,C++:0.00023577954612437373,强化学习:0.00023157843030801293,输液:0.00016422543645774142,找资源:0.00013055775306229026,做讲义:0.00011883156166277764,地理:0.00011463044584641681,洗碗:7.682040349916938e-05,咨询驾校:5.0765930983716835e-05,看奥运:3.360892653088661e-05,plotly数据可视化:0.0,咨询:0.0,理发:0.0,做手工:0.0,明朝:0.0,外出游玩:0.0,安装软件:0.0,深度学习:0.0,改密码:0.0,数据挖掘:0.0,看发布会:0.0,科二:0.0,申请:0.0,赶车:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_125_1.png)
    


## 2.5 一键式EDA

### 2.5.1 原始数据


```python
AV = AutoViz_Class()
dft = AV.AutoViz(
    filename=None,  
    sep=",",  
    depVar="duration",  
    dfte=df,  
    header=0,
    verbose=0,  
    lowess=True,  
    chart_format="svg",  
    max_rows_analyzed=150000,  
    max_cols_analyzed=30,
)
```

    Shape of your Data Set loaded: (19597, 21)
    ############## C L A S S I F Y I N G  V A R I A B L E S  ####################
    Classifying variables in data set...
    week_order of type=period[W-SUN] is not classified
        Number of Numeric Columns =  1
        Number of Integer-Categorical Columns =  2
        Number of String-Categorical Columns =  9
        Number of Factor-Categorical Columns =  0
        Number of String-Boolean Columns =  0
        Number of Numeric-Boolean Columns =  0
        Number of Discrete String Columns =  7
        Number of NLP String Columns =  0
        Number of Date Time Columns =  0
        Number of ID Columns =  0
        Number of Columns to Delete =  0
    No of columns classified 19 does not match 20 total cols. Continuing...
     Missing columns = ['week_order']
            7 variables removed since they were ID or low-information variables
    
    ################ Regression VISUALIZATION Started #####################
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_128_7.png)
    


    All Plots done
    Time to run AutoViz (in seconds) = 43.464
    
     ###################### VISUALIZATION Completed ########################
    

### 2.5.2 衍生数据


```python
AV = AutoViz_Class()
dft = AV.AutoViz(
    filename=None,  
    sep=",",  
    depVar="effective time",  
    dfte=daily_attr_copy,  
    header=0,
    verbose=0,  
    lowess=True,  
    chart_format="svg",  
    max_rows_analyzed=150000,  
    max_cols_analyzed=30,
)
```

    Shape of your Data Set loaded: (322, 11)
    ############## C L A S S I F Y I N G  V A R I A B L E S  ####################
    Classifying variables in data set...
    week_order of type=period[W-SUN] is not classified
        Number of Numeric Columns =  3
        Number of Integer-Categorical Columns =  1
        Number of String-Categorical Columns =  1
        Number of Factor-Categorical Columns =  0
        Number of String-Boolean Columns =  0
        Number of Numeric-Boolean Columns =  0
        Number of Discrete String Columns =  1
        Number of NLP String Columns =  0
        Number of Date Time Columns =  0
        Number of ID Columns =  2
        Number of Columns to Delete =  1
    No of columns classified 9 does not match 10 total cols. Continuing...
     Missing columns = ['week_order']
            4 variables removed since they were ID or low-information variables
    
    ################ Regression VISUALIZATION Started #####################
    Using Lowess Smoothing. This might take a few minutes for large data sets...
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_1.png)
    


    Using Lowess Smoothing. This might take a few minutes for large data sets...
    Number of All Scatter Plots = 6
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_130_9.png)
    


    All Plots done
    Time to run AutoViz (in seconds) = 10.043
    
     ###################### VISUALIZATION Completed ########################
    

# 3.数据分析

## 3.1 方差分析每月或是每年的事项是否有差异

### 3.1.1 原始事项时长数据的方差分析


```python
# 原始事项数据的方差分析
part = '3.1.1'

def vr_event(data, num, cate):
    formula = f'{num}~C({cate})'
    anova_re_2019 = anova_lm(ols(formula, data=data[[num, cate]]).fit())
    return anova_re_2019.loc[f'C({cate})', 'PR(>F)']
```


```python
# 事项时长数据
vr_duration_table = pd.DataFrame()
for event in tqdm(df['event'].unique()):
    for cate in cate_vars:
        if cate not in ['event', 'attr']:
            temp = df[df['event'] == event].copy()
            temp[cate] = temp[cate].astype(str)
            res = vr_event(temp, 'duration', cate)
            vr_duration_table.loc[event, cate] = res

# 该表格是各个事项的时长数据关于各分类变量的方差分析结果
vr_duration_table
```

    100%|██████████| 271/271 [00:44<00:00,  6.08it/s]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>weekday</th>
      <th>mid_hour</th>
      <th>day_period</th>
      <th>week_order</th>
      <th>duration_attr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>托福写作与听力</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>python</th>
      <td>8.459643e-03</td>
      <td>2.287125e-02</td>
      <td>0.739882</td>
      <td>8.399767e-01</td>
      <td>5.757493e-11</td>
      <td>1.195543e-08</td>
      <td>1.238277e-01</td>
      <td>9.591669e-44</td>
    </tr>
    <tr>
      <th>快递</th>
      <td>9.717359e-02</td>
      <td>5.368216e-01</td>
      <td>0.954143</td>
      <td>6.033647e-01</td>
      <td>1.136530e-01</td>
      <td>1.303288e-01</td>
      <td>1.155947e-01</td>
      <td>6.209434e-16</td>
    </tr>
    <tr>
      <th>搜索术</th>
      <td>NaN</td>
      <td>1.000000e+00</td>
      <td>NaN</td>
      <td>5.792850e-15</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000000e+00</td>
      <td>1.113672e-01</td>
    </tr>
    <tr>
      <th>午休</th>
      <td>1.226190e-15</td>
      <td>8.153730e-10</td>
      <td>0.979989</td>
      <td>6.382506e-01</td>
      <td>2.647618e-02</td>
      <td>4.958683e-01</td>
      <td>3.148206e-26</td>
      <td>1.643023e-67</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>看发布会</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>核酸</th>
      <td>NaN</td>
      <td>1.263358e-04</td>
      <td>0.520293</td>
      <td>9.206154e-01</td>
      <td>3.610783e-03</td>
      <td>3.963241e-03</td>
      <td>6.732790e-04</td>
      <td>4.939932e-08</td>
    </tr>
    <tr>
      <th>洗碗</th>
      <td>NaN</td>
      <td>6.568626e-01</td>
      <td>0.305073</td>
      <td>6.610338e-01</td>
      <td>1.128346e-04</td>
      <td>1.373300e-03</td>
      <td>9.656138e-02</td>
      <td>2.055511e-09</td>
    </tr>
    <tr>
      <th>煮饭</th>
      <td>NaN</td>
      <td>9.901657e-01</td>
      <td>NaN</td>
      <td>7.066244e-01</td>
      <td>5.312940e-01</td>
      <td>5.017738e-01</td>
      <td>5.377595e-01</td>
      <td>1.316950e-02</td>
    </tr>
    <tr>
      <th>明朝</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>271 rows × 8 columns</p>
</div>




```python
# 选取那些在不同分类情况下时长有显著差异的数据
vr_duration_table.to_excel('事项时长数据的方差分析结果.xlsx', index=True)
significant_event = vr_duration_table[vr_duration_table > .05].dropna(axis=0, how='all')
significant_event
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>weekday</th>
      <th>mid_hour</th>
      <th>day_period</th>
      <th>week_order</th>
      <th>duration_attr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>python</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.739882</td>
      <td>0.839977</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.123828</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>快递</th>
      <td>0.097174</td>
      <td>0.536822</td>
      <td>0.954143</td>
      <td>0.603365</td>
      <td>0.113653</td>
      <td>0.130329</td>
      <td>0.115595</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>搜索术</th>
      <td>NaN</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.000000</td>
      <td>0.111367</td>
    </tr>
    <tr>
      <th>午休</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.979989</td>
      <td>0.638251</td>
      <td>NaN</td>
      <td>0.495868</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>托福听力</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.786872</td>
      <td>0.706346</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>输液</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.444534</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>做讲义</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.780951</td>
      <td>0.780951</td>
      <td>0.186363</td>
      <td>0.403858</td>
      <td>NaN</td>
      <td>0.062121</td>
    </tr>
    <tr>
      <th>核酸</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.520293</td>
      <td>0.920615</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>洗碗</th>
      <td>NaN</td>
      <td>0.656863</td>
      <td>0.305073</td>
      <td>0.661034</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.096561</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>煮饭</th>
      <td>NaN</td>
      <td>0.990166</td>
      <td>NaN</td>
      <td>0.706624</td>
      <td>0.531294</td>
      <td>0.501774</td>
      <td>0.537759</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>138 rows × 8 columns</p>
</div>




```python
# 对于有显著差异的事项 做出在不同分类中均值的bar图
mins = 30  # 剔除掉出现次数少的事项
for e in tqdm(significant_event.index):
    if len(df[df['event'] == e]) >= mins:
        for c in significant_event.columns:
            if significant_event.loc[e, c] >= .05:
                plt.figure(dpi=100)
                df[df['event'] == e].groupby(c)['duration'].agg('mean').plot(
                    kind='bar', figsize=(20, 10)
                )
                title = f'{part} mean value of {e} duration in different {c} groups'
                plt.title(title, fontsize=20)
                plt.xlabel(e, fontsize=20)
                plt.ylabel('Mean value', fontsize=20)
                plt.xticks(fontsize=20)
                plt.yticks(fontsize=20)
                file = os.path.join(path, f'{title}.png')
                plt.savefig(file, dpi=100) 
```

    100%|██████████| 138/138 [01:48<00:00,  1.27it/s]
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_19.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_26.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_27.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_32.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_33.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_34.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_35.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_36.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_37.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_38.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_39.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_40.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_41.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_42.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_43.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_44.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_45.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_46.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_47.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_48.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_49.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_50.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_51.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_52.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_53.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_54.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_55.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_56.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_57.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_58.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_59.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_60.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_61.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_62.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_63.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_64.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_65.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_66.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_67.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_68.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_69.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_70.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_71.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_72.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_73.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_74.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_75.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_76.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_77.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_78.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_79.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_80.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_81.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_82.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_83.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_84.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_85.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_86.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_87.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_88.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_89.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_90.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_91.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_92.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_93.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_94.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_95.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_96.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_97.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_98.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_99.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_100.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_101.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_102.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_103.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_104.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_105.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_106.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_107.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_108.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_109.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_110.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_111.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_112.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_113.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_114.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_115.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_116.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_117.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_118.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_119.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_120.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_121.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_122.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_123.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_124.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_125.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_126.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_127.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_128.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_129.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_130.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_131.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_132.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_133.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_134.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_135.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_136.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_137.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_138.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_139.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_140.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_141.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_142.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_143.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_144.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_145.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_146.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_147.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_148.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_149.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_150.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_151.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_152.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_153.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_154.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_155.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_156.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_157.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_158.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_159.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_160.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_161.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_162.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_163.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_164.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_165.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_166.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_167.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_168.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_169.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_170.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_171.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_172.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_173.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_174.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_175.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_176.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_177.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_178.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_179.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_180.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_181.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_182.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_183.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_184.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_185.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_186.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_187.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_188.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_189.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_190.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_191.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_192.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_193.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_194.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_195.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_196.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_197.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_198.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_199.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_200.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_201.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_202.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_203.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_204.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_205.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_206.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_207.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_208.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_209.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_210.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_211.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_212.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_213.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_214.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_215.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_216.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_217.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_218.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_219.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_137_220.png)
    



```python
# 只分析2022年
vr_duration_table2022 = pd.DataFrame()
for event in tqdm(df['event'].unique()):
    for cate in cate_vars:
        if cate not in ['event', 'attr', 'year']:
            try:
                temp = df[
                    (df['event'] == event) & (df['year'] == '2022')
                ].copy()
                temp[cate] = temp[cate].astype(str)
                res = vr_event(temp, 'duration', cate)
                vr_duration_table2022.loc[event, cate] = res
            except:
                continue

# 该表格是各个事项的时长数据关于各分类变量的方差分析结果
vr_duration_table2022
```

    100%|██████████| 271/271 [00:24<00:00, 11.21it/s]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>day</th>
      <th>weekday</th>
      <th>mid_hour</th>
      <th>day_period</th>
      <th>week_order</th>
      <th>duration_attr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>快递</th>
      <td>8.454370e-01</td>
      <td>0.117237</td>
      <td>0.429068</td>
      <td>4.188874e-02</td>
      <td>5.571638e-02</td>
      <td>1.422732e-01</td>
      <td>6.477444e-11</td>
    </tr>
    <tr>
      <th>午休</th>
      <td>7.627015e-09</td>
      <td>0.998168</td>
      <td>0.691585</td>
      <td>1.009380e-01</td>
      <td>3.827649e-01</td>
      <td>1.235826e-07</td>
      <td>6.886522e-23</td>
    </tr>
    <tr>
      <th>磨蹭</th>
      <td>5.714547e-01</td>
      <td>0.181677</td>
      <td>0.269955</td>
      <td>5.550402e-07</td>
      <td>1.544751e-04</td>
      <td>3.379919e-01</td>
      <td>5.327228e-126</td>
    </tr>
    <tr>
      <th>晚饭</th>
      <td>1.818434e-01</td>
      <td>0.346147</td>
      <td>0.069287</td>
      <td>5.383037e-01</td>
      <td>3.246885e-01</td>
      <td>2.450267e-01</td>
      <td>1.188103e-133</td>
    </tr>
    <tr>
      <th>午饭</th>
      <td>1.502654e-01</td>
      <td>0.080713</td>
      <td>0.148016</td>
      <td>1.485125e-05</td>
      <td>5.784690e-01</td>
      <td>8.626153e-02</td>
      <td>2.801767e-71</td>
    </tr>
    <tr>
      <th>玩游戏</th>
      <td>1.731614e-06</td>
      <td>0.933055</td>
      <td>0.563783</td>
      <td>5.916771e-20</td>
      <td>7.954890e-08</td>
      <td>1.110634e-04</td>
      <td>2.075094e-153</td>
    </tr>
    <tr>
      <th>听力</th>
      <td>2.006974e-01</td>
      <td>0.275517</td>
      <td>0.250340</td>
      <td>1.878898e-02</td>
      <td>7.933369e-04</td>
      <td>3.530842e-03</td>
      <td>1.242089e-26</td>
    </tr>
    <tr>
      <th>口语</th>
      <td>8.407041e-01</td>
      <td>0.339690</td>
      <td>0.175934</td>
      <td>2.280409e-01</td>
      <td>2.151073e-02</td>
      <td>1.533717e-01</td>
      <td>2.726525e-14</td>
    </tr>
    <tr>
      <th>量化</th>
      <td>8.080996e-08</td>
      <td>0.582834</td>
      <td>0.945678</td>
      <td>7.189727e-33</td>
      <td>1.820441e-16</td>
      <td>2.198151e-04</td>
      <td>1.235821e-96</td>
    </tr>
    <tr>
      <th>gis</th>
      <td>2.457273e-01</td>
      <td>0.558711</td>
      <td>0.869106</td>
      <td>1.611681e-01</td>
      <td>3.988753e-01</td>
      <td>5.393781e-01</td>
      <td>1.440209e-08</td>
    </tr>
    <tr>
      <th>写报告</th>
      <td>7.463161e-05</td>
      <td>0.657886</td>
      <td>0.954028</td>
      <td>1.770436e-02</td>
      <td>3.354377e-02</td>
      <td>5.129050e-04</td>
      <td>3.372915e-06</td>
    </tr>
    <tr>
      <th>理发</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>写日记</th>
      <td>7.828428e-08</td>
      <td>0.933187</td>
      <td>0.417286</td>
      <td>1.169895e-01</td>
      <td>NaN</td>
      <td>1.693407e-03</td>
      <td>2.493964e-86</td>
    </tr>
    <tr>
      <th>摄影</th>
      <td>1.453267e-10</td>
      <td>0.691684</td>
      <td>0.486978</td>
      <td>2.470120e-32</td>
      <td>1.104674e-15</td>
      <td>4.695667e-07</td>
      <td>4.877757e-83</td>
    </tr>
    <tr>
      <th>咨询</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>散步</th>
      <td>3.441746e-01</td>
      <td>0.519218</td>
      <td>0.601485</td>
      <td>4.199537e-01</td>
      <td>4.199537e-01</td>
      <td>1.928818e-02</td>
      <td>1.085296e-05</td>
    </tr>
    <tr>
      <th>华尔街日报</th>
      <td>3.815419e-03</td>
      <td>0.701153</td>
      <td>0.110309</td>
      <td>6.375107e-116</td>
      <td>7.292810e-46</td>
      <td>7.058748e-05</td>
      <td>5.040083e-98</td>
    </tr>
    <tr>
      <th>C++</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.298610</td>
      <td>3.253583e-02</td>
      <td>7.797022e-01</td>
      <td>1.356528e-01</td>
      <td>1.674882e-03</td>
    </tr>
    <tr>
      <th>数据分析</th>
      <td>9.190128e-01</td>
      <td>0.773851</td>
      <td>0.447059</td>
      <td>1.546527e-01</td>
      <td>2.904610e-02</td>
      <td>7.287068e-01</td>
      <td>1.397312e-05</td>
    </tr>
    <tr>
      <th>人文书籍</th>
      <td>5.614398e-07</td>
      <td>0.897155</td>
      <td>0.536106</td>
      <td>6.330748e-11</td>
      <td>3.819875e-08</td>
      <td>1.570041e-04</td>
      <td>4.918419e-59</td>
    </tr>
    <tr>
      <th>人文课</th>
      <td>1.637165e-02</td>
      <td>0.814120</td>
      <td>0.919504</td>
      <td>2.017441e-05</td>
      <td>2.407404e-01</td>
      <td>8.784996e-03</td>
      <td>3.011731e-35</td>
    </tr>
    <tr>
      <th>人文教程</th>
      <td>2.893192e-03</td>
      <td>0.988052</td>
      <td>0.861215</td>
      <td>3.276615e-03</td>
      <td>9.735126e-03</td>
      <td>8.108054e-03</td>
      <td>1.511326e-16</td>
    </tr>
    <tr>
      <th>运动</th>
      <td>4.500558e-63</td>
      <td>0.931572</td>
      <td>0.993275</td>
      <td>1.436323e-30</td>
      <td>5.017242e-06</td>
      <td>5.369244e-55</td>
      <td>3.566058e-40</td>
    </tr>
    <tr>
      <th>安装软件</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>做家务</th>
      <td>7.718167e-02</td>
      <td>0.387139</td>
      <td>0.257631</td>
      <td>2.795135e-04</td>
      <td>1.154467e-01</td>
      <td>4.535484e-01</td>
      <td>4.038466e-09</td>
    </tr>
    <tr>
      <th>接单工作</th>
      <td>5.095345e-02</td>
      <td>0.865030</td>
      <td>0.033084</td>
      <td>3.706742e-25</td>
      <td>1.991060e-15</td>
      <td>2.407428e-01</td>
      <td>5.193211e-77</td>
    </tr>
    <tr>
      <th>数据竞赛</th>
      <td>4.090761e-01</td>
      <td>0.297391</td>
      <td>0.327217</td>
      <td>3.438051e-01</td>
      <td>2.535913e-01</td>
      <td>5.842856e-01</td>
      <td>1.640107e-05</td>
    </tr>
    <tr>
      <th>爬虫</th>
      <td>1.574409e-01</td>
      <td>0.311837</td>
      <td>0.503002</td>
      <td>5.383217e-02</td>
      <td>5.178669e-01</td>
      <td>4.536304e-01</td>
      <td>1.981275e-03</td>
    </tr>
    <tr>
      <th>找资源</th>
      <td>8.842861e-01</td>
      <td>NaN</td>
      <td>0.641470</td>
      <td>3.281938e-01</td>
      <td>6.819844e-02</td>
      <td>8.842861e-01</td>
      <td>6.819844e-02</td>
    </tr>
    <tr>
      <th>深度学习</th>
      <td>1.136534e-01</td>
      <td>0.615327</td>
      <td>0.824320</td>
      <td>5.337212e-01</td>
      <td>7.395201e-01</td>
      <td>1.136534e-01</td>
      <td>5.367990e-03</td>
    </tr>
    <tr>
      <th>外出游玩</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>图神经网络</th>
      <td>3.257798e-01</td>
      <td>0.836215</td>
      <td>0.824475</td>
      <td>2.474160e-01</td>
      <td>7.674548e-01</td>
      <td>3.257798e-01</td>
      <td>2.774668e-04</td>
    </tr>
    <tr>
      <th>洗漱</th>
      <td>3.002010e-02</td>
      <td>0.175122</td>
      <td>0.295034</td>
      <td>1.136974e-04</td>
      <td>1.784109e-03</td>
      <td>7.883042e-01</td>
      <td>4.476718e-30</td>
    </tr>
    <tr>
      <th>移动端爬虫</th>
      <td>NaN</td>
      <td>0.799798</td>
      <td>0.775991</td>
      <td>1.470260e-01</td>
      <td>1.919444e-02</td>
      <td>3.957660e-01</td>
      <td>2.476052e-02</td>
    </tr>
    <tr>
      <th>闲聊</th>
      <td>2.670992e-01</td>
      <td>0.888321</td>
      <td>0.574716</td>
      <td>3.628812e-01</td>
      <td>2.013787e-01</td>
      <td>7.673986e-01</td>
      <td>7.554494e-05</td>
    </tr>
    <tr>
      <th>爬虫进阶</th>
      <td>4.322821e-01</td>
      <td>0.417792</td>
      <td>0.101516</td>
      <td>4.672100e-01</td>
      <td>3.488498e-01</td>
      <td>4.153431e-01</td>
      <td>3.366131e-04</td>
    </tr>
    <tr>
      <th>购物</th>
      <td>7.230345e-01</td>
      <td>0.483439</td>
      <td>0.802643</td>
      <td>3.521364e-03</td>
      <td>7.635544e-01</td>
      <td>3.380388e-01</td>
      <td>6.603988e-06</td>
    </tr>
    <tr>
      <th>看奥运</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>咨询驾校</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.418339e-01</td>
      <td>1.252135e-01</td>
      <td>8.556977e-01</td>
      <td>4.418339e-01</td>
    </tr>
    <tr>
      <th>科一</th>
      <td>4.737483e-01</td>
      <td>0.336252</td>
      <td>0.782569</td>
      <td>2.946396e-03</td>
      <td>2.056018e-02</td>
      <td>4.178700e-01</td>
      <td>8.511588e-12</td>
    </tr>
    <tr>
      <th>科二</th>
      <td>NaN</td>
      <td>0.840985</td>
      <td>0.840985</td>
      <td>4.923486e-01</td>
      <td>NaN</td>
      <td>8.409847e-01</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>科四</th>
      <td>NaN</td>
      <td>0.313197</td>
      <td>0.930431</td>
      <td>3.933853e-01</td>
      <td>NaN</td>
      <td>1.662326e-02</td>
      <td>1.400155e-03</td>
    </tr>
    <tr>
      <th>赶车</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.925500e-01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.925500e-01</td>
    </tr>
    <tr>
      <th>科三</th>
      <td>NaN</td>
      <td>0.600151</td>
      <td>0.600151</td>
      <td>1.685531e-01</td>
      <td>1.685531e-01</td>
      <td>NaN</td>
      <td>5.853337e-02</td>
    </tr>
    <tr>
      <th>plotly数据可视化</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>python高阶</th>
      <td>7.173533e-01</td>
      <td>0.466751</td>
      <td>0.878345</td>
      <td>3.852984e-02</td>
      <td>7.732169e-02</td>
      <td>1.921755e-01</td>
      <td>1.760707e-19</td>
    </tr>
    <tr>
      <th>地理</th>
      <td>7.041626e-02</td>
      <td>NaN</td>
      <td>0.887141</td>
      <td>1.055788e-01</td>
      <td>7.041626e-02</td>
      <td>1.581398e-01</td>
      <td>1.262061e-01</td>
    </tr>
    <tr>
      <th>改密码</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>做手工</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>强化学习</th>
      <td>NaN</td>
      <td>0.563655</td>
      <td>0.563655</td>
      <td>2.264112e-01</td>
      <td>5.749354e-01</td>
      <td>NaN</td>
      <td>1.750121e-04</td>
    </tr>
    <tr>
      <th>输液</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.445342e-01</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>数据挖掘</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>做讲义</th>
      <td>NaN</td>
      <td>0.780951</td>
      <td>0.780951</td>
      <td>1.863632e-01</td>
      <td>4.038583e-01</td>
      <td>NaN</td>
      <td>6.212107e-02</td>
    </tr>
    <tr>
      <th>申请</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>看发布会</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>核酸</th>
      <td>1.263358e-04</td>
      <td>0.520293</td>
      <td>0.920615</td>
      <td>3.610783e-03</td>
      <td>3.963241e-03</td>
      <td>6.732790e-04</td>
      <td>4.939932e-08</td>
    </tr>
    <tr>
      <th>洗碗</th>
      <td>6.568626e-01</td>
      <td>0.305073</td>
      <td>0.661034</td>
      <td>1.128346e-04</td>
      <td>1.373300e-03</td>
      <td>9.656138e-02</td>
      <td>2.055511e-09</td>
    </tr>
    <tr>
      <th>煮饭</th>
      <td>9.901657e-01</td>
      <td>NaN</td>
      <td>0.706624</td>
      <td>5.312940e-01</td>
      <td>5.017738e-01</td>
      <td>5.377595e-01</td>
      <td>1.316950e-02</td>
    </tr>
    <tr>
      <th>明朝</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




```python
significant_event2022 = vr_duration_table2022[vr_duration_table2022 > .05].\
    dropna(axis=0, how='all')

mins = 20

for e in tqdm(significant_event2022.index):
    if len(df[df['event'] == e]) >= mins:
        for c in significant_event2022.columns:
            if significant_event2022.loc[e, c] >= .05:
                plt.figure(dpi=100)
                df[
                    (df['event'] == e) & (df['year'] == '2022')
                ].groupby(c)['duration'].agg('mean').plot(
                    kind='bar', figsize=(20, 10)
                )
                title = f'{part} mean value of {e} duration in different {c} groups in year 2022'
                plt.title(title, fontsize=20)
                plt.xlabel(e, fontsize=20)
                plt.ylabel('Mean value', fontsize=20)
                plt.xticks(fontsize=20)
                plt.yticks(fontsize=20)
                file = os.path.join(path, f'{title}.png')
                plt.savefig(file, dpi=100) 
```

    100%|██████████| 47/47 [00:56<00:00,  1.20s/it]
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_10.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_11.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_18.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_19.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_26.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_27.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_32.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_33.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_34.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_35.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_36.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_37.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_38.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_39.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_40.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_41.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_42.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_43.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_44.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_45.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_46.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_47.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_48.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_49.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_50.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_51.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_52.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_53.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_54.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_55.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_56.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_57.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_58.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_59.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_60.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_61.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_62.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_63.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_64.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_65.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_66.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_67.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_68.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_69.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_70.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_71.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_72.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_73.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_74.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_75.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_76.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_77.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_78.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_79.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_80.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_81.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_82.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_83.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_84.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_85.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_86.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_87.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_88.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_89.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_90.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_91.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_92.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_93.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_94.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_95.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_96.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_97.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_98.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_99.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_100.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_101.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_102.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_103.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_104.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_105.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_106.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_107.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_108.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_109.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_110.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_139_111.png)
    


### 3.1.2 衍生数据的方差分析


```python
part = '3.1.2'

daily_attr['weekday'] = pd.to_datetime(daily_attr['date']).dt.weekday + 1
daily_attr['year'] = daily_attr['date'].apply(lambda x:str(x).split('-')[0])
daily_attr['month'] = daily_attr['date'].apply(lambda x:str(x).split('-')[1])
daily_attr['day'] = daily_attr['date'].apply(lambda x:str(x).split('-')[2])
daily_attr['week_order'] = daily_attr['date'].map(lambda x: pd.Period(x, freq='W'))
daily_attr
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>必要时间</th>
      <th>有效时间</th>
      <th>浪费时间</th>
      <th>手机时间</th>
      <th>weekday</th>
      <th>month</th>
      <th>day</th>
      <th>week_order</th>
      <th>day_of_year</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-02-27</td>
      <td>160.0</td>
      <td>590.0</td>
      <td>80.0</td>
      <td>NaN</td>
      <td>3</td>
      <td>02</td>
      <td>27</td>
      <td>2019-02-25/2019-03-03</td>
      <td>58</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04</td>
      <td>650.0</td>
      <td>160.0</td>
      <td>30.0</td>
      <td>NaN</td>
      <td>1</td>
      <td>03</td>
      <td>04</td>
      <td>2019-03-04/2019-03-10</td>
      <td>63</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-05</td>
      <td>395.0</td>
      <td>342.0</td>
      <td>108.0</td>
      <td>NaN</td>
      <td>2</td>
      <td>03</td>
      <td>05</td>
      <td>2019-03-04/2019-03-10</td>
      <td>64</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-03-06</td>
      <td>370.0</td>
      <td>340.0</td>
      <td>130.0</td>
      <td>NaN</td>
      <td>3</td>
      <td>03</td>
      <td>06</td>
      <td>2019-03-04/2019-03-10</td>
      <td>65</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-03-07</td>
      <td>495.0</td>
      <td>265.0</td>
      <td>80.0</td>
      <td>NaN</td>
      <td>4</td>
      <td>03</td>
      <td>07</td>
      <td>2019-03-04/2019-03-10</td>
      <td>66</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>2022-12-26</td>
      <td>334.0</td>
      <td>426.0</td>
      <td>87.0</td>
      <td>19.0</td>
      <td>1</td>
      <td>12</td>
      <td>26</td>
      <td>2022-12-26/2023-01-01</td>
      <td>360</td>
      <td>2022</td>
    </tr>
    <tr>
      <th>1187</th>
      <td>2022-12-27</td>
      <td>301.0</td>
      <td>442.0</td>
      <td>93.0</td>
      <td>11.0</td>
      <td>2</td>
      <td>12</td>
      <td>27</td>
      <td>2022-12-26/2023-01-01</td>
      <td>361</td>
      <td>2022</td>
    </tr>
    <tr>
      <th>1188</th>
      <td>2022-12-28</td>
      <td>341.0</td>
      <td>475.0</td>
      <td>58.0</td>
      <td>29.0</td>
      <td>3</td>
      <td>12</td>
      <td>28</td>
      <td>2022-12-26/2023-01-01</td>
      <td>362</td>
      <td>2022</td>
    </tr>
    <tr>
      <th>1189</th>
      <td>2022-12-29</td>
      <td>293.0</td>
      <td>479.0</td>
      <td>81.0</td>
      <td>32.0</td>
      <td>4</td>
      <td>12</td>
      <td>29</td>
      <td>2022-12-26/2023-01-01</td>
      <td>363</td>
      <td>2022</td>
    </tr>
    <tr>
      <th>1190</th>
      <td>2022-12-30</td>
      <td>226.0</td>
      <td>484.0</td>
      <td>134.0</td>
      <td>17.0</td>
      <td>5</td>
      <td>12</td>
      <td>30</td>
      <td>2022-12-26/2023-01-01</td>
      <td>364</td>
      <td>2022</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 11 columns</p>
</div>




```python
# 变量类型划分
num_vars = [
    '有效时间', '浪费时间', '必要时间', '手机时间'
]

cates_vars = [
    'year', 'month', 'day', 'weekday', 'week_order'
]

# 逐一进行方差分析
daily_sum_table = pd.DataFrame()
for num in tqdm(num_vars):
    for cate in cates_vars:
        temp = daily_attr[[num, cate]].copy()
        temp[cate] = temp[cate].astype(str)
        res = vr_event(temp, num, cate)
        daily_sum_table.loc[num, cate] = res

# 该表格是各个事项的时长日度求和数据数据关于各分类变量的方差分析结果
daily_sum_table
```

    100%|██████████| 4/4 [00:01<00:00,  2.46it/s]
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>weekday</th>
      <th>week_order</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>有效时间</th>
      <td>1.091617e-04</td>
      <td>3.048696e-17</td>
      <td>0.993752</td>
      <td>0.131231</td>
      <td>2.766458e-74</td>
    </tr>
    <tr>
      <th>浪费时间</th>
      <td>9.394617e-30</td>
      <td>2.858781e-07</td>
      <td>0.710472</td>
      <td>0.118799</td>
      <td>2.196796e-40</td>
    </tr>
    <tr>
      <th>必要时间</th>
      <td>2.815879e-34</td>
      <td>1.186539e-19</td>
      <td>0.936135</td>
      <td>0.464230</td>
      <td>3.570441e-72</td>
    </tr>
    <tr>
      <th>手机时间</th>
      <td>1.631027e-43</td>
      <td>1.014496e-39</td>
      <td>0.998871</td>
      <td>0.762268</td>
      <td>0.000000e+00</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 对于有显著差异的事项 做出在不同分类中均值的bar图
for e in tqdm(daily_sum_table.index):
    for c in daily_sum_table.columns:
        if daily_sum_table.loc[e, c] >= .05:
            plt.figure(dpi=100)
            daily_attr.groupby(c)[e].agg('mean').plot(
                kind='bar', figsize=(20, 10)
            )
            title = f'{part} mean value of {e} duration in different {c} groups'
            plt.title(title, fontsize=20)
            plt.xlabel(e, fontsize=20)
            plt.ylabel('Mean value', fontsize=20)
            plt.xticks(fontsize=20)
            plt.yticks(fontsize=20)
            file = os.path.join(path, f'{title}.png')
            plt.savefig(file, dpi=100) 
```

    100%|██████████| 4/4 [00:03<00:00,  1.00it/s]
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_143_8.png)
    


## 3.2 LSTM预测前后事项

### 3.2.1 建立字符索引


```python
corpus_chars = df['event'].values
idx_to_char = list(set(corpus_chars)) # 去重，得到索引到字符的映射
char_to_idx = {char: i for i, char in enumerate(idx_to_char)} # 字符到索引的映射
vocab_size = len(char_to_idx)
print(vocab_size)
print('len(corpus_chars) = ', len(corpus_chars))

corpus_indices = [char_to_idx[char] for char in corpus_chars]  # 将每个字符转化为索引，得到一个索引的序列
sample = corpus_indices[: 20]
print('chars:', ' '.join([idx_to_char[idx] for idx in sample]))
print('indices:', sample)
```

    271
    len(corpus_chars) =  19597
    chars: 托福写作与听力 python 快递 搜索术 午休 托福听力 博弈论 博弈论 磨蹭 晚饭 雷欧奥特曼 复习偏微分 托福写作 托福听力 课 磨蹭 PPT 午饭走路 重师游玩 K歌
    indices: [111, 164, 128, 212, 266, 228, 162, 162, 142, 217, 199, 1, 15, 228, 88, 142, 28, 262, 182, 134]
    


```python
idx_to_char = list(set(corpus_chars))
char_to_idx = dict([(char, i) for i, char in enumerate(idx_to_char)])
vocab_size = len(char_to_idx)
corpus_indices = [char_to_idx[char] for char in corpus_chars]
```

### 3.2.2 建立LSTM模型


```python
num_inputs, num_hiddens, num_outputs = vocab_size, 128, vocab_size
pred_period, pred_len, prefixes = 50, 50, ['磨蹭', '运动']
rnn_layer = nn.LSTM(input_size=vocab_size, hidden_size=num_hiddens)
num_steps, batch_size = 35, 2
X = torch.rand(num_steps, batch_size, vocab_size)
state = None
Y, state_new = rnn_layer(X, state)
print(Y, state_new)
```

    tensor([[[ 0.0902, -0.1588, -0.1135,  ..., -0.0173,  0.1592, -0.0953],
             [ 0.1051, -0.1102, -0.1478,  ..., -0.1795,  0.1704, -0.2018]],
    
            [[ 0.1570, -0.2983, -0.0604,  ..., -0.0344,  0.2547, -0.0032],
             [ 0.1268, -0.1304, -0.1321,  ..., -0.1334,  0.2317, -0.1282]],
    
            [[ 0.2746, -0.2333, -0.1194,  ..., -0.0110,  0.2557,  0.0973],
             [ 0.1766, -0.2031, -0.1401,  ..., -0.1935,  0.2790,  0.0105]],
    
            ...,
    
            [[ 0.2088, -0.3709, -0.1222,  ..., -0.2583,  0.3650, -0.1264],
             [ 0.2193, -0.2565, -0.0704,  ..., -0.1119,  0.3753, -0.0568]],
    
            [[ 0.2710, -0.3470, -0.0245,  ..., -0.1789,  0.2695, -0.0738],
             [ 0.2754, -0.3583, -0.0903,  ..., -0.2057,  0.3061, -0.1592]],
    
            [[ 0.3837, -0.3007, -0.1082,  ..., -0.2206,  0.3896, -0.0771],
             [ 0.2832, -0.3808, -0.1527,  ..., -0.1248,  0.4040, -0.1582]]],
           grad_fn=<StackBackward>) (tensor([[[ 0.3837, -0.3007, -0.1082,  0.0192, -0.0424,  0.0970,  0.0532,
              -0.2850, -0.1164,  0.1939, -0.0512,  0.2385,  0.0503, -0.1094,
              -0.0637,  0.1558,  0.0570, -0.2296, -0.3648, -0.1398, -0.1230,
              -0.2330, -0.0944, -0.1062, -0.1937, -0.0693, -0.4523, -0.1547,
              -0.1922,  0.0198,  0.3318, -0.0935,  0.0355,  0.5191, -0.0893,
               0.3188,  0.1747, -0.2475,  0.1597, -0.0964, -0.0830,  0.0378,
               0.3102,  0.0537,  0.2057, -0.2262,  0.1890, -0.1722, -0.4274,
              -0.1965, -0.1501,  0.0587,  0.1561,  0.0809, -0.1125,  0.1294,
               0.0890, -0.0539, -0.0190, -0.2327, -0.1544, -0.0749, -0.3758,
              -0.1289, -0.3853,  0.2475, -0.2178, -0.2224,  0.1154,  0.0638,
               0.2506,  0.0084, -0.0375,  0.1825, -0.1972,  0.1467,  0.2714,
               0.1035, -0.0749, -0.1011,  0.1998, -0.1687, -0.2838,  0.1564,
               0.0012, -0.1886,  0.1996, -0.0960,  0.5535, -0.3507, -0.1255,
               0.5405, -0.2731,  0.3211, -0.2158,  0.1551,  0.2882,  0.2349,
              -0.3286,  0.0858, -0.2415, -0.4821, -0.0084, -0.0235,  0.0823,
               0.2013,  0.2421, -0.2141, -0.2945,  0.1146, -0.0704,  0.1135,
               0.3403, -0.3351, -0.1914,  0.0764,  0.1502, -0.0569,  0.1777,
               0.0372,  0.0112,  0.1092,  0.1762,  0.1285, -0.0389, -0.2206,
               0.3896, -0.0771],
             [ 0.2832, -0.3808, -0.1527,  0.0033, -0.0117,  0.1156,  0.0273,
              -0.2321, -0.0476,  0.1929, -0.1540,  0.1573,  0.0448, -0.1469,
              -0.0343,  0.1857, -0.0755, -0.2688, -0.3100, -0.1501, -0.2117,
              -0.2179, -0.1119, -0.2159, -0.1993, -0.1351, -0.4774, -0.1761,
              -0.2086,  0.0031,  0.2349, -0.0980,  0.0847,  0.5701, -0.1390,
               0.0806,  0.1995, -0.1333,  0.0559, -0.0869, -0.1062,  0.0590,
               0.1703,  0.0965, -0.0269, -0.1294,  0.1849, -0.1146, -0.2385,
              -0.2424,  0.1600,  0.1133,  0.1328,  0.0271, -0.0865,  0.0553,
               0.0926,  0.0444,  0.0263, -0.2135, -0.1565, -0.0636, -0.4040,
              -0.0025, -0.2805,  0.3005, -0.4181, -0.1841,  0.0716,  0.0672,
               0.1725,  0.2596, -0.0232,  0.0541, -0.0842,  0.0637,  0.2982,
              -0.0028, -0.0789,  0.0445,  0.3178, -0.1359,  0.2181,  0.1063,
               0.0253, -0.1875,  0.2865,  0.0250,  0.4046, -0.3281,  0.0657,
               0.5507, -0.4272,  0.2662, -0.2149,  0.1672,  0.3324,  0.3042,
              -0.2923,  0.0709, -0.1771, -0.3204, -0.0832, -0.0807, -0.0015,
               0.1798,  0.2487, -0.2405, -0.2053,  0.0522, -0.0641,  0.1152,
               0.2759, -0.3311, -0.0938,  0.0920,  0.0764,  0.1139,  0.0444,
               0.0758, -0.0541,  0.0338,  0.1229,  0.1157, -0.0262, -0.1248,
               0.4040, -0.1582]]], grad_fn=<StackBackward>), tensor([[[ 0.8768, -0.8490, -0.2170,  0.0600, -0.0710,  0.1933,  0.1282,
              -0.4891, -0.2782,  0.4753, -0.0988,  0.4263,  0.0938, -0.1333,
              -0.1362,  0.3636,  0.1279, -0.3824, -0.6893, -0.7000, -0.2045,
              -0.7383, -0.1721, -0.1912, -0.5102, -0.2294, -1.1069, -0.4502,
              -0.3483,  0.0879,  0.5670, -0.1899,  0.0599,  0.9371, -0.2561,
               0.7051,  0.4291, -0.3376,  0.2610, -0.1568, -0.2892,  0.0949,
               0.8594,  0.1345,  0.2984, -0.4042,  0.2696, -0.2691, -0.9508,
              -0.3326, -0.2976,  0.1187,  0.4126,  0.2104, -0.2641,  0.2680,
               0.2123, -0.2074, -0.0420, -0.5621, -0.3021, -0.3103, -0.9228,
              -0.3384, -1.2835,  0.4098, -0.4705, -0.4413,  0.2287,  0.0862,
               0.8377,  0.0140, -0.0806,  0.3419, -0.4055,  0.2636,  0.3971,
               0.2098, -0.0975, -0.1704,  0.6510, -0.3461, -0.4478,  0.2844,
               0.0020, -0.5666,  0.6822, -0.1628,  1.0862, -0.7545, -0.3255,
               1.2052, -0.5406,  0.6260, -0.3469,  0.5346,  0.7426,  0.4332,
              -0.7424,  0.1831, -0.7065, -0.8279, -0.0189, -0.0517,  0.1647,
               0.4265,  0.3683, -0.3249, -0.5826,  0.2255, -0.2326,  0.1882,
               0.4996, -0.9335, -0.4515,  0.2670,  0.3079, -0.1537,  0.4036,
               0.0907,  0.0313,  0.1925,  0.4538,  0.2105, -0.0880, -0.4030,
               0.8134, -0.1290],
             [ 0.7883, -0.7565, -0.2704,  0.0118, -0.0181,  0.3309,  0.0552,
              -0.3570, -0.1223,  0.4373, -0.3502,  0.2717,  0.0995, -0.2070,
              -0.0599,  0.3098, -0.1789, -0.4226, -0.5736, -0.6508, -0.3568,
              -0.7126, -0.2170, -0.4075, -0.5824, -0.4171, -1.0360, -0.5195,
              -0.3551,  0.0148,  0.4019, -0.1737,  0.2064,  1.2627, -0.3196,
               0.2266,  0.4013, -0.2076,  0.1153, -0.1397, -0.3393,  0.1201,
               0.5462,  0.2516, -0.0463, -0.2363,  0.2685, -0.1784, -0.4721,
              -0.4690,  0.2544,  0.2174,  0.3212,  0.0666, -0.1680,  0.1036,
               0.2201,  0.1458,  0.0550, -0.3828, -0.3383, -0.1516, -0.8223,
              -0.0050, -0.8937,  0.5333, -0.9543, -0.3102,  0.1192,  0.1095,
               0.6890,  0.5133, -0.0455,  0.0966, -0.1937,  0.1132,  0.4336,
              -0.0049, -0.1029,  0.0658,  1.0563, -0.4480,  0.3236,  0.2687,
               0.0414, -0.6730,  0.6125,  0.0490,  0.7324, -0.7899,  0.1659,
               1.1332, -0.7195,  0.4650, -0.3756,  0.4835,  0.9124,  0.5401,
              -0.5348,  0.1716, -0.6009, -0.7126, -0.2171, -0.1855, -0.0030,
               0.3004,  0.4327, -0.3515, -0.3804,  0.1056, -0.1946,  0.1893,
               0.4987, -0.8313, -0.1817,  0.2140,  0.1490,  0.2501,  0.0908,
               0.1694, -0.0912,  0.0703,  0.3368,  0.2245, -0.0680, -0.3508,
               0.9222, -0.2369]]], grad_fn=<StackBackward>))
    


```python
device = 'cpu'
model = part3.RNNModel(rnn_layer, vocab_size).to(device)
part3.predict_rnn_pytorch(['运动'], 10, model, vocab_size, device, idx_to_char, char_to_idx)
```




    '运动=>写日记=>写日记=>写日记=>写日记=>写日记=>写日记=>写日记=>写日记=>写日记=>写日记'



### 3.2.3 模型训练


```python
rnn_layer = nn.LSTM(input_size=vocab_size, hidden_size=num_hiddens)
model = part3.RNNModel(rnn_layer, vocab_size).to(device)
num_epochs, batch_size, lr, clipping_theta = 100, 64, 1e-2, 1e-2
print_num = 10
pred_period = num_epochs / print_num
pred_len, prefixes = 15, [
    ['华尔街日报'], 
    ['晚饭'], 
    ['摄影'], 
    ['接单工作'], 
    ['gis'],
    ['量化'], 
    ['玩游戏'],
]
part3.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device,
    corpus_indices, idx_to_char, char_to_idx,
    num_epochs, num_steps, lr, clipping_theta,
    batch_size, pred_period, pred_len, prefixes
)
```

     10%|█         | 10/100 [00:08<01:19,  1.13it/s]

     - 华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>写日记
     - 晚饭=>人文课=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课
     - 摄影=>磨蹭=>接单工作=>磨蹭=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课
     - 接单工作=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课=>午休=>玩游戏=>人文书籍
     - gis=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课=>午休=>玩游戏=>人文书籍
     - 量化=>玩游戏=>接单工作=>磨蹭=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课
     - 玩游戏=>量化=>磨蹭=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>写日记=>华尔街日报=>运动=>晚饭=>人文课=>午休
    

     20%|██        | 20/100 [00:17<01:10,  1.13it/s]

     - 华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭
     - 晚饭=>人文课=>磨蹭=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>晚饭
     - 摄影=>磨蹭=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化
     - 接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>人文书籍=>晚饭=>人文课=>接单工作
     - gis=>玩游戏=>量化=>磨蹭=>运动=>算法课程=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休
     - 量化=>磨蹭=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>晚饭=>人文课
     - 玩游戏=>量化=>磨蹭=>运动=>磨蹭=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     30%|███       | 30/100 [00:26<01:00,  1.16it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>人工智能=>玩游戏=>算法课程=>午饭=>午休=>人文书籍=>实变=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭=>运动=>晚饭
     - 摄影=>磨蹭=>运动=>听力=>晚饭=>接单工作=>口语=>写日记=>量化=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>算法课程=>磨蹭=>运动=>晚饭=>人文课
     - gis=>玩游戏=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>算法课程=>磨蹭=>运动
     - 量化=>玩游戏=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭=>运动=>晚饭
     - 玩游戏=>人文书籍=>量化=>磨蹭=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     40%|████      | 40/100 [00:34<00:52,  1.14it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>python=>玩游戏=>毕业论文=>午饭=>午休=>人文书籍=>泛函=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>接单工作=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>华尔街日报=>磨蹭=>人文书籍=>量化=>算法课程=>磨蹭
     - 摄影=>磨蹭=>运动=>听力=>接单工作=>晚饭=>接单工作=>磨蹭=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>算法课程=>磨蹭=>运动=>晚饭=>人文课
     - gis=>量化=>玩游戏=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>磨蹭=>运动
     - 量化=>磨蹭=>接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>磨蹭=>运动=>晚饭
     - 玩游戏=>人文书籍=>量化=>算法课程=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     50%|█████     | 50/100 [00:43<00:43,  1.15it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>人工智能=>玩游戏=>算法课程=>午饭=>午休=>人文书籍=>磨蹭=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>单词=>磨蹭=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>磨蹭=>人文书籍=>量化=>算法课程=>晚饭
     - 摄影=>磨蹭=>运动=>听力=>接单工作=>晚饭=>接单工作=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动=>听力
     - 接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>磨蹭=>运动=>晚饭=>人文课=>玩游戏
     - gis=>量化=>玩游戏=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>磨蹭=>运动
     - 量化=>磨蹭=>单词=>磨蹭=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>磨蹭=>人文书籍=>量化=>算法课程=>晚饭
     - 玩游戏=>人文书籍=>量化=>算法课程=>晚饭=>人文课=>接单工作=>磨蹭=>人文课=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     60%|██████    | 60/100 [00:52<00:35,  1.12it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>python=>玩游戏=>毕业论文=>午饭=>午休=>人文书籍=>泛函=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>单词=>写日记=>华尔街日报=>玩游戏=>运动=>午饭=>午休=>人文书籍=>磨蹭=>华尔街日报=>磨蹭=>运动=>晚饭=>磨蹭
     - 摄影=>磨蹭=>运动=>听力=>接单工作=>晚饭=>接单工作=>口语=>写日记=>量化=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭
     - 接单工作=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>量化=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程=>磨蹭=>运动
     - gis=>量化=>玩游戏=>量化=>写日记=>量化=>华尔街日报=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程=>磨蹭
     - 量化=>磨蹭=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>磨蹭=>运动=>晚饭
     - 玩游戏=>人文书籍=>量化=>算法课程=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     70%|███████   | 70/100 [01:00<00:26,  1.12it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>python=>玩游戏=>毕业论文=>午饭=>午休=>人文书籍=>泛函=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>午休=>量化=>玩游戏=>摄影=>写报告=>运动=>人文书籍=>晚饭=>人文课=>玩游戏=>摄影=>磨蹭=>写日记=>华尔街日报
     - 摄影=>磨蹭=>运动=>听力=>接单工作=>晚饭=>接单工作=>写日记=>接单工作=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>玩游戏=>午饭=>午休=>华尔街日报=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程=>磨蹭=>运动=>晚饭=>人文课
     - gis=>量化=>磨蹭=>量化=>写日记=>量化=>华尔街日报=>磨蹭=>午饭=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>运动=>晚饭
     - 量化=>磨蹭=>人工智能=>写日记=>华尔街日报=>运动=>磨蹭=>午饭=>午休=>磨蹭=>人文书籍=>量化=>算法课程=>磨蹭=>运动=>晚饭
     - 玩游戏=>人文书籍=>量化=>算法课程=>晚饭=>人文课=>接单工作=>磨蹭=>人文课=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     80%|████████  | 80/100 [01:10<00:18,  1.06it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>量化=>写日记=>单词=>玩游戏=>算法课程=>午饭=>午休=>磨蹭=>人文书籍=>单词=>华尔街日报
     - 晚饭=>磨蹭=>午休=>量化=>玩游戏=>写报告=>摄影=>写报告=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动
     - 摄影=>磨蹭=>运动=>听力=>接单工作=>晚饭=>接单工作=>写日记=>接单工作=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>晚饭=>玩游戏=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休
     - gis=>写作视频=>磨蹭=>量化=>玩游戏=>量化=>晚饭=>人文课=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休
     - 量化=>磨蹭=>人工智能=>写日记=>运动=>磨蹭=>华尔街日报=>写日记=>运动=>磨蹭=>华尔街日报=>写日记=>运动=>磨蹭=>华尔街日报=>写日记
     - 玩游戏=>人文书籍=>机器学习=>接单工作=>晚饭=>人文课=>接单工作=>磨蹭=>人文课=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
    

     90%|█████████ | 90/100 [01:18<00:08,  1.16it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>磨蹭=>随机微积分=>写日记=>算法课程=>玩游戏=>毕业论文=>午饭=>午休=>人文书籍=>实变=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>午休=>磨蹭=>量化=>玩游戏=>摄影=>运动=>摄影=>晚饭=>摄影=>磨蹭=>深度学习=>写日记=>华尔街日报=>午饭
     - 摄影=>口语=>运动=>午饭=>量化=>磨蹭=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>摄影=>磨蹭=>运动=>人文书籍=>磨蹭
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>晚饭=>玩游戏=>接单工作=>洗漱=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍
     - gis=>写作视频=>量化=>写日记=>华尔街日报=>磨蹭=>午饭=>午休=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程=>磨蹭=>运动=>晚饭
     - 量化=>磨蹭=>人工智能=>写日记=>华尔街日报=>运动=>午饭=>午休=>磨蹭=>人文书籍=>量化=>磨蹭=>算法课程=>晚饭=>散步=>人文课
     - 玩游戏=>人文书籍=>量化=>算法课程=>运动=>晚饭=>接单工作=>磨蹭=>接单工作=>写日记=>华尔街日报=>运动=>午饭=>午休=>玩游戏=>人文书籍
    

    100%|██████████| 100/100 [01:28<00:00,  1.13it/s]

     - 华尔街日报=>晚饭=>磨蹭=>单词=>人文课=>随机微积分=>写日记=>python=>玩游戏=>毕业论文=>午饭=>午休=>人文书籍=>实变=>华尔街日报=>晚饭
     - 晚饭=>磨蹭=>午休=>python=>玩游戏=>写日记=>写报告=>运动=>写报告=>午饭=>午休=>磨蹭=>人文书籍=>量化=>摄影=>磨蹭
     - 摄影=>口语=>运动=>午饭=>量化=>磨蹭=>写日记=>量化=>华尔街日报=>午饭=>磨蹭=>午休=>玩游戏=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>玩游戏=>接单工作=>洗漱=>图神经网络=>午饭=>午休=>玩游戏=>人文书籍
     - gis=>写作视频=>量化=>写日记=>量化=>磨蹭=>摄影=>午饭=>午休=>玩游戏=>人文书籍=>量化=>数据分析=>运动=>晚饭=>人文书籍
     - 量化=>磨蹭=>人工智能=>写日记=>随机微积分=>玩游戏=>做家务=>算法课程=>午饭=>午休=>人文书籍=>磨蹭=>华尔街日报=>磨蹭=>量化=>磨蹭
     - 玩游戏=>人文书籍=>爬虫=>摄影=>接单工作=>晚饭=>人文课=>机器学习=>运动=>磨蹭=>量化=>写日记=>华尔街日报=>运动=>午饭=>人文课
    

    
    


```python
rnn_layer = nn.GRU(input_size=vocab_size, hidden_size=num_hiddens)
model = part3.RNNModel(rnn_layer, vocab_size).to(device)
num_epochs, batch_size, lr, clipping_theta = 100, 64, 1e-2, 1e-2
print_num = 10
pred_period = num_epochs / print_num
pred_len, prefixes = 15, [
    ['华尔街日报'], 
    ['晚饭'], 
    ['接单工作'], 
    ['托福听力'], 
    ['磨蹭'],
    ['写日记']
]
part3.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device,
    corpus_indices, idx_to_char, char_to_idx,
    num_epochs, num_steps, lr, clipping_theta,
    batch_size, pred_period, pred_len, prefixes
)
```

     10%|█         | 10/100 [00:07<01:10,  1.27it/s]

     - 华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭
     - 晚饭=>散步=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>午饭
     - 接单工作=>洗漱=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>午饭=>人文课=>午休
     - 托福听力=>课=>磨蹭=>写日记=>华尔街日报=>磨蹭=>午饭=>午休=>玩游戏=>人文书籍=>磨蹭=>华尔街日报=>磨蹭=>午饭=>午休=>玩游戏
     - 磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏
     - 写日记=>华尔街日报=>运动=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍
    

     20%|██        | 20/100 [00:14<00:59,  1.35it/s]

     - 华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>人文书籍=>晚饭=>人文书籍=>玩游戏=>接单工作=>磨蹭
     - 晚饭=>散步=>接单工作=>磨蹭=>接单工作=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭=>运动=>晚饭=>人文课=>接单工作=>磨蹭=>写日记
     - 托福听力=>课=>磨蹭=>托福听力=>磨蹭=>晚饭=>托福口语=>磨蹭=>托福口语=>托福写作=>写日记=>托福听力=>托福听力=>磨蹭=>托福口语=>磨蹭
     - 磨蹭=>写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>人文书籍=>晚饭=>人文书籍=>玩游戏
     - 写日记=>华尔街日报=>运动=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>磨蹭=>运动=>人文书籍=>晚饭=>人文书籍=>玩游戏=>摄影
    

     30%|███       | 30/100 [00:22<00:54,  1.28it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>华尔街日报=>运动=>晚饭=>人文课=>玩游戏=>接单工作=>磨蹭
     - 晚饭=>散步=>接单工作=>磨蹭=>接单工作=>写日记=>华尔街日报=>运动=>午饭=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭=>运动
     - 接单工作=>写日记=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>算法课程=>磨蹭=>运动=>晚饭=>人文课=>玩游戏=>接单工作=>磨蹭
     - 托福听力=>订酒店=>写日记=>单词=>磨蹭=>GRE填空=>磨蹭=>GRE填空=>磨蹭=>GRE填空=>午饭=>单词=>午休=>磨蹭=>GRE填空=>磨蹭
     - 磨蹭=>写日记=>华尔街日报=>玩游戏=>运动=>华尔街日报=>午饭=>午休=>磨蹭=>华尔街日报=>磨蹭=>随机微积分=>写日记=>人工智能=>玩游戏=>算法课程
     - 写日记=>华尔街日报=>磨蹭=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>算法课程=>磨蹭=>运动=>晚饭=>人文课=>玩游戏=>接单工作
    

     40%|████      | 40/100 [00:29<00:45,  1.33it/s]

     - 华尔街日报=>运动=>磨蹭=>午饭=>午休=>磨蹭=>人文书籍=>量化=>华尔街日报=>磨蹭=>运动=>晚饭=>磨蹭=>接单工作=>磨蹭=>写日记
     - 晚饭=>散步=>接单工作=>磨蹭=>写日记=>华尔街日报=>做家务=>午饭=>人文课=>午休=>玩游戏=>人文书籍=>量化=>玩游戏=>摄影=>磨蹭
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>磨蹭=>人文课=>磨蹭=>linux=>磨蹭=>写日记=>华尔街日报=>运动
     - 托福听力=>订酒店=>写日记=>磨蹭=>单词=>玩游戏=>单词=>磨蹭=>午饭=>单词=>午休=>磨蹭=>单词=>磨蹭=>GRE阅读=>晚饭
     - 磨蹭=>运动=>磨蹭=>晚饭=>人文课=>磨蹭=>大数据=>磨蹭=>写日记=>华尔街日报=>做家务=>午饭=>人文课=>午休=>磨蹭=>量化
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>运动=>科四=>玩游戏=>摄影=>晚饭=>接单工作=>写日记
    

     50%|█████     | 50/100 [00:37<00:39,  1.27it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>人文书籍=>磨蹭=>华尔街日报=>磨蹭=>运动=>晚饭=>人文课=>玩游戏=>接单工作=>磨蹭
     - 晚饭=>散步=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动=>午饭=>午休=>玩游戏=>人文书籍=>量化=>摄影=>磨蹭=>运动=>晚饭
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>磨蹭=>人文课=>磨蹭=>接单工作=>磨蹭=>写日记=>华尔街日报=>运动
     - 托福听力=>安装软件=>运动=>磨蹭=>午饭=>午休=>磨蹭=>量化=>磨蹭=>量化=>磨蹭=>晚饭=>散步=>接单工作=>写日记=>华尔街日报
     - 磨蹭=>运动=>磨蹭=>晚饭=>人文课=>磨蹭=>大数据=>磨蹭=>写日记=>华尔街日报=>做家务=>午饭=>人文课=>午休=>磨蹭=>量化
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程=>晚饭=>散步=>华尔街日报=>磨蹭
    

     60%|██████    | 60/100 [00:44<00:29,  1.33it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>玩游戏=>人文书籍=>量化=>算法课程=>磨蹭=>运动=>晚饭=>人文课=>接单工作=>磨蹭
     - 晚饭=>磨蹭=>接单工作=>磨蹭=>写日记=>接单工作=>磨蹭=>华尔街日报=>写日记=>华尔街日报=>运动=>华尔街日报=>午饭=>午休=>玩游戏=>量化
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>磨蹭=>接单工作=>磨蹭=>接单工作=>洗漱=>写日记=>华尔街日报=>赶车
     - 托福听力=>安装软件=>托福口语=>磨蹭=>托福听力=>磨蹭=>运动=>晚饭=>人文课=>磨蹭=>接单工作=>托福口语=>磨蹭=>写日记=>华尔街日报=>运动
     - 磨蹭=>运动=>磨蹭=>接单工作=>晚饭=>人文课=>接单工作=>洗漱=>写日记=>华尔街日报=>做家务=>华尔街日报=>午饭=>人文课=>午休=>华尔街日报
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>摄影=>磨蹭=>运动=>晚饭=>接单工作=>磨蹭=>写日记
    

     70%|███████   | 70/100 [00:52<00:23,  1.25it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>磨蹭=>人文书籍=>磨蹭=>量化=>算法课程=>晚饭=>散步=>人文课=>磨蹭=>写日记
     - 晚饭=>磨蹭=>接单工作=>磨蹭=>写日记=>华尔街日报=>做家务=>午饭=>磨蹭=>午休=>华尔街日报=>玩游戏=>人文书籍=>量化=>玩游戏=>算法课程
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>玩游戏=>人文课=>磨蹭=>摄影=>磨蹭=>写日记=>华尔街日报=>运动
     - 托福听力=>安装软件=>GRE填空=>磨蹭=>GRE填空=>磨蹭=>单词=>午饭=>磨蹭=>午休=>单词=>磨蹭=>GRE阅读=>磨蹭=>GRE阅读=>晚饭
     - 磨蹭=>运动=>接单工作=>晚饭=>人文课=>安装软件=>摄影=>磨蹭=>写日记=>华尔街日报=>运动=>磨蹭=>午饭=>人文课=>午休=>华尔街日报
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>摄影=>磨蹭=>运动=>晚饭=>接单工作=>磨蹭=>写日记
    

     80%|████████  | 80/100 [00:59<00:15,  1.32it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>磨蹭=>人文书籍=>华尔街日报=>运动=>华尔街日报=>晚饭=>人文课=>磨蹭=>随机微积分=>磨蹭
     - 晚饭=>磨蹭=>托福口语=>磨蹭=>托福写作=>写日记=>托福口语=>玩游戏=>练字=>单词=>午饭=>单词=>午休=>磨蹭=>托福写作=>磨蹭
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>玩游戏=>华尔街日报=>磨蹭=>接单工作=>写日记=>华尔街日报=>午饭=>人文课
     - 托福听力=>安装软件=>GRE填空=>磨蹭=>GRE填空=>磨蹭=>单词=>午饭=>磨蹭=>午休=>单词=>磨蹭=>GRE填空=>GRE阅读=>磨蹭=>晚饭
     - 磨蹭=>运动=>晚饭=>托福口语=>磨蹭=>洗漱=>托福听力=>写日记=>单词=>磨蹭=>托福听力=>GRE填空=>磨蹭=>午饭=>磨蹭=>午休
     - 写日记=>华尔街日报=>午饭=>量化=>午休=>量化=>玩游戏=>运动=>摄影=>磨蹭=>晚饭=>接单工作=>散步=>接单工作=>洗漱=>接单工作
    

     90%|█████████ | 90/100 [01:07<00:07,  1.28it/s]

     - 华尔街日报=>运动=>磨蹭=>人文课=>晚饭=>人文课=>磨蹭=>人文课=>人工智能=>写日记=>磨蹭=>玩游戏=>磨蹭=>运动=>磨蹭=>写日记
     - 晚饭=>磨蹭=>托福口语=>磨蹭=>托福听力=>课=>磨蹭=>托福写作=>磨蹭=>托福写作=>午饭=>磨蹭=>午休=>磨蹭=>托福写作=>玩游戏
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>晚饭=>玩游戏=>华尔街日报=>磨蹭=>运动=>接单工作=>洗漱=>写日记=>华尔街日报
     - 托福听力=>安装软件=>GRE填空=>磨蹭=>GRE填空=>磨蹭=>单词=>午饭=>磨蹭=>午休=>单词=>玩游戏=>GRE阅读=>玩游戏=>单词=>玩游戏
     - 磨蹭=>运动=>磨蹭=>晚饭=>gis=>洗漱=>托福听力=>安装软件=>写日记=>华尔街日报=>运动=>午饭=>午休=>量化=>玩游戏=>gis
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>磨蹭=>量化=>磨蹭=>运动=>接单工作=>晚饭=>人文课
    

    100%|██████████| 100/100 [01:14<00:00,  1.34it/s]

     - 华尔街日报=>运动=>磨蹭=>华尔街日报=>午饭=>午休=>磨蹭=>人文课=>磨蹭=>托福听力=>磨蹭=>运动=>人文书籍=>晚饭=>人文课=>接单工作
     - 晚饭=>磨蹭=>托福口语=>磨蹭=>托福听力=>课=>磨蹭=>银行会计=>午饭=>磨蹭=>午休=>单词=>磨蹭=>银行会计=>磨蹭=>晚饭
     - 接单工作=>写日记=>华尔街日报=>赶车=>午饭=>科三=>玩游戏=>数值分析=>晚饭=>磨蹭=>人文书籍=>磨蹭=>人文课=>运动=>磨蹭=>写日记
     - 托福听力=>安装软件=>托福口语=>玩游戏=>磨蹭=>托福听力=>午饭=>磨蹭=>午休=>磨蹭=>托福写作=>玩游戏=>托福写作=>磨蹭=>托福听力=>晚饭
     - 磨蹭=>运动=>晚饭=>接单工作=>洗漱=>写日记=>华尔街日报=>做家务=>午饭=>午休=>量化=>玩游戏=>人文书籍=>购物=>gis=>摄影
     - 写日记=>华尔街日报=>磨蹭=>量化=>午饭=>午休=>量化=>玩游戏=>人文书籍=>写报告=>玩游戏=>运动=>晚饭=>接单工作=>磨蹭=>写日记
    

    
    

## 3.3 时长数据的简单聚类


```python
part = '3.3'

dates = pd.DataFrame(
    pd.date_range(
    start='2022-01-01',
    end='2022-12-31'
).astype(str), columns=['date']
)

data = pd.merge(
    dates, daily_attr[num_vars + ['date']], on='date', how='left'
)
```


```python
mergings = linkage(data.drop('date', axis=1).dropna())
plt.figure(figsize=(20, 10))
dendrogram(
    mergings,
    leaf_rotation=90,
    leaf_font_size=10, 
)
plt.yticks(fontsize=20)
title = f'{part} 2022时长数据层次聚类图'
plt.title(title, fontsize=10)
plt.savefig(os.path.join(path, f'{title}.png'), dpi=100)
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_156_0.png)
    


## 3.4 关于日期的缺失值处理


```python
# 对日度数据做处理 只分析2022年
part = '3.4'

# 生成新特征
data['weekday'] = pd.to_datetime(data['date']).dt.weekday + 1
data['month'] = data['date'].apply(lambda x:str(x).split('-')[1])
data['day'] = data['date'].apply(lambda x:str(x).split('-')[2])
data['week_order'] = data['date'].map(lambda x: pd.Period(x, freq='W'))

data.set_index('date')[num_vars].plot(
    figsize=(20, 10)
)

title = '各类时长每日总和的折线图'
plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Sum of duration', fontsize=20)
plt.yticks(fontsize=20)
plt.xticks(fontsize=20)
plt.legend(loc=1, fontsize=20)

print('缺失的行数有', data['有效时间'].isnull().sum())
```

    缺失的行数有 39
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_158_1.png)
    



```python
# 采样三次样条处理缺失
for col in data.columns:
    if '时间' in col:
        upper, lower = data[col].max(), data[col].min()
        data[col] = data[col].interpolate(method='spline', order=3)
        # 避免插值结果太超过想象
        data[col] = np.where(abs(data[col]) > upper, upper, data[col])
        data[col] = np.where(data[col] < lower, lower, data[col])
data = data.fillna(axis=0, method='bfill') 


title = f'{part} 处理缺失后的每日时长总和图'
data.set_index('date')[num_vars].plot(
    figsize=(20, 10), title=title
)

plt.title(title, fontsize=20)
plt.xlabel('Date', fontsize=20)
plt.ylabel('Sum of duration', fontsize=20)
plt.yticks(fontsize=20)
plt.xticks(fontsize=20)
plt.legend(loc=1, fontsize=20)

file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100) 

print('缺失的行数有', data['有效时间'].isnull().sum())
```

    缺失的行数有 0
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_159_1.png)
    


## 3.5 关于日期的傅里叶分解求周期


```python
part = '3.5'
```


```python
# 有效时间
part3.FRT(data, '有效时间', part, path)
```




    array([240.94117647,  22.50549451,  74.47272727])




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_162_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_162_2.png)
    



```python
# 浪费时间
part3.FRT(data, '浪费时间', part, path)
```




    array([292.57142857,  62.06060606,   7.83173996])




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_163_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_163_2.png)
    



```python
# 必要时间
part3.FRT(data, '必要时间', part, path)
```




    array([273.06666667,  73.14285714,  33.03225806])




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_164_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_164_2.png)
    



```python
# 手机时间
part3.FRT(data, '手机时间', part, path)
```




    array([240.94117647,  56.10958904,  91.02222222])




    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_165_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_165_2.png)
    


## 3.6 关于日期的传统时间序列分析

### 3.6.1 ARIMA分析


```python
part = '3.6.1'
```


```python
# 4类时间的ARIMA分析
arima_dict = {}
for col in num_vars:
    try:
        arima_dict[col] = part3.ARIMA_auto(data.set_index('date')[col], col, part, path)
    except:
        continue
```

    有效时间 cannot be assumed to be normally distributed
    有效时间 is stationary
    There exists strong ARCH effect for 有效时间
    浪费时间 cannot be assumed to be normally distributed
    浪费时间 is stationary
    There does not exist strong ARCH effect for 浪费时间
    必要时间 cannot be assumed to be normally distributed
    必要时间 is stationary
    There exists strong ARCH effect for 必要时间
    手机时间 cannot be assumed to be normally distributed
    手机时间 is stationary
    There exists strong ARCH effect for 手机时间
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_2.png)
    



    <Figure size 2000x1000 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_5.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_6.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_7.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_8.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_9.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_10.png)
    



    <Figure size 2000x1000 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_12.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_13.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_14.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_15.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_16.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_17.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_18.png)
    



    <Figure size 2000x1000 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_20.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_21.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_22.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_23.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_24.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_25.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_26.png)
    



    <Figure size 2000x1000 with 0 Axes>



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_28.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_29.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_30.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_31.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_169_32.png)
    


### 3.6.2 GARCH分析


```python
part = '3.6.2'
```


```python
# 检验是否存在GARCH效应
arch_p_dict = {
    k: v.arch_p for k, v in arima_dict.items() 
}
print(arch_p_dict)
```

    {'有效时间': 0.021997358177511955, '浪费时间': 0.9566360308417694, '必要时间': 4.95044090021372e-06, '手机时间': 1.2896328692649677e-79}
    


```python
# 对存在GARCH效应的序列做GARCH建模
for name, p in arch_p_dict.items():
    if p < 0.05:
        try:
            part3.garch_auto(
                data.set_index('date')[name], 
                name, 
                arima_dict[name].arima_order,
                part,
                path
            ) 
        except:
            continue
```

    Iteration:      1,   Func. Count:      7,   Neg. LLF: 6269.310523439657
    Iteration:      2,   Func. Count:     17,   Neg. LLF: 2154.782076692604
    Iteration:      3,   Func. Count:     25,   Neg. LLF: 2144.652821191996
    Iteration:      4,   Func. Count:     32,   Neg. LLF: 2138.3088061456447
    Iteration:      5,   Func. Count:     38,   Neg. LLF: 2138.3080023652765
    Iteration:      6,   Func. Count:     45,   Neg. LLF: 2138.3049455728647
    Iteration:      7,   Func. Count:     51,   Neg. LLF: 2138.3038436897746
    Iteration:      8,   Func. Count:     57,   Neg. LLF: 2138.2967330716533
    Iteration:      9,   Func. Count:     63,   Neg. LLF: 2138.2635543042798
    Iteration:     10,   Func. Count:     69,   Neg. LLF: 2138.2307729779413
    Iteration:     11,   Func. Count:     75,   Neg. LLF: 2138.202197497066
    Iteration:     12,   Func. Count:     81,   Neg. LLF: 2138.1927960584208
    Iteration:     13,   Func. Count:     87,   Neg. LLF: 2138.19154195114
    Iteration:     14,   Func. Count:     93,   Neg. LLF: 2138.191511953016
    Iteration:     15,   Func. Count:     99,   Neg. LLF: 2138.1915119575747
    Optimization terminated successfully    (Exit mode 0)
                Current function value: 2138.1915118169045
                Iterations: 15
                Function evaluations: 100
                Gradient evaluations: 15
    <bound method ARCHModelResult.summary of                            AR - GARCH Model Results                           
    ==============================================================================
    Dep. Variable:                   有效时间   R-squared:                       0.316
    Mean Model:                        AR   Adj. R-squared:                  0.314
    Vol Model:                      GARCH   Log-Likelihood:               -2138.19
    Distribution:                  Normal   AIC:                           4286.38
    Method:            Maximum Likelihood   BIC:                           4305.87
                                            No. Observations:                  364
    Date:                Sat, Dec 31 2022   Df Residuals:                      362
    Time:                        08:38:41   Df Model:                            2
                                     Mean Model                                 
    ============================================================================
                     coef    std err          t      P>|t|      95.0% Conf. Int.
    ----------------------------------------------------------------------------
    Const        175.4057     20.679      8.482  2.205e-17 [1.349e+02,2.159e+02]
    有效时间[1]        0.5863  4.702e-02     12.469  1.101e-35     [  0.494,  0.678]
                                  Volatility Model                              
    ============================================================================
                     coef    std err          t      P>|t|      95.0% Conf. Int.
    ----------------------------------------------------------------------------
    omega       3933.5575    819.890      4.798  1.605e-06 [2.327e+03,5.541e+03]
    alpha[1]       0.2804  6.464e-02      4.338  1.438e-05     [  0.154,  0.407]
    beta[1]        0.2174      0.109      2.002  4.534e-02   [4.513e-03,  0.430]
    ============================================================================
    
    Covariance estimator: robust
    ARCHModelResult, id: 0x2a7d364edd8>
    Iteration:      1,   Func. Count:      8,   Neg. LLF: 16330.379708835022
    Iteration:      2,   Func. Count:     19,   Neg. LLF: 2576.8910205559955
    Iteration:      3,   Func. Count:     28,   Neg. LLF: 2170.188288583293
    Iteration:      4,   Func. Count:     36,   Neg. LLF: 2151.2122468169036
    Iteration:      5,   Func. Count:     44,   Neg. LLF: 2142.142319540388
    Iteration:      6,   Func. Count:     52,   Neg. LLF: 2142.1066715275138
    Iteration:      7,   Func. Count:     59,   Neg. LLF: 2142.105736183633
    Iteration:      8,   Func. Count:     66,   Neg. LLF: 2142.1053897052275
    Iteration:      9,   Func. Count:     73,   Neg. LLF: 2142.103174330545
    Iteration:     10,   Func. Count:     80,   Neg. LLF: 2142.095479099141
    Iteration:     11,   Func. Count:     87,   Neg. LLF: 2142.087717704193
    Iteration:     12,   Func. Count:     94,   Neg. LLF: 2142.079267931983
    Iteration:     13,   Func. Count:    101,   Neg. LLF: 2142.0763731789116
    Iteration:     14,   Func. Count:    108,   Neg. LLF: 2142.0760173999943
    Iteration:     15,   Func. Count:    115,   Neg. LLF: 2142.076004195926
    Iteration:     16,   Func. Count:    121,   Neg. LLF: 2142.076004195932
    Optimization terminated successfully    (Exit mode 0)
                Current function value: 2142.076004195926
                Iterations: 16
                Function evaluations: 121
                Gradient evaluations: 16
    <bound method ARCHModelResult.summary of                            AR - GARCH Model Results                           
    ==============================================================================
    Dep. Variable:                   必要时间   R-squared:                       0.352
    Mean Model:                        AR   Adj. R-squared:                  0.348
    Vol Model:                      GARCH   Log-Likelihood:               -2142.08
    Distribution:                  Normal   AIC:                           4296.15
    Method:            Maximum Likelihood   BIC:                           4319.52
                                            No. Observations:                  363
    Date:                Sat, Dec 31 2022   Df Residuals:                      360
    Time:                        08:38:42   Df Model:                            3
                                     Mean Model                                
    ===========================================================================
                     coef    std err          t      P>|t|     95.0% Conf. Int.
    ---------------------------------------------------------------------------
    Const        109.9972     14.801      7.432  1.071e-13  [ 80.988,1.390e+02]
    必要时间[1]        0.5289  6.262e-02      8.447  2.982e-17    [  0.406,  0.652]
    必要时间[2]        0.1025  5.337e-02      1.920  5.480e-02 [-2.109e-03,  0.207]
                                   Volatility Model                              
    =============================================================================
                     coef    std err          t      P>|t|       95.0% Conf. Int.
    -----------------------------------------------------------------------------
    omega       4273.4671   2736.789      1.561      0.118 [-1.091e+03,9.637e+03]
    alpha[1]       0.2507      0.111      2.262  2.367e-02    [3.351e-02,  0.468]
    beta[1]        0.2275      0.428      0.532      0.595      [ -0.610,  1.066]
    =============================================================================
    
    Covariance estimator: robust
    ARCHModelResult, id: 0x2a850459f28>
    Iteration:      1,   Func. Count:      6,   Neg. LLF: 1374.7995148908653
    Iteration:      2,   Func. Count:     13,   Neg. LLF: 1368.6555143284138
    Iteration:      3,   Func. Count:     19,   Neg. LLF: 1369.293325333218
    Iteration:      4,   Func. Count:     26,   Neg. LLF: 1361.853736781287
    Iteration:      5,   Func. Count:     31,   Neg. LLF: 1361.853731038455
    Iteration:      6,   Func. Count:     36,   Neg. LLF: 1361.8536955205109
    Iteration:      7,   Func. Count:     41,   Neg. LLF: 1361.8535095463733
    Iteration:      8,   Func. Count:     46,   Neg. LLF: 1361.8528199929258
    Iteration:      9,   Func. Count:     51,   Neg. LLF: 1361.852484411376
    Iteration:     10,   Func. Count:     56,   Neg. LLF: 1361.8524334618219
    Iteration:     11,   Func. Count:     61,   Neg. LLF: 1361.852423581338
    Iteration:     12,   Func. Count:     65,   Neg. LLF: 1361.852423581367
    Optimization terminated successfully    (Exit mode 0)
                Current function value: 1361.852423581338
                Iterations: 12
                Function evaluations: 65
                Gradient evaluations: 12
    <bound method ARCHModelResult.summary of                            AR - GARCH Model Results                           
    ==============================================================================
    Dep. Variable:                   手机时间   R-squared:                       0.000
    Mean Model:                        AR   Adj. R-squared:                  0.000
    Vol Model:                      GARCH   Log-Likelihood:               -1361.85
    Distribution:                  Normal   AIC:                           2731.70
    Method:            Maximum Likelihood   BIC:                           2747.30
                                            No. Observations:                  365
    Date:                Sat, Dec 31 2022   Df Residuals:                      364
    Time:                        08:38:44   Df Model:                            1
                                   Mean Model                               
    ========================================================================
                     coef    std err          t      P>|t|  95.0% Conf. Int.
    ------------------------------------------------------------------------
    Const         23.3034      0.719     32.389 3.875e-230 [ 21.893, 24.714]
                                  Volatility Model                             
    ===========================================================================
                     coef    std err          t      P>|t|     95.0% Conf. Int.
    ---------------------------------------------------------------------------
    omega         51.9663     24.923      2.085  3.706e-02  [  3.118,1.008e+02]
    alpha[1]       0.2346      0.130      1.803  7.133e-02 [-2.037e-02,  0.490]
    beta[1]        0.2773      0.314      0.884      0.377    [ -0.338,  0.892]
    ===========================================================================
    
    Covariance estimator: robust
    ARCHModelResult, id: 0x2a7d2c99da0>
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_173_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_173_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_173_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_173_4.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_173_5.png)
    


### 3.6.3 VAR分析


```python
part = '3.6.3'
```


```python
price_vol_int_var = part3.VAR(data[list(arima_dict.keys())], arima_dict, part, path)
price_vol_int_var.impulse_responses()
price_vol_int_var.variance_decompositon()
```

                                      Statespace Model Results                                  
    ============================================================================================
    Dep. Variable:     ['有效时间', '浪费时间', '必要时间', '手机时间']   No. Observations:                  365
    Model:                                   VARMA(1,3)   Log Likelihood               -7339.791
                                            + intercept   AIC                          14835.583
    Date:                              Sat, 31 Dec 2022   BIC                          15139.775
    Time:                                      08:50:01   HQIC                         14956.473
    Sample:                                           0                                         
                                                  - 365                                         
    Covariance Type:                                opg                                         
    ================================================================================================
    Ljung-Box (L1) (Q):     0.02, 0.01, 0.14, 0.00   Jarque-Bera (JB):   7.84, 106.59, 400.90, 18.74
    Prob(Q):                0.89, 0.92, 0.71, 0.97   Prob(JB):                0.02, 0.00, 0.00, 0.00
    Heteroskedasticity (H): 0.57, 0.83, 0.32, 0.94   Skew:                  -0.35, 0.80, -1.18, 0.36
    Prob(H) (two-sided):    0.00, 0.31, 0.00, 0.75   Kurtosis:                2.82, 5.11, 7.56, 3.85
                              Results for equation 有效时间                           
    ==============================================================================
                     coef    std err          z      P>|z|      [0.025      0.975]
    ------------------------------------------------------------------------------
    intercept    267.4229    427.298      0.626      0.531    -570.066    1104.912
    L1.有效时间        0.5061      0.725      0.698      0.485      -0.915       1.928
    L1.浪费时间        0.0145      1.203      0.012      0.990      -2.344       2.373
    L1.必要时间       -0.1409      0.351     -0.401      0.688      -0.829       0.548
    L1.手机时间       -0.8021      2.056     -0.390      0.696      -4.832       3.228
    L1.e(有效时间)    -0.0496      0.724     -0.069      0.945      -1.468       1.369
    L1.e(浪费时间)     0.2241      1.253      0.179      0.858      -2.233       2.681
    L1.e(必要时间)     0.0764      0.356      0.215      0.830      -0.621       0.774
    L1.e(手机时间)     0.1456      2.182      0.067      0.947      -4.130       4.421
    L2.e(有效时间)     0.0301      0.270      0.111      0.911      -0.500       0.560
    L2.e(浪费时间)    -0.0730      0.371     -0.197      0.844      -0.800       0.654
    L2.e(必要时间)     0.0614      0.138      0.445      0.656      -0.209       0.332
    L2.e(手机时间)     0.1548      1.039      0.149      0.882      -1.883       2.192
    L3.e(有效时间)    -0.1338      0.206     -0.650      0.516      -0.538       0.270
    L3.e(浪费时间)     0.0260      0.200      0.130      0.897      -0.366       0.418
    L3.e(必要时间)    -0.0316      0.102     -0.309      0.757      -0.232       0.169
    L3.e(手机时间)    -0.7039      0.821     -0.858      0.391      -2.313       0.905
                              Results for equation 浪费时间                           
    ==============================================================================
                     coef    std err          z      P>|z|      [0.025      0.975]
    ------------------------------------------------------------------------------
    intercept     60.2656    243.103      0.248      0.804    -416.208     536.739
    L1.有效时间        0.0516      0.409      0.126      0.900      -0.750       0.854
    L1.浪费时间       -0.0217      0.531     -0.041      0.967      -1.063       1.019
    L1.必要时间       -0.0019      0.199     -0.010      0.992      -0.392       0.388
    L1.手机时间        0.3888      1.220      0.319      0.750      -2.001       2.779
    L1.e(有效时间)    -0.0164      0.410     -0.040      0.968      -0.820       0.787
    L1.e(浪费时间)     0.2982      0.532      0.560      0.575      -0.745       1.342
    L1.e(必要时间)    -0.0285      0.201     -0.142      0.887      -0.422       0.365
    L1.e(手机时间)     0.0805      1.273      0.063      0.950      -2.414       2.575
    L2.e(有效时间)    -0.0476      0.157     -0.303      0.762      -0.356       0.261
    L2.e(浪费时间)     0.0804      0.151      0.533      0.594      -0.215       0.376
    L2.e(必要时间)    -0.0151      0.072     -0.211      0.833      -0.156       0.125
    L2.e(手机时间)     0.0352      0.480      0.073      0.942      -0.906       0.976
    L3.e(有效时间)    -0.0402      0.110     -0.364      0.716      -0.257       0.176
    L3.e(浪费时间)     0.0921      0.074      1.244      0.214      -0.053       0.237
    L3.e(必要时间)    -0.0386      0.048     -0.806      0.420      -0.132       0.055
    L3.e(手机时间)    -0.0221      0.320     -0.069      0.945      -0.650       0.606
                              Results for equation 必要时间                           
    ==============================================================================
                     coef    std err          z      P>|z|      [0.025      0.975]
    ------------------------------------------------------------------------------
    intercept    216.4896    479.839      0.451      0.652    -723.977    1156.956
    L1.有效时间       -0.3031      0.842     -0.360      0.719      -1.953       1.347
    L1.浪费时间        0.0550      1.524      0.036      0.971      -2.932       3.042
    L1.必要时间        0.7067      0.383      1.843      0.065      -0.045       1.458
    L1.手机时间       -0.2102      2.155     -0.098      0.922      -4.434       4.014
    L1.e(有效时间)     0.1361      0.840      0.162      0.871      -1.511       1.783
    L1.e(浪费时间)    -0.1325      1.530     -0.087      0.931      -3.131       2.866
    L1.e(必要时间)    -0.2656      0.390     -0.682      0.496      -1.029       0.498
    L1.e(手机时间)    -0.2649      2.445     -0.108      0.914      -5.056       4.526
    L2.e(有效时间)     0.2141      0.312      0.687      0.492      -0.396       0.825
    L2.e(浪费时间)    -0.0033      0.497     -0.007      0.995      -0.977       0.970
    L2.e(必要时间)    -0.0552      0.150     -0.369      0.712      -0.349       0.238
    L2.e(手机时间)     0.0637      1.255      0.051      0.960      -2.396       2.524
    L3.e(有效时间)     0.0819      0.261      0.314      0.753      -0.429       0.593
    L3.e(浪费时间)     0.1109      0.247      0.449      0.654      -0.373       0.595
    L3.e(必要时间)     0.0037      0.129      0.029      0.977      -0.248       0.256
    L3.e(手机时间)     0.4356      1.030      0.423      0.672      -1.583       2.454
                              Results for equation 手机时间                           
    ==============================================================================
                     coef    std err          z      P>|z|      [0.025      0.975]
    ------------------------------------------------------------------------------
    intercept     10.2827     46.834      0.220      0.826     -81.510     102.075
    L1.有效时间       -0.0235      0.088     -0.266      0.790      -0.196       0.149
    L1.浪费时间        0.0496      0.174      0.285      0.776      -0.292       0.391
    L1.必要时间       -0.0076      0.036     -0.210      0.834      -0.078       0.063
    L1.手机时间        0.8928      0.209      4.273      0.000       0.483       1.302
    L1.e(有效时间)     0.0199      0.089      0.225      0.822      -0.154       0.194
    L1.e(浪费时间)    -0.0539      0.177     -0.304      0.761      -0.402       0.294
    L1.e(必要时间)     0.0076      0.038      0.202      0.840      -0.066       0.081
    L1.e(手机时间)    -0.5146      0.225     -2.290      0.022      -0.955      -0.074
    L2.e(有效时间)     0.0088      0.033      0.265      0.791      -0.056       0.074
    L2.e(浪费时间)     0.0005      0.049      0.009      0.993      -0.096       0.097
    L2.e(必要时间)     0.0043      0.016      0.274      0.784      -0.026       0.035
    L2.e(手机时间)    -0.2146      0.121     -1.771      0.077      -0.452       0.023
    L3.e(有效时间)     0.0084      0.029      0.294      0.769      -0.048       0.064
    L3.e(浪费时间)     0.0015      0.027      0.055      0.956      -0.051       0.054
    L3.e(必要时间)     0.0062      0.012      0.502      0.616      -0.018       0.030
    L3.e(手机时间)    -0.0343      0.109     -0.315      0.753      -0.248       0.179
                                   Error covariance matrix                                
    ======================================================================================
                             coef    std err          z      P>|z|      [0.025      0.975]
    --------------------------------------------------------------------------------------
    sqrt.var.有效时间         87.7861      4.781     18.361      0.000      78.415      97.157
    sqrt.cov.有效时间.浪费时间     3.4662      2.479      1.398      0.162      -1.393       8.325
    sqrt.var.浪费时间         34.1609      1.377     24.805      0.000      31.462      36.860
    sqrt.cov.有效时间.必要时间   -38.8195      5.587     -6.949      0.000     -49.769     -27.870
    sqrt.cov.浪费时间.必要时间   -16.0219      7.254     -2.209      0.027     -30.239      -1.805
    sqrt.var.必要时间         82.1827      3.692     22.258      0.000      74.946      89.419
    sqrt.cov.有效时间.手机时间    -2.9060      0.524     -5.541      0.000      -3.934      -1.878
    sqrt.cov.浪费时间.手机时间    -0.6350      0.538     -1.181      0.238      -1.689       0.419
    sqrt.cov.必要时间.手机时间    -1.8638      0.463     -4.028      0.000      -2.771      -0.957
    sqrt.var.手机时间          7.7577      0.342     22.653      0.000       7.087       8.429
    ======================================================================================
    
    Warnings:
    [1] Covariance matrix calculated using the outer product of gradients (complex-step).
    FEVD for y1
               y1        y2        y3        y4
    0    1.000000  0.000000  0.000000  0.000000
    1    0.979239  0.010524  0.006589  0.003648
    2    0.972638  0.010603  0.011870  0.004889
    3    0.967146  0.010862  0.015940  0.006052
    4    0.963833  0.010954  0.018498  0.006715
    5    0.961861  0.011016  0.020024  0.007099
    6    0.960759  0.011052  0.020883  0.007306
    7    0.960160  0.011074  0.021352  0.007414
    8    0.959843  0.011086  0.021603  0.007469
    9    0.959677  0.011092  0.021734  0.007497
    
    FEVD for y2
               y1        y2        y3        y4
    0    0.011646  0.988354  0.000000  0.000000
    1    0.021888  0.962432  0.009868  0.005812
    2    0.021466  0.957510  0.013875  0.007149
    3    0.021505  0.955160  0.015513  0.007822
    4    0.021663  0.954218  0.016061  0.008057
    5    0.021771  0.953856  0.016226  0.008147
    6    0.021831  0.953717  0.016271  0.008181
    7    0.021861  0.953664  0.016282  0.008194
    8    0.021875  0.953642  0.016284  0.008199
    9    0.021882  0.953633  0.016284  0.008201
    
    FEVD for y3
               y1        y2        y3        y4
    0    0.183638  0.028503  0.787859  0.000000
    1    0.237850  0.029299  0.732797  0.000054
    2    0.247878  0.034443  0.716769  0.000910
    3    0.253935  0.035834  0.708850  0.001381
    4    0.256501  0.036519  0.705186  0.001794
    5    0.257818  0.036769  0.703368  0.002044
    6    0.258477  0.036870  0.702460  0.002193
    7    0.258815  0.036908  0.702001  0.002276
    8    0.258988  0.036923  0.701768  0.002322
    9    0.259076  0.036929  0.701649  0.002346
    
    FEVD for y4
               y1        y2        y3        y4
    0    0.101408  0.006846  0.025885  0.865861
    1    0.109954  0.006671  0.022063  0.861312
    2    0.127710  0.007010  0.021368  0.843912
    3    0.138684  0.006961  0.022117  0.832238
    4    0.145616  0.006885  0.023198  0.824301
    5    0.149523  0.006827  0.024091  0.819558
    6    0.151625  0.006801  0.024718  0.816855
    7    0.152715  0.006794  0.025118  0.815372
    8    0.153269  0.006795  0.025358  0.814578
    9    0.153546  0.006797  0.025497  0.814160
    
    
    None
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_176_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_176_2.png)
    


## 3.7 关于日期的NeuralProphet 时间序列


```python
part = '3.7'
NP_dict = {}
test_length = 30

for col in num_vars:
    part3.MyNeuralProphet(data, col, NP_dict, test_length, part, path)
```

    INFO: nprophet.utils - set_auto_seasonalities: Disabling yearly seasonality. Run NeuralProphet with yearly_seasonality=True to override this.
    INFO: nprophet.utils - set_auto_seasonalities: Disabling daily seasonality. Run NeuralProphet with daily_seasonality=True to override this.
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set batch_size to 8
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set epochs to 87
    100%|██████████| 100/100 [00:00<00:00, 490.04it/s]
    INFO: nprophet - _lr_range_test: learning rate range test found optimal lr: 6.58E-01
    Epoch[87/87]: 100%|██████████| 87/87 [00:08<00:00, 10.25it/s, SmoothL1Loss=0.015, MAE=75.2, RegLoss=0] 
    INFO: nprophet.utils - set_auto_seasonalities: Disabling yearly seasonality. Run NeuralProphet with yearly_seasonality=True to override this.
    INFO: nprophet.utils - set_auto_seasonalities: Disabling daily seasonality. Run NeuralProphet with daily_seasonality=True to override this.
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set batch_size to 8
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set epochs to 87
     90%|█████████ | 90/100 [00:00<00:00, 497.77it/s]
    INFO: nprophet - _lr_range_test: learning rate range test found optimal lr: 1.87E-01
    Epoch[87/87]: 100%|██████████| 87/87 [00:08<00:00,  9.94it/s, SmoothL1Loss=0.0296, MAE=27.1, RegLoss=0]
    INFO: nprophet.utils - set_auto_seasonalities: Disabling yearly seasonality. Run NeuralProphet with yearly_seasonality=True to override this.
    INFO: nprophet.utils - set_auto_seasonalities: Disabling daily seasonality. Run NeuralProphet with daily_seasonality=True to override this.
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set batch_size to 8
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set epochs to 87
     93%|█████████▎| 93/100 [00:00<00:00, 503.49it/s]
    INFO: nprophet - _lr_range_test: learning rate range test found optimal lr: 3.51E-02
    Epoch[87/87]: 100%|██████████| 87/87 [00:08<00:00,  9.94it/s, SmoothL1Loss=0.0193, MAE=77.6, RegLoss=0]
    INFO: nprophet.utils - set_auto_seasonalities: Disabling yearly seasonality. Run NeuralProphet with yearly_seasonality=True to override this.
    INFO: nprophet.utils - set_auto_seasonalities: Disabling daily seasonality. Run NeuralProphet with daily_seasonality=True to override this.
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set batch_size to 8
    INFO: nprophet.config - set_auto_batch_epoch: Auto-set epochs to 87
     95%|█████████▌| 95/100 [00:00<00:00, 484.57it/s]
    INFO: nprophet - _lr_range_test: learning rate range test found optimal lr: 2.31E-01
    Epoch[87/87]: 100%|██████████| 87/87 [00:09<00:00,  9.46it/s, SmoothL1Loss=0.0201, MAE=6.73, RegLoss=0]
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_178_1.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_178_2.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_178_3.png)
    



    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_178_4.png)
    


## 3.8 关联规则


```python
part = '3.8'
te = TransactionEncoder()
df_tf = te.fit_transform(df.groupby('date')['event'].agg(list))
dff = pd.DataFrame(df_tf,columns=te.columns_)
# use_colnames=True表示使用元素名字，默认的False使用列名代表元素, 设置最小支持度min_support
frequent_itemsets = apriori(dff, min_support=0.05, use_colnames=True)
frequent_itemsets.sort_values(by='support', ascending=False, inplace=True)
# 选择2频繁项集
nwdf = frequent_itemsets[frequent_itemsets.itemsets.apply(lambda x: len(x)) == 2]
nwdf
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>support</th>
      <th>itemsets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>145</th>
      <td>0.902603</td>
      <td>(午休, 午饭)</td>
    </tr>
    <tr>
      <th>176</th>
      <td>0.899244</td>
      <td>(晚饭, 午饭)</td>
    </tr>
    <tr>
      <th>156</th>
      <td>0.898405</td>
      <td>(午休, 晚饭)</td>
    </tr>
    <tr>
      <th>133</th>
      <td>0.896725</td>
      <td>(写日记, 晚饭)</td>
    </tr>
    <tr>
      <th>123</th>
      <td>0.862301</td>
      <td>(写日记, 午饭)</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>247</th>
      <td>0.050378</td>
      <td>(晚饭, 机器学习)</td>
    </tr>
    <tr>
      <th>150</th>
      <td>0.050378</td>
      <td>(午休, 托福写作)</td>
    </tr>
    <tr>
      <th>155</th>
      <td>0.050378</td>
      <td>(午休, 散步)</td>
    </tr>
    <tr>
      <th>184</th>
      <td>0.050378</td>
      <td>(午饭, 课)</td>
    </tr>
    <tr>
      <th>193</th>
      <td>0.050378</td>
      <td>(华尔街日报, 散步)</td>
    </tr>
  </tbody>
</table>
<p>248 rows × 2 columns</p>
</div>




```python
nwdf['from'] = nwdf['itemsets'].map(lambda x:list(x)[0])
nwdf['to'] = nwdf['itemsets'].map(lambda x:list(x)[1])
nwdf['weight'] = nwdf['support']
part2.net(nwdf, 'from', 'to', '2022', event2attr, part, path, weight='weight')
```

    Graph with 35 nodes and 248 edges
    closeness_centrality: {午休:0.11147295465477286,晚饭:0.10404574134520657,磨蹭:0.08526974609862309,写日记:0.08473498674033433,午饭:0.08060545614021548,玩游戏:0.06723647218299623,华尔街日报:0.050633467344697286,人文书籍:0.013212337276508399,单词:0.010730554848201906,运动:0.005027548209366391,算法课程:0.0014656367597544067,摄影:0.0013972163704784025,量化:0.0011505428617728083,接单工作:0.00071301247771836,人文课:0.00048614487117160907,随机微积分:0.00035650623885918,做家务:0.0,托福听力:0.0,托福口语:0.0,python:0.0,毕业论文:0.0,人工智能:0.0,洗漱:0.0,偏微分:0.0,听力:0.0,实变:0.0,写报告:0.0,人文教程:0.0,散步:0.0,练字:0.0,C++:0.0,托福写作:0.0,机器学习:0.0,课:0.0,泛函:0.0,}
    


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_181_1.png)
    



```python
# metric可以有很多的度量选项，返回的表列名都可以作为参数
association_rule = association_rules(frequent_itemsets,metric='confidence',min_threshold=0.9)

#关联规则可以提升度排序
association_rule.sort_values(by='lift',ascending=False,inplace=True)
association_rule.to_csv('association_rule.csv', index=False, encoding='gbk')
association_rule
# 规则是：antecedents->consequents
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>antecedents</th>
      <th>consequents</th>
      <th>antecedent support</th>
      <th>consequent support</th>
      <th>support</th>
      <th>confidence</th>
      <th>lift</th>
      <th>leverage</th>
      <th>conviction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>200778</th>
      <td>(运动, 写日记, 人工智能, 华尔街日报)</td>
      <td>(磨蹭, 午饭, 随机微积分, 玩游戏, 午休)</td>
      <td>0.052057</td>
      <td>0.115869</td>
      <td>0.050378</td>
      <td>0.967742</td>
      <td>8.352034</td>
      <td>0.044346</td>
      <td>27.408060</td>
    </tr>
    <tr>
      <th>194330</th>
      <td>(运动, 写日记, 人工智能, 华尔街日报)</td>
      <td>(午休, 磨蹭, 随机微积分, 玩游戏)</td>
      <td>0.052057</td>
      <td>0.115869</td>
      <td>0.050378</td>
      <td>0.967742</td>
      <td>8.352034</td>
      <td>0.044346</td>
      <td>27.408060</td>
    </tr>
    <tr>
      <th>195486</th>
      <td>(运动, 人工智能, 华尔街日报, 午饭)</td>
      <td>(午休, 磨蹭, 随机微积分, 玩游戏)</td>
      <td>0.052057</td>
      <td>0.115869</td>
      <td>0.050378</td>
      <td>0.967742</td>
      <td>8.352034</td>
      <td>0.044346</td>
      <td>27.408060</td>
    </tr>
    <tr>
      <th>202442</th>
      <td>(运动, 人工智能, 晚饭, 华尔街日报)</td>
      <td>(磨蹭, 写日记, 午饭, 随机微积分, 玩游戏, 午休)</td>
      <td>0.052057</td>
      <td>0.115869</td>
      <td>0.050378</td>
      <td>0.967742</td>
      <td>8.352034</td>
      <td>0.044346</td>
      <td>27.408060</td>
    </tr>
    <tr>
      <th>201555</th>
      <td>(运动, 人工智能, 华尔街日报)</td>
      <td>(磨蹭, 晚饭, 午饭, 随机微积分, 玩游戏, 午休)</td>
      <td>0.052057</td>
      <td>0.115869</td>
      <td>0.050378</td>
      <td>0.967742</td>
      <td>8.352034</td>
      <td>0.044346</td>
      <td>27.408060</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>65544</th>
      <td>(华尔街日报, 磨蹭, 随机微积分)</td>
      <td>(晚饭)</td>
      <td>0.131822</td>
      <td>0.941226</td>
      <td>0.120067</td>
      <td>0.910828</td>
      <td>0.967704</td>
      <td>-0.004007</td>
      <td>0.659110</td>
    </tr>
    <tr>
      <th>56258</th>
      <td>(华尔街日报, 随机微积分)</td>
      <td>(晚饭)</td>
      <td>0.148615</td>
      <td>0.941226</td>
      <td>0.135181</td>
      <td>0.909605</td>
      <td>0.966404</td>
      <td>-0.004699</td>
      <td>0.650189</td>
    </tr>
    <tr>
      <th>121140</th>
      <td>(python, 磨蹭, 晚饭, 午饭)</td>
      <td>(写日记)</td>
      <td>0.076406</td>
      <td>0.934509</td>
      <td>0.068850</td>
      <td>0.901099</td>
      <td>0.964249</td>
      <td>-0.002553</td>
      <td>0.662189</td>
    </tr>
    <tr>
      <th>106222</th>
      <td>(python, 晚饭, 午饭)</td>
      <td>(写日记)</td>
      <td>0.084803</td>
      <td>0.934509</td>
      <td>0.076406</td>
      <td>0.900990</td>
      <td>0.964132</td>
      <td>-0.002842</td>
      <td>0.661461</td>
    </tr>
    <tr>
      <th>122894</th>
      <td>(磨蹭, python, 晚饭, 午饭, 午休)</td>
      <td>(写日记)</td>
      <td>0.075567</td>
      <td>0.934509</td>
      <td>0.068010</td>
      <td>0.900000</td>
      <td>0.963073</td>
      <td>-0.002608</td>
      <td>0.654912</td>
    </tr>
  </tbody>
</table>
<p>202897 rows × 9 columns</p>
</div>



# 4.数据挖掘

## 4.1 通过生成聚合特征做日度时长数据的特征工程


```python
nums = [
    '浪费时间', '必要时间', '手机时间'
]

cates = [
    'month', 'day', 'weekday'
]

y = '有效时间'
```


```python
# 基于A/B的统计特征
for num_var in tqdm(nums):
    for cate_var in cates:
        for sts in ['mean', 'median', 'std', 'max', 'min']:
            data[f'{cate_var}_{num_var}_{sts}'] = data.groupby(cate_var)[num_var].\
                transform(sts).values
        data[f'{cate_var}_{num_var}_cv'] = data[f'{cate_var}_{num_var}_std'] / \
            data[f'{cate_var}_{num_var}_mean']
        for fun in funcs.all_functions:
            try:
                fun_name = fun.__name__
            except:
                fun_name = str(fun)
            data[f'{num_var}_{fun_name}_{cate_var}'] = data.groupby(cate_var)[num_var].\
                transform(fun).values
```

    100%|██████████| 3/3 [00:07<00:00,  2.58s/it]
    


```python
# 流量平滑特征
# 基于A/B的统计特征
for num_var in tqdm(nums):
    for cate_var in cates:
        data[f'{num_var}_div_{cate_var}_{num_var}_mean'] = data[num_var] / \
            (data[f'{cate_var}_{num_var}_mean'] + 1e-5)
        data[f'{num_var}_div_{cate_var}_{num_var}_median'] = data[num_var] / \
            (data[f'{cate_var}_{num_var}_median'] + 1e-5)
        # 黄金组合特征
        data[f'{num_var}_minus_{cate_var}_{num_var}_mean'] = data[num_var] - \
            data[f'{cate_var}_{num_var}_mean']
```

    100%|██████████| 3/3 [00:00<00:00, 93.72it/s]
    


```python
# 相邻有序类别统计特征的变化
sts_list = ['max', 'min', 'mean', 'std', 'median']
for num_var in tqdm(nums):
    for cate_var in cates:
        for sts in sts_list:
            data[f'{cate_var}_{num_var}_{sts}_diff']  = data[f'{cate_var}_{num_var}_{sts}'] - \
                data.groupby(cate_var)[f'{cate_var}_{num_var}_{sts}'].shift()        
            data[f'{cate_var}_{num_var}_{sts}_ratio'] = data[f'{cate_var}_{num_var}_{sts}'] / \
                data.groupby(cate_var)[f'{cate_var}_{num_var}_{sts}'].shift() 
            data[f'{cate_var}_{num_var}_{sts}_diff'].fillna(method='bfill', inplace=True)
            data[f'{cate_var}_{num_var}_{sts}_ratio'].fillna(method='bfill', inplace=True)
```

    100%|██████████| 3/3 [00:00<00:00, 12.69it/s]
    


```python
# 事项序列的tf-idf特征
vec = TfidfVectorizer(ngram_range=(1, 3), min_df=.01)
vec_features = vec.fit_transform(
    df.groupby('date')['event'].agg(lambda x: ' '.join(x))
)
vec_features = pd.DataFrame(
    vec_features.toarray(), 
    columns=vec.get_feature_names()
)
data = pd.concat(
    [data, vec_features], axis=1
)
```

## 4.2 类别变量的one-hot encoding


```python
for cate_var in cates:
    onehot = pd.get_dummies(data[cate_var], drop_first=True, prefix=f'{cate_var}_')
    data = pd.concat([data.drop(cate_var, axis=1), onehot], axis=1)

data.to_excel('data_FE.xlsx', index=False)
data
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>有效时间</th>
      <th>浪费时间</th>
      <th>必要时间</th>
      <th>手机时间</th>
      <th>week_order</th>
      <th>month_浪费时间_mean</th>
      <th>month_浪费时间_median</th>
      <th>month_浪费时间_std</th>
      <th>month_浪费时间_max</th>
      <th>...</th>
      <th>day__28</th>
      <th>day__29</th>
      <th>day__30</th>
      <th>day__31</th>
      <th>weekday__2.0</th>
      <th>weekday__3.0</th>
      <th>weekday__4.0</th>
      <th>weekday__5.0</th>
      <th>weekday__6.0</th>
      <th>weekday__7.0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-01-01</td>
      <td>243.000000</td>
      <td>100.0</td>
      <td>116.000000</td>
      <td>64.000000</td>
      <td>2021-12-27/2022-01-02</td>
      <td>79.319191</td>
      <td>72.0</td>
      <td>33.61966</td>
      <td>207.0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-01-02</td>
      <td>368.632143</td>
      <td>100.0</td>
      <td>257.778037</td>
      <td>38.109886</td>
      <td>2021-12-27/2022-01-02</td>
      <td>79.319191</td>
      <td>72.0</td>
      <td>33.61966</td>
      <td>207.0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-01-03</td>
      <td>494.000000</td>
      <td>100.0</td>
      <td>286.000000</td>
      <td>19.000000</td>
      <td>2022-01-03/2022-01-09</td>
      <td>79.319191</td>
      <td>72.0</td>
      <td>33.61966</td>
      <td>207.0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-01-04</td>
      <td>567.000000</td>
      <td>58.0</td>
      <td>247.000000</td>
      <td>15.000000</td>
      <td>2022-01-03/2022-01-09</td>
      <td>79.319191</td>
      <td>72.0</td>
      <td>33.61966</td>
      <td>207.0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-01-05</td>
      <td>570.000000</td>
      <td>60.0</td>
      <td>218.000000</td>
      <td>24.000000</td>
      <td>2022-01-03/2022-01-09</td>
      <td>79.319191</td>
      <td>72.0</td>
      <td>33.61966</td>
      <td>207.0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1187</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1188</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1189</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1190</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>1191 rows × 1257 columns</p>
</div>



## 4.3 利用boruta筛选特征


```python
# 划分数据集
data = pd.read_excel('data_FE.xlsx')
data = data[data['date'] < '2022-12-31'].reset_index()

# 处理缺失
for col in data.columns:
    if data[col].isnull().any():
        data[col] = data[col].fillna(data[col].mean())
data = data.dropna(axis=1, how='all')

train_size = .8
rows = int(data.shape[0] * train_size)
train, test = data.iloc[:(rows + 1), :], data.iloc[(rows + 1):, :]
X = train.drop(['date', 'week_order', y], axis=1)
Y = train[y]
```


```python
clf = XGBRegressor()
boruta = BorutaPy(
   estimator = clf,
   n_estimators = 'auto',
   max_iter = 100 # number of trials to perform
)

# 模型训练
boruta.fit(np.array(X), np.array(Y))
# 输出结果
green_area = X.columns[boruta.support_].to_list()
blue_area  = X.columns[boruta.support_weak_].to_list()
print('features in the green area:', green_area)
print('features in the blue area:', blue_area)
cols = green_area + blue_area
train = train[cols]
```

    features in the green area: ['必要时间_minus_day_必要时间_mean', '必要时间_div_weekday_必要时间_mean', '必要时间_div_weekday_必要时间_median', '必要时间_minus_weekday_必要时间_mean', '手机时间_div_day_手机时间_mean', '手机时间_div_day_手机时间_median', '手机时间_div_weekday_手机时间_median', '单词 磨蹭', '晚饭 磨蹭 单词', '玩游戏 托福写作']
    features in the blue area: ['必要时间_div_month_必要时间_mean', '磨蹭 aqf']
    

## 4.4 利用PCA降维


```python
dt = data[cols]
dt
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>必要时间_minus_day_必要时间_mean</th>
      <th>必要时间_div_weekday_必要时间_mean</th>
      <th>必要时间_div_weekday_必要时间_median</th>
      <th>必要时间_minus_weekday_必要时间_mean</th>
      <th>手机时间_div_day_手机时间_mean</th>
      <th>手机时间_div_day_手机时间_median</th>
      <th>手机时间_div_weekday_手机时间_median</th>
      <th>单词 磨蹭</th>
      <th>晚饭 磨蹭 单词</th>
      <th>玩游戏 托福写作</th>
      <th>必要时间_div_month_必要时间_mean</th>
      <th>磨蹭 aqf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-164.407635</td>
      <td>0.366145</td>
      <td>0.386667</td>
      <td>-200.814471</td>
      <td>2.403493</td>
      <td>2.390775</td>
      <td>2.782607</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.381774</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-40.062096</td>
      <td>0.867816</td>
      <td>0.885835</td>
      <td>-39.264065</td>
      <td>1.912798</td>
      <td>2.059993</td>
      <td>1.814756</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.848387</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-56.580123</td>
      <td>0.878904</td>
      <td>0.907936</td>
      <td>-39.405315</td>
      <td>0.880027</td>
      <td>0.863636</td>
      <td>0.863636</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.941270</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-128.622100</td>
      <td>0.831619</td>
      <td>0.834459</td>
      <td>-50.010871</td>
      <td>0.553344</td>
      <td>0.543987</td>
      <td>0.625000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.812915</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-132.850535</td>
      <td>0.749201</td>
      <td>0.742760</td>
      <td>-72.976790</td>
      <td>0.846440</td>
      <td>0.842105</td>
      <td>1.066666</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.717471</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>359</th>
      <td>8.666667</td>
      <td>1.026412</td>
      <td>1.060317</td>
      <td>8.594685</td>
      <td>0.873563</td>
      <td>0.950000</td>
      <td>0.863636</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.041590</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>360</th>
      <td>-5.083333</td>
      <td>1.013431</td>
      <td>1.016892</td>
      <td>3.989129</td>
      <td>0.528000</td>
      <td>0.594594</td>
      <td>0.458333</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.938678</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>361</th>
      <td>41.000000</td>
      <td>1.171915</td>
      <td>1.161840</td>
      <td>50.023210</td>
      <td>1.323193</td>
      <td>1.380952</td>
      <td>1.288888</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.063420</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>362</th>
      <td>-8.581785</td>
      <td>1.000447</td>
      <td>1.012090</td>
      <td>0.130862</td>
      <td>1.262754</td>
      <td>1.454545</td>
      <td>1.422222</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.913730</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>363</th>
      <td>-59.175846</td>
      <td>0.711256</td>
      <td>0.785741</td>
      <td>-91.747544</td>
      <td>0.786911</td>
      <td>0.809523</td>
      <td>0.772727</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.704788</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>364 rows × 12 columns</p>
</div>




```python
X_train = data.loc[train.index, cols]# dt.loc[train.index, :]
X_test = data.loc[test.index, cols]#dt.loc[test.index, :]
y_train = data.loc[train.index, y]#data.loc[train.index, y]
y_test = data.loc[test.index, y]#data.loc[test.index, y]
```

## 4.5 利用optuna优化参数


```python
sampler = TPESampler(seed=10) # for reproducibility

def objective(trial):
    dtrain = lgb.Dataset(X_train, label=y_train)
    
    param = {
        'objective': 'regression_l2',
        'metric': 'mse',
        'verbosity': -1,
        'boosting_type': 'gbdt',
        'lambda_l1': trial.suggest_loguniform('lambda_l1', 1e-8, 10.0),
        'lambda_l2': trial.suggest_loguniform('lambda_l2', 1e-8, 10.0),
        'num_leaves': trial.suggest_int('num_leaves', 2, 512),
        'learning_rate': trial.suggest_loguniform('learning_rate', 1e-8, 1.0),
        'n_estimators': trial.suggest_int('n_estimators', 700, 3000),
        'feature_fraction': trial.suggest_uniform('feature_fraction', 0.4, 1.0),
        'bagging_fraction': trial.suggest_uniform('bagging_fraction', 0.4, 1.0),
        'bagging_freq': trial.suggest_int('bagging_freq', 1, 7),
        'min_child_samples': trial.suggest_int('min_child_samples', 5, 100),
    }

    gbm = lgb.train(param, dtrain)
    return mean_squared_error(y_test, gbm.predict(X_test))

study = optuna.create_study(direction='minimize', sampler=sampler)
study.optimize(objective, n_trials=100)
lgb_params = study.best_params
print(lgb_params)
```

    [32m[I 2022-12-31 08:53:13,448][0m A new study created in memory with name: no-name-1401e653-31c6-4c00-a4ed-3beb13b1e7c2[0m
    [32m[I 2022-12-31 08:53:14,302][0m Trial 0 finished with value: 3663.6493519212218 and parameters: {'lambda_l1': 0.08747537025773001, 'lambda_l2': 1.537331564587801e-08, 'num_leaves': 325, 'learning_rate': 0.00978207662259244, 'n_estimators': 1847, 'feature_fraction': 0.5348779873185086, 'bagging_fraction': 0.5188377188557745, 'bagging_freq': 6, 'min_child_samples': 21}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:14,944][0m Trial 1 finished with value: 5730.538669488141 and parameters: {'lambda_l1': 6.238186113062485e-08, 'lambda_l2': 0.014731208123898084, 'num_leaves': 489, 'learning_rate': 1.075439863800637e-08, 'n_estimators': 1878, 'feature_fraction': 0.8875725769912681, 'bagging_fraction': 0.7675156400976328, 'bagging_freq': 6, 'min_child_samples': 33}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:15,216][0m Trial 2 finished with value: 5729.924438622707 and parameters: {'lambda_l1': 1.8195630232649103, 'lambda_l2': 0.02698870526662559, 'num_leaves': 279, 'learning_rate': 1.372019806228628e-07, 'n_estimators': 1559, 'feature_fraction': 0.8044801690398071, 'bagging_fraction': 0.6650999046537976, 'bagging_freq': 4, 'min_child_samples': 64}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:15,678][0m Trial 3 finished with value: 5066.487053114323 and parameters: {'lambda_l1': 0.0004151874170225355, 'lambda_l2': 0.007137968669448066, 'num_leaves': 309, 'learning_rate': 0.027655758533508757, 'n_estimators': 1900, 'feature_fraction': 0.945189328485201, 'bagging_fraction': 0.5915416533931271, 'bagging_freq': 1, 'min_child_samples': 33}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:16,016][0m Trial 4 finished with value: 4310.691519614596 and parameters: {'lambda_l1': 1.0613515458050516e-07, 'lambda_l2': 0.2871652845130526, 'num_leaves': 25, 'learning_rate': 0.0010239934684337197, 'n_estimators': 1959, 'feature_fraction': 0.8915721974020412, 'bagging_fraction': 0.5193685238072874, 'bagging_freq': 6, 'min_child_samples': 38}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:16,350][0m Trial 5 finished with value: 5707.333707380912 and parameters: {'lambda_l1': 0.061919754212729834, 'lambda_l2': 4.609516372878068e-06, 'num_leaves': 453, 'learning_rate': 4.018769547074794e-06, 'n_estimators': 1079, 'feature_fraction': 0.6355175463679523, 'bagging_fraction': 0.4560762247351902, 'bagging_freq': 6, 'min_child_samples': 19}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:17,154][0m Trial 6 finished with value: 5296.527728284961 and parameters: {'lambda_l1': 2.8643760792886155e-05, 'lambda_l2': 3.15026008204159, 'num_leaves': 506, 'learning_rate': 4.471326429846904e-05, 'n_estimators': 2600, 'feature_fraction': 0.5508244805242356, 'bagging_fraction': 0.7584229889385306, 'bagging_freq': 7, 'min_child_samples': 56}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:17,512][0m Trial 7 finished with value: 5730.361775983819 and parameters: {'lambda_l1': 0.0020502757114657026, 'lambda_l2': 2.2570225857344917e-08, 'num_leaves': 184, 'learning_rate': 4.334157819798663e-08, 'n_estimators': 1402, 'feature_fraction': 0.5984315871892792, 'bagging_fraction': 0.8642981777263575, 'bagging_freq': 1, 'min_child_samples': 46}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:18,352][0m Trial 8 finished with value: 5730.394672188862 and parameters: {'lambda_l1': 6.828759954126584e-06, 'lambda_l2': 0.005350819333765383, 'num_leaves': 178, 'learning_rate': 2.211968049882666e-08, 'n_estimators': 2724, 'feature_fraction': 0.8579443522862087, 'bagging_fraction': 0.926857985634915, 'bagging_freq': 3, 'min_child_samples': 63}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:18,537][0m Trial 9 finished with value: 5725.662082734441 and parameters: {'lambda_l1': 0.00041802248886676206, 'lambda_l2': 0.0024017612390819757, 'num_leaves': 135, 'learning_rate': 2.5525277457416983e-06, 'n_estimators': 758, 'feature_fraction': 0.5818375363906209, 'bagging_fraction': 0.5452455252421164, 'bagging_freq': 4, 'min_child_samples': 59}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:18,826][0m Trial 10 finished with value: 5730.645191661278 and parameters: {'lambda_l1': 2.4741309325352723, 'lambda_l2': 1.369222160992905e-08, 'num_leaves': 378, 'learning_rate': 0.12146792728512504, 'n_estimators': 2315, 'feature_fraction': 0.4060026776049922, 'bagging_fraction': 0.4086369442869483, 'bagging_freq': 5, 'min_child_samples': 90}. Best is trial 0 with value: 3663.6493519212218.[0m
    [32m[I 2022-12-31 08:53:20,230][0m Trial 11 finished with value: 2847.156632046364 and parameters: {'lambda_l1': 1.2827995976598744e-08, 'lambda_l2': 4.782578120543093, 'num_leaves': 18, 'learning_rate': 0.003515415793452006, 'n_estimators': 2175, 'feature_fraction': 0.44758629634523805, 'bagging_fraction': 0.4950057657124324, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 11 with value: 2847.156632046364.[0m
    [32m[I 2022-12-31 08:53:21,582][0m Trial 12 finished with value: 2869.8278262991394 and parameters: {'lambda_l1': 0.026020576000610758, 'lambda_l2': 2.0427421924909825e-05, 'num_leaves': 19, 'learning_rate': 0.0019227875826956485, 'n_estimators': 2226, 'feature_fraction': 0.4069345627472357, 'bagging_fraction': 0.41271337638755123, 'bagging_freq': 7, 'min_child_samples': 8}. Best is trial 11 with value: 2847.156632046364.[0m
    [32m[I 2022-12-31 08:53:22,598][0m Trial 13 finished with value: 15049.773371749088 and parameters: {'lambda_l1': 0.010462471988479095, 'lambda_l2': 7.060020209021735e-06, 'num_leaves': 6, 'learning_rate': 0.9344349772340222, 'n_estimators': 2994, 'feature_fraction': 0.40555373227596836, 'bagging_fraction': 0.4010314120663154, 'bagging_freq': 7, 'min_child_samples': 6}. Best is trial 11 with value: 2847.156632046364.[0m
    [32m[I 2022-12-31 08:53:24,403][0m Trial 14 finished with value: 2811.726845943534 and parameters: {'lambda_l1': 3.9249134026463755e-06, 'lambda_l2': 1.1858367055770722e-05, 'num_leaves': 76, 'learning_rate': 0.000898971927625408, 'n_estimators': 2282, 'feature_fraction': 0.4604125263987582, 'bagging_fraction': 0.40576238117924057, 'bagging_freq': 7, 'min_child_samples': 8}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:27,837][0m Trial 15 finished with value: 3605.8363963751 and parameters: {'lambda_l1': 1.0657371965031861e-08, 'lambda_l2': 0.00010197246350000988, 'num_leaves': 96, 'learning_rate': 0.0001960778320697278, 'n_estimators': 2416, 'feature_fraction': 0.49549061250737986, 'bagging_fraction': 0.6244711147640094, 'bagging_freq': 5, 'min_child_samples': 5}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:29,091][0m Trial 16 finished with value: 8373.885695359628 and parameters: {'lambda_l1': 2.0489156188760164e-06, 'lambda_l2': 9.280141922393437, 'num_leaves': 80, 'learning_rate': 0.6191345434830704, 'n_estimators': 2923, 'feature_fraction': 0.7105764123568452, 'bagging_fraction': 0.46506369438648176, 'bagging_freq': 2, 'min_child_samples': 20}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:29,371][0m Trial 17 finished with value: 5730.645191661278 and parameters: {'lambda_l1': 4.941888144693395e-07, 'lambda_l2': 3.9236427964558804e-07, 'num_leaves': 216, 'learning_rate': 4.567385528721783e-05, 'n_estimators': 2199, 'feature_fraction': 0.47375749843476184, 'bagging_fraction': 0.4574942509255713, 'bagging_freq': 7, 'min_child_samples': 95}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:29,676][0m Trial 18 finished with value: 5581.881695341319 and parameters: {'lambda_l1': 1.0547669387255137e-08, 'lambda_l2': 4.952100109901748e-07, 'num_leaves': 64, 'learning_rate': 0.0034965017119822288, 'n_estimators': 1576, 'feature_fraction': 0.6929249984109245, 'bagging_fraction': 0.5747840733573477, 'bagging_freq': 5, 'min_child_samples': 75}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:31,297][0m Trial 19 finished with value: 2920.030711156602 and parameters: {'lambda_l1': 3.0600987843960323e-05, 'lambda_l2': 0.0004929628684349111, 'num_leaves': 127, 'learning_rate': 0.0004662679843920042, 'n_estimators': 2644, 'feature_fraction': 0.47156397223007723, 'bagging_fraction': 0.7160418138977029, 'bagging_freq': 7, 'min_child_samples': 13}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:31,900][0m Trial 20 finished with value: 6015.479287407715 and parameters: {'lambda_l1': 1.8380838177343527e-07, 'lambda_l2': 0.31711375153712557, 'num_leaves': 30, 'learning_rate': 0.059843818038070345, 'n_estimators': 2061, 'feature_fraction': 0.45101479803900624, 'bagging_fraction': 0.48754953199217815, 'bagging_freq': 3, 'min_child_samples': 27}. Best is trial 14 with value: 2811.726845943534.[0m
    [32m[I 2022-12-31 08:53:32,860][0m Trial 21 finished with value: 2791.5130416265415 and parameters: {'lambda_l1': 0.3238426139254558, 'lambda_l2': 3.832792717292601e-05, 'num_leaves': 5, 'learning_rate': 0.002384100275464431, 'n_estimators': 2440, 'feature_fraction': 0.40285087058181235, 'bagging_fraction': 0.40218557980908487, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:34,016][0m Trial 22 finished with value: 3647.508087335675 and parameters: {'lambda_l1': 0.6465966243230009, 'lambda_l2': 0.00012732472903346904, 'num_leaves': 53, 'learning_rate': 0.012463073634556461, 'n_estimators': 2381, 'feature_fraction': 0.4230424884723011, 'bagging_fraction': 0.4076709422946527, 'bagging_freq': 6, 'min_child_samples': 13}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:36,576][0m Trial 23 finished with value: 3934.736193991239 and parameters: {'lambda_l1': 4.956014691099323e-05, 'lambda_l2': 4.5069005020099323e-07, 'num_leaves': 116, 'learning_rate': 0.0001482205334204185, 'n_estimators': 2520, 'feature_fraction': 0.5186086255871251, 'bagging_fraction': 0.4292839583011328, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:37,952][0m Trial 24 finished with value: 5473.101797749074 and parameters: {'lambda_l1': 1.803383954009936e-06, 'lambda_l2': 2.846270051402154e-05, 'num_leaves': 17, 'learning_rate': 1.5058805953179233e-05, 'n_estimators': 2797, 'feature_fraction': 0.4463574809444282, 'bagging_fraction': 0.48874053885797414, 'bagging_freq': 6, 'min_child_samples': 14}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:38,488][0m Trial 25 finished with value: 7252.172467580811 and parameters: {'lambda_l1': 2.6622295954032647e-08, 'lambda_l2': 0.0006696251265782972, 'num_leaves': 148, 'learning_rate': 0.17763703558461727, 'n_estimators': 2112, 'feature_fraction': 0.40072003875300777, 'bagging_fraction': 0.40140599948797934, 'bagging_freq': 7, 'min_child_samples': 25}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:38,781][0m Trial 26 finished with value: 5117.209740299297 and parameters: {'lambda_l1': 6.49016005729606e-07, 'lambda_l2': 2.7021723448700644e-06, 'num_leaves': 2, 'learning_rate': 0.0036520139747892822, 'n_estimators': 1710, 'feature_fraction': 0.6327277583640543, 'bagging_fraction': 0.627237142903408, 'bagging_freq': 5, 'min_child_samples': 45}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:40,376][0m Trial 27 finished with value: 2995.4249481047364 and parameters: {'lambda_l1': 9.535964584224773, 'lambda_l2': 3.732143254519649e-05, 'num_leaves': 65, 'learning_rate': 0.00048484110411175255, 'n_estimators': 2471, 'feature_fraction': 0.5307563177663328, 'bagging_fraction': 0.5331387845338977, 'bagging_freq': 6, 'min_child_samples': 12}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:43,552][0m Trial 28 finished with value: 3303.433556745086 and parameters: {'lambda_l1': 0.0031629111987952663, 'lambda_l2': 6.850606734155143e-08, 'num_leaves': 218, 'learning_rate': 0.008478794495919907, 'n_estimators': 2820, 'feature_fraction': 0.5003943363400661, 'bagging_fraction': 0.4447212452273501, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:44,292][0m Trial 29 finished with value: 4507.084663075081 and parameters: {'lambda_l1': 0.509699920830521, 'lambda_l2': 1.2903158475103602e-06, 'num_leaves': 97, 'learning_rate': 0.028486141794729965, 'n_estimators': 2064, 'feature_fraction': 0.5659678363961335, 'bagging_fraction': 0.49866331457529883, 'bagging_freq': 6, 'min_child_samples': 22}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:45,208][0m Trial 30 finished with value: 3916.7999705283924 and parameters: {'lambda_l1': 0.00016276222377150103, 'lambda_l2': 0.0012450371133445673, 'num_leaves': 389, 'learning_rate': 0.0006117679462502657, 'n_estimators': 2295, 'feature_fraction': 0.7263889444563749, 'bagging_fraction': 0.5645555463419062, 'bagging_freq': 5, 'min_child_samples': 31}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:46,505][0m Trial 31 finished with value: 3046.9078399409705 and parameters: {'lambda_l1': 0.15742587360807148, 'lambda_l2': 1.2834681892228214e-05, 'num_leaves': 45, 'learning_rate': 0.0018680512839507675, 'n_estimators': 2238, 'feature_fraction': 0.42853582714616223, 'bagging_fraction': 0.4015651584876276, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:47,225][0m Trial 32 finished with value: 3656.38831617618 and parameters: {'lambda_l1': 0.025643577205476876, 'lambda_l2': 9.254971310817356e-05, 'num_leaves': 5, 'learning_rate': 0.005408273412318854, 'n_estimators': 1770, 'feature_fraction': 0.40300287715598826, 'bagging_fraction': 0.4247988122588497, 'bagging_freq': 7, 'min_child_samples': 18}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:47,751][0m Trial 33 finished with value: 3601.957526936713 and parameters: {'lambda_l1': 9.416707540832371, 'lambda_l2': 2.5968376560881553e-05, 'num_leaves': 2, 'learning_rate': 0.0017277899603889894, 'n_estimators': 2171, 'feature_fraction': 0.47556003723609913, 'bagging_fraction': 0.4947993730110053, 'bagging_freq': 6, 'min_child_samples': 5}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:49,228][0m Trial 34 finished with value: 3599.1239271161644 and parameters: {'lambda_l1': 0.004975801385723075, 'lambda_l2': 0.0002546592401361588, 'num_leaves': 40, 'learning_rate': 0.017903110276222604, 'n_estimators': 1980, 'feature_fraction': 0.4438756694898956, 'bagging_fraction': 0.44865810145627333, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:50,995][0m Trial 35 finished with value: 3509.4775367146785 and parameters: {'lambda_l1': 0.2446979304255586, 'lambda_l2': 0.06426531636222368, 'num_leaves': 76, 'learning_rate': 0.00024558959732996565, 'n_estimators': 2549, 'feature_fraction': 0.9943218552965316, 'bagging_fraction': 0.8370006816245891, 'bagging_freq': 6, 'min_child_samples': 17}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:51,661][0m Trial 36 finished with value: 3509.093612020959 and parameters: {'lambda_l1': 0.03217565978050786, 'lambda_l2': 1.9214590171295774e-06, 'num_leaves': 35, 'learning_rate': 0.0017203545349252422, 'n_estimators': 1891, 'feature_fraction': 0.5231833798027655, 'bagging_fraction': 0.990310808449946, 'bagging_freq': 6, 'min_child_samples': 40}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:52,473][0m Trial 37 finished with value: 5492.704605316365 and parameters: {'lambda_l1': 1.4876506014718935, 'lambda_l2': 1.3088123448616427e-05, 'num_leaves': 286, 'learning_rate': 2.040850870127374e-05, 'n_estimators': 2432, 'feature_fraction': 0.769139639161954, 'bagging_fraction': 0.6071617865142714, 'bagging_freq': 7, 'min_child_samples': 28}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:53,461][0m Trial 38 finished with value: 5065.809597296785 and parameters: {'lambda_l1': 0.001091766573475506, 'lambda_l2': 0.00023488264154315246, 'num_leaves': 162, 'learning_rate': 6.436737973920456e-05, 'n_estimators': 2308, 'feature_fraction': 0.6137771563668412, 'bagging_fraction': 0.521999806532459, 'bagging_freq': 6, 'min_child_samples': 23}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:53,810][0m Trial 39 finished with value: 109926.14487961069 and parameters: {'lambda_l1': 0.011628563758187913, 'lambda_l2': 4.9495915593431794e-05, 'num_leaves': 99, 'learning_rate': 0.0011778745317456215, 'n_estimators': 2023, 'feature_fraction': 0.6734413554661675, 'bagging_fraction': 0.46412745415992196, 'bagging_freq': 7, 'min_child_samples': 72}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:54,545][0m Trial 40 finished with value: 6209.85746838672 and parameters: {'lambda_l1': 7.597233728308873e-06, 'lambda_l2': 1.1648063143715191e-07, 'num_leaves': 26, 'learning_rate': 0.056757744287973026, 'n_estimators': 2700, 'feature_fraction': 0.5451009152677414, 'bagging_fraction': 0.668668286230127, 'bagging_freq': 6, 'min_child_samples': 36}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:55,809][0m Trial 41 finished with value: 2982.6496285234525 and parameters: {'lambda_l1': 3.8179564397035064e-05, 'lambda_l2': 1.2239135973485331, 'num_leaves': 125, 'learning_rate': 0.0004659018015715526, 'n_estimators': 2602, 'feature_fraction': 0.47394509969874893, 'bagging_fraction': 0.7385064349062488, 'bagging_freq': 7, 'min_child_samples': 14}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:53:58,724][0m Trial 42 finished with value: 3072.1853299500603 and parameters: {'lambda_l1': 0.00013142578926285089, 'lambda_l2': 0.02317151684290909, 'num_leaves': 110, 'learning_rate': 0.00029343760736550903, 'n_estimators': 2699, 'feature_fraction': 0.47126768220718146, 'bagging_fraction': 0.802738787990875, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:54:00,042][0m Trial 43 finished with value: 3211.428825531995 and parameters: {'lambda_l1': 1.2788606461250385e-05, 'lambda_l2': 6.151824956436181e-06, 'num_leaves': 79, 'learning_rate': 0.004776413773296414, 'n_estimators': 2597, 'feature_fraction': 0.43744136302614184, 'bagging_fraction': 0.6843168550742864, 'bagging_freq': 7, 'min_child_samples': 17}. Best is trial 21 with value: 2791.5130416265415.[0m
    [32m[I 2022-12-31 08:54:02,163][0m Trial 44 finished with value: 2657.1241547837044 and parameters: {'lambda_l1': 0.0005898262404628944, 'lambda_l2': 0.0026596119232511423, 'num_leaves': 233, 'learning_rate': 0.0010456924170680736, 'n_estimators': 2168, 'feature_fraction': 0.4974578727308233, 'bagging_fraction': 0.7353514883774996, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:04,364][0m Trial 45 finished with value: 2795.37130050404 and parameters: {'lambda_l1': 0.0010657666264816238, 'lambda_l2': 0.002314779042387835, 'num_leaves': 364, 'learning_rate': 0.002729405005394608, 'n_estimators': 1799, 'feature_fraction': 0.4016005740592824, 'bagging_fraction': 0.7998780647806744, 'bagging_freq': 6, 'min_child_samples': 8}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:05,608][0m Trial 46 finished with value: 3040.033000787452 and parameters: {'lambda_l1': 0.0008801325457964296, 'lambda_l2': 0.010905203271910422, 'num_leaves': 347, 'learning_rate': 0.009122846156422325, 'n_estimators': 1260, 'feature_fraction': 0.5006153219137506, 'bagging_fraction': 0.8024209494491442, 'bagging_freq': 6, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:07,038][0m Trial 47 finished with value: 2966.313552373515 and parameters: {'lambda_l1': 0.0002514808722784206, 'lambda_l2': 0.22757608093946508, 'num_leaves': 434, 'learning_rate': 0.0007496453707436282, 'n_estimators': 1785, 'feature_fraction': 0.41628003914007866, 'bagging_fraction': 0.8861822558406494, 'bagging_freq': 4, 'min_child_samples': 17}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:09,916][0m Trial 48 finished with value: 2911.921205405483 and parameters: {'lambda_l1': 0.000588307519889575, 'lambda_l2': 0.005936156591055308, 'num_leaves': 320, 'learning_rate': 0.025047300772148416, 'n_estimators': 1647, 'feature_fraction': 0.5729630473302895, 'bagging_fraction': 0.7741926437870887, 'bagging_freq': 5, 'min_child_samples': 5}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:10,809][0m Trial 49 finished with value: 4699.255489133698 and parameters: {'lambda_l1': 4.705009427064259e-08, 'lambda_l2': 0.0036352470679906646, 'num_leaves': 247, 'learning_rate': 0.3229654009059301, 'n_estimators': 1884, 'feature_fraction': 0.45563958182266767, 'bagging_fraction': 0.7154863910624492, 'bagging_freq': 7, 'min_child_samples': 22}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:11,344][0m Trial 50 finished with value: 5008.098319282602 and parameters: {'lambda_l1': 9.328182350362514e-05, 'lambda_l2': 0.0013952503781801556, 'num_leaves': 350, 'learning_rate': 0.00010585095004899858, 'n_estimators': 1426, 'feature_fraction': 0.40118755905802583, 'bagging_fraction': 0.7585119242947016, 'bagging_freq': 6, 'min_child_samples': 31}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:14,466][0m Trial 51 finished with value: 2825.423819318925 and parameters: {'lambda_l1': 0.0706304322497905, 'lambda_l2': 0.049809646012337346, 'num_leaves': 496, 'learning_rate': 0.0021303556295330386, 'n_estimators': 2118, 'feature_fraction': 0.40029145068488775, 'bagging_fraction': 0.8439572270461576, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:18,844][0m Trial 52 finished with value: 3024.45130625056 and parameters: {'lambda_l1': 0.09188719871044737, 'lambda_l2': 0.0634577405446534, 'num_leaves': 459, 'learning_rate': 0.0036890597349978366, 'n_estimators': 1942, 'feature_fraction': 0.42613249609841436, 'bagging_fraction': 0.9020215850172469, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:20,572][0m Trial 53 finished with value: 2816.0766244932447 and parameters: {'lambda_l1': 0.0061717554997814525, 'lambda_l2': 9.712246704798039, 'num_leaves': 419, 'learning_rate': 0.0022892852605048523, 'n_estimators': 2119, 'feature_fraction': 0.494417939082907, 'bagging_fraction': 0.7908310492688855, 'bagging_freq': 7, 'min_child_samples': 11}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:22,251][0m Trial 54 finished with value: 2714.8977319794494 and parameters: {'lambda_l1': 0.006705238332909852, 'lambda_l2': 0.05515289879864655, 'num_leaves': 476, 'learning_rate': 0.0009589183593602336, 'n_estimators': 2137, 'feature_fraction': 0.504486210793689, 'bagging_fraction': 0.8428907718766971, 'bagging_freq': 7, 'min_child_samples': 13}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:24,041][0m Trial 55 finished with value: 2755.412341571152 and parameters: {'lambda_l1': 0.0019457893436038759, 'lambda_l2': 1.5301949557133774, 'num_leaves': 443, 'learning_rate': 0.00107247805787048, 'n_estimators': 2345, 'feature_fraction': 0.4960512801081014, 'bagging_fraction': 0.8135442879555006, 'bagging_freq': 7, 'min_child_samples': 12}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:25,900][0m Trial 56 finished with value: 2829.393402710937 and parameters: {'lambda_l1': 0.00149751685431781, 'lambda_l2': 0.9310413449422849, 'num_leaves': 474, 'learning_rate': 0.0009535171586164947, 'n_estimators': 2370, 'feature_fraction': 0.552280464919603, 'bagging_fraction': 0.838081385213393, 'bagging_freq': 7, 'min_child_samples': 15}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:27,352][0m Trial 57 finished with value: 3465.7224527070157 and parameters: {'lambda_l1': 0.000386847766168625, 'lambda_l2': 0.1479116062013324, 'num_leaves': 407, 'learning_rate': 0.00030246310894724055, 'n_estimators': 2251, 'feature_fraction': 0.5952513824632686, 'bagging_fraction': 0.9488100093438847, 'bagging_freq': 6, 'min_child_samples': 21}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:29,386][0m Trial 58 finished with value: 4036.372386798775 and parameters: {'lambda_l1': 0.001877774377078314, 'lambda_l2': 0.002428367032492789, 'num_leaves': 445, 'learning_rate': 0.00013987042419129797, 'n_estimators': 2459, 'feature_fraction': 0.4986057157198244, 'bagging_fraction': 0.8181431795924403, 'bagging_freq': 7, 'min_child_samples': 12}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:30,728][0m Trial 59 finished with value: 4854.597681681804 and parameters: {'lambda_l1': 0.016817841723666696, 'lambda_l2': 0.8119445915012254, 'num_leaves': 512, 'learning_rate': 6.684247092546955e-05, 'n_estimators': 2339, 'feature_fraction': 0.5226403090353365, 'bagging_fraction': 0.8555105313025168, 'bagging_freq': 6, 'min_child_samples': 19}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:31,684][0m Trial 60 finished with value: 3567.9305039096876 and parameters: {'lambda_l1': 0.0034976718874513476, 'lambda_l2': 0.0007819567530342825, 'num_leaves': 470, 'learning_rate': 0.007869191107621973, 'n_estimators': 2233, 'feature_fraction': 0.4629904924137883, 'bagging_fraction': 0.7293437465233266, 'bagging_freq': 3, 'min_child_samples': 27}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:33,153][0m Trial 61 finished with value: 2881.4557825411976 and parameters: {'lambda_l1': 0.007248543180881951, 'lambda_l2': 6.928870835408048, 'num_leaves': 423, 'learning_rate': 0.001110000402707117, 'n_estimators': 2115, 'feature_fraction': 0.48429783442329977, 'bagging_fraction': 0.7760913559155733, 'bagging_freq': 7, 'min_child_samples': 12}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:35,155][0m Trial 62 finished with value: 2753.6219634088866 and parameters: {'lambda_l1': 0.0022793296944407975, 'lambda_l2': 2.9709344205013046, 'num_leaves': 381, 'learning_rate': 0.0029700310378625518, 'n_estimators': 1806, 'feature_fraction': 0.5011239272190677, 'bagging_fraction': 0.791321209456875, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:37,406][0m Trial 63 finished with value: 3255.2712026568956 and parameters: {'lambda_l1': 0.0006453900649191927, 'lambda_l2': 1.5429877130113938, 'num_leaves': 374, 'learning_rate': 0.016268363428790518, 'n_estimators': 1769, 'feature_fraction': 0.5089582786024432, 'bagging_fraction': 0.8696718329728867, 'bagging_freq': 7, 'min_child_samples': 8}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:38,267][0m Trial 64 finished with value: 3229.308361881032 and parameters: {'lambda_l1': 7.238078891719898e-05, 'lambda_l2': 3.334922672516295, 'num_leaves': 390, 'learning_rate': 0.0006042905450751064, 'n_estimators': 1551, 'feature_fraction': 0.543598090294411, 'bagging_fraction': 0.8241096153997124, 'bagging_freq': 7, 'min_child_samples': 16}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:38,868][0m Trial 65 finished with value: 4831.9380716142805 and parameters: {'lambda_l1': 0.0002932740765290242, 'lambda_l2': 0.020157021999411717, 'num_leaves': 338, 'learning_rate': 0.04789747687681126, 'n_estimators': 1993, 'feature_fraction': 0.5605285340433621, 'bagging_fraction': 0.7449112029038526, 'bagging_freq': 6, 'min_child_samples': 53}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:40,585][0m Trial 66 finished with value: 3034.2108645173507 and parameters: {'lambda_l1': 1.466792004901104e-05, 'lambda_l2': 0.4825226283151503, 'num_leaves': 286, 'learning_rate': 0.0061067857625925325, 'n_estimators': 1681, 'feature_fraction': 0.45453796399713703, 'bagging_fraction': 0.7903572570016415, 'bagging_freq': 1, 'min_child_samples': 8}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:43,521][0m Trial 67 finished with value: 2862.990151307796 and parameters: {'lambda_l1': 0.002182012224943602, 'lambda_l2': 0.011231797800213963, 'num_leaves': 481, 'learning_rate': 0.0026284251918730966, 'n_estimators': 1823, 'feature_fraction': 0.43318459653860103, 'bagging_fraction': 0.7011530911361397, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:45,659][0m Trial 68 finished with value: 3037.7262571458746 and parameters: {'lambda_l1': 0.00020972838612254063, 'lambda_l2': 0.13712661855883954, 'num_leaves': 255, 'learning_rate': 0.0003493227122047411, 'n_estimators': 2520, 'feature_fraction': 0.519336416870994, 'bagging_fraction': 0.9200276848087532, 'bagging_freq': 2, 'min_child_samples': 11}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:46,045][0m Trial 69 finished with value: 5727.766270450509 and parameters: {'lambda_l1': 0.002981703697005463, 'lambda_l2': 7.338473693522843e-05, 'num_leaves': 304, 'learning_rate': 6.523546790015943e-07, 'n_estimators': 709, 'feature_fraction': 0.8710518183584993, 'bagging_fraction': 0.8179584051634613, 'bagging_freq': 7, 'min_child_samples': 24}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:47,379][0m Trial 70 finished with value: 5433.306133164486 and parameters: {'lambda_l1': 0.03650088760209679, 'lambda_l2': 0.0001496657252526018, 'num_leaves': 231, 'learning_rate': 2.2999702241079422e-05, 'n_estimators': 1936, 'feature_fraction': 0.588464187601273, 'bagging_fraction': 0.7561565746987026, 'bagging_freq': 6, 'min_child_samples': 15}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:49,182][0m Trial 71 finished with value: 2772.9156150537037 and parameters: {'lambda_l1': 0.007718642034809913, 'lambda_l2': 2.334032993539118, 'num_leaves': 415, 'learning_rate': 0.0013514642717635875, 'n_estimators': 2162, 'feature_fraction': 0.4872975710398632, 'bagging_fraction': 0.7803539713674515, 'bagging_freq': 7, 'min_child_samples': 11}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:50,365][0m Trial 72 finished with value: 3018.7223531028753 and parameters: {'lambda_l1': 0.015922228866437182, 'lambda_l2': 1.9659354389379788, 'num_leaves': 370, 'learning_rate': 0.0013890362412206183, 'n_estimators': 2175, 'feature_fraction': 0.48757713639071387, 'bagging_fraction': 0.7810283286422016, 'bagging_freq': 7, 'min_child_samples': 19}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:51,747][0m Trial 73 finished with value: 4078.269085364196 and parameters: {'lambda_l1': 0.0013182304678936798, 'lambda_l2': 3.1832974212322735, 'num_leaves': 402, 'learning_rate': 0.00018928284818487277, 'n_estimators': 2037, 'feature_fraction': 0.4192288715025372, 'bagging_fraction': 0.8036889956049709, 'bagging_freq': 7, 'min_child_samples': 11}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:53,743][0m Trial 74 finished with value: 2797.872153001961 and parameters: {'lambda_l1': 0.0049589530142988515, 'lambda_l2': 4.894329433999434, 'num_leaves': 455, 'learning_rate': 0.0008215192839737149, 'n_estimators': 2281, 'feature_fraction': 0.46376882169005296, 'bagging_fraction': 0.7224844349581341, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:55,203][0m Trial 75 finished with value: 2983.452226441315 and parameters: {'lambda_l1': 0.006184529058756343, 'lambda_l2': 0.48057696373245856, 'num_leaves': 446, 'learning_rate': 0.0035334850362633294, 'n_estimators': 2366, 'feature_fraction': 0.5140679947176128, 'bagging_fraction': 0.6425444823732124, 'bagging_freq': 7, 'min_child_samples': 14}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:57,998][0m Trial 76 finished with value: 2690.4213640415583 and parameters: {'lambda_l1': 0.0037578057343714195, 'lambda_l2': 4.015872745198094, 'num_leaves': 491, 'learning_rate': 0.0009551994611075499, 'n_estimators': 2288, 'feature_fraction': 0.5288217621006006, 'bagging_fraction': 0.7223809170362099, 'bagging_freq': 7, 'min_child_samples': 6}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:54:58,451][0m Trial 77 finished with value: 5562.818257737595 and parameters: {'lambda_l1': 0.009886432169323663, 'lambda_l2': 1.9780412407185768, 'num_leaves': 494, 'learning_rate': 0.005870855918262681, 'n_estimators': 1847, 'feature_fraction': 0.5288232442106479, 'bagging_fraction': 0.7570118213977003, 'bagging_freq': 6, 'min_child_samples': 86}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:02,437][0m Trial 78 finished with value: 3207.0123587145613 and parameters: {'lambda_l1': 0.0005300795549889997, 'lambda_l2': 0.0003996540803923274, 'num_leaves': 432, 'learning_rate': 0.01098427925130348, 'n_estimators': 2185, 'feature_fraction': 0.4786354146951823, 'bagging_fraction': 0.6888667303397736, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:04,672][0m Trial 79 finished with value: 2812.20367681324 and parameters: {'lambda_l1': 4.222062872558192, 'lambda_l2': 9.792953984324711, 'num_leaves': 502, 'learning_rate': 0.001223256123460458, 'n_estimators': 2422, 'feature_fraction': 0.5408638646851943, 'bagging_fraction': 0.8704601582927579, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:06,456][0m Trial 80 finished with value: 3088.2260779519734 and parameters: {'lambda_l1': 0.0009118769590378113, 'lambda_l2': 0.36737746862902104, 'num_leaves': 413, 'learning_rate': 0.0004743728760997722, 'n_estimators': 2067, 'feature_fraction': 0.622711299300742, 'bagging_fraction': 0.7437602808721041, 'bagging_freq': 6, 'min_child_samples': 14}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:08,214][0m Trial 81 finished with value: 2862.4659900975844 and parameters: {'lambda_l1': 0.00377758056935139, 'lambda_l2': 5.365525167304485, 'num_leaves': 468, 'learning_rate': 0.0007472918541962218, 'n_estimators': 2308, 'feature_fraction': 0.44394898929617765, 'bagging_fraction': 0.7102939006528745, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:10,961][0m Trial 82 finished with value: 2673.2044640084005 and parameters: {'lambda_l1': 0.04121887403071796, 'lambda_l2': 2.5825372419034114, 'num_leaves': 454, 'learning_rate': 0.002271937614555947, 'n_estimators': 2262, 'feature_fraction': 0.6549591029943412, 'bagging_fraction': 0.7312687215379803, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:12,742][0m Trial 83 finished with value: 2848.604867627677 and parameters: {'lambda_l1': 0.399237605419288, 'lambda_l2': 0.6062243222161519, 'num_leaves': 435, 'learning_rate': 0.002574118466383981, 'n_estimators': 2471, 'feature_fraction': 0.8004274507223563, 'bagging_fraction': 0.6745432701812074, 'bagging_freq': 7, 'min_child_samples': 13}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:14,344][0m Trial 84 finished with value: 2732.334808636165 and parameters: {'lambda_l1': 0.04161458132978075, 'lambda_l2': 1.9980475817853895, 'num_leaves': 385, 'learning_rate': 0.001632612617070556, 'n_estimators': 1593, 'feature_fraction': 0.570734683578391, 'bagging_fraction': 0.6525601137084689, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:15,139][0m Trial 85 finished with value: 3048.408567340211 and parameters: {'lambda_l1': 0.11391496097916491, 'lambda_l2': 2.786888240612318, 'num_leaves': 386, 'learning_rate': 0.00160144111496232, 'n_estimators': 1536, 'feature_fraction': 0.5692118093803374, 'bagging_fraction': 0.7648717079458193, 'bagging_freq': 7, 'min_child_samples': 19}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:17,643][0m Trial 86 finished with value: 3379.225912636073 and parameters: {'lambda_l1': 0.05324786152850657, 'lambda_l2': 0.2296807826933253, 'num_leaves': 481, 'learning_rate': 0.0003940693632905677, 'n_estimators': 1461, 'feature_fraction': 0.556528827292113, 'bagging_fraction': 0.7320473733853112, 'bagging_freq': 7, 'min_child_samples': 5}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:19,761][0m Trial 87 finished with value: 2834.1065032091165 and parameters: {'lambda_l1': 0.9057804402810368, 'lambda_l2': 1.1089679361888365, 'num_leaves': 394, 'learning_rate': 0.0046144553107134315, 'n_estimators': 1614, 'feature_fraction': 0.6725609278211069, 'bagging_fraction': 0.828307915027615, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:20,817][0m Trial 88 finished with value: 4085.5938018703705 and parameters: {'lambda_l1': 0.15779850429338282, 'lambda_l2': 0.13484569593022325, 'num_leaves': 198, 'learning_rate': 0.00021143178196544258, 'n_estimators': 1719, 'feature_fraction': 0.6604441741808926, 'bagging_fraction': 0.6463561934159356, 'bagging_freq': 7, 'min_child_samples': 16}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:21,701][0m Trial 89 finished with value: 3044.424115191738 and parameters: {'lambda_l1': 0.02131646815774261, 'lambda_l2': 2.05041233511974, 'num_leaves': 457, 'learning_rate': 0.012894203721700677, 'n_estimators': 1322, 'feature_fraction': 0.6131164760920323, 'bagging_fraction': 0.6957749298126792, 'bagging_freq': 7, 'min_child_samples': 12}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:24,547][0m Trial 90 finished with value: 3329.4507770619603 and parameters: {'lambda_l1': 0.27012153534190186, 'lambda_l2': 3.6455691823196275, 'num_leaves': 425, 'learning_rate': 0.029138257843500413, 'n_estimators': 2197, 'feature_fraction': 0.7270654982858279, 'bagging_fraction': 0.8491545308901065, 'bagging_freq': 7, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:27,333][0m Trial 91 finished with value: 2747.062753028563 and parameters: {'lambda_l1': 0.044659542743697433, 'lambda_l2': 0.03371819722215067, 'num_leaves': 404, 'learning_rate': 0.002464383886562908, 'n_estimators': 2380, 'feature_fraction': 0.5782963797857087, 'bagging_fraction': 0.790047580365173, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:29,502][0m Trial 92 finished with value: 2669.1908268299394 and parameters: {'lambda_l1': 0.04629090662374762, 'lambda_l2': 0.0360909530871708, 'num_leaves': 364, 'learning_rate': 0.001459649815122177, 'n_estimators': 2395, 'feature_fraction': 0.5820385971808101, 'bagging_fraction': 0.7716532101466486, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:31,878][0m Trial 93 finished with value: 2694.0468849516133 and parameters: {'lambda_l1': 0.05026579894065081, 'lambda_l2': 0.039854124560783154, 'num_leaves': 404, 'learning_rate': 0.0013788387994085542, 'n_estimators': 2393, 'feature_fraction': 0.6441111874075973, 'bagging_fraction': 0.6527068009933258, 'bagging_freq': 7, 'min_child_samples': 10}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:35,044][0m Trial 94 finished with value: 2726.2061996189013 and parameters: {'lambda_l1': 0.04718301980879577, 'lambda_l2': 0.08795938946514884, 'num_leaves': 357, 'learning_rate': 0.0006195525959236892, 'n_estimators': 2552, 'feature_fraction': 0.6326072139511979, 'bagging_fraction': 0.6527377822919426, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:37,876][0m Trial 95 finished with value: 2728.155699876394 and parameters: {'lambda_l1': 0.041631893270227906, 'lambda_l2': 0.043025028763987276, 'num_leaves': 355, 'learning_rate': 0.0006215061009794225, 'n_estimators': 2543, 'feature_fraction': 0.6448092857494815, 'bagging_fraction': 0.6519104815060146, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:39,983][0m Trial 96 finished with value: 2974.643777903666 and parameters: {'lambda_l1': 0.03356477488816523, 'lambda_l2': 0.04811829194833959, 'num_leaves': 363, 'learning_rate': 0.0006328293375468287, 'n_estimators': 2776, 'feature_fraction': 0.6400900640016098, 'bagging_fraction': 0.6575893470806767, 'bagging_freq': 7, 'min_child_samples': 16}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:41,523][0m Trial 97 finished with value: 3625.8562378877664 and parameters: {'lambda_l1': 0.12758464922220486, 'lambda_l2': 0.03095987230787349, 'num_leaves': 323, 'learning_rate': 0.00028972347499818275, 'n_estimators': 2526, 'feature_fraction': 0.6415855547597435, 'bagging_fraction': 0.602354680796889, 'bagging_freq': 7, 'min_child_samples': 21}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:43,822][0m Trial 98 finished with value: 4118.316794328605 and parameters: {'lambda_l1': 0.0516900708551549, 'lambda_l2': 0.09660345872893478, 'num_leaves': 352, 'learning_rate': 0.0001258666519171059, 'n_estimators': 2493, 'feature_fraction': 0.6542376116921809, 'bagging_fraction': 0.6241317427297203, 'bagging_freq': 7, 'min_child_samples': 9}. Best is trial 44 with value: 2657.1241547837044.[0m
    [32m[I 2022-12-31 08:55:47,520][0m Trial 99 finished with value: 2723.1305783882212 and parameters: {'lambda_l1': 0.012986629608723172, 'lambda_l2': 0.008435608410702327, 'num_leaves': 333, 'learning_rate': 0.0019452312715937754, 'n_estimators': 2620, 'feature_fraction': 0.6943801195290614, 'bagging_fraction': 0.6535464081977231, 'bagging_freq': 6, 'min_child_samples': 7}. Best is trial 44 with value: 2657.1241547837044.[0m
    

    {'lambda_l1': 0.0005898262404628944, 'lambda_l2': 0.0026596119232511423, 'num_leaves': 233, 'learning_rate': 0.0010456924170680736, 'n_estimators': 2168, 'feature_fraction': 0.4974578727308233, 'bagging_fraction': 0.7353514883774996, 'bagging_freq': 7, 'min_child_samples': 9}
    


```python
def objective(trial):
    dtrain = xgb.DMatrix(X_train, label=y_train)

    param = {
        'objective': 'reg:squarederror',
        'metric': 'mse',
        'verbosity': 0,
        'boosting_type': 'gbdt',
        'lambda_l1': trial.suggest_loguniform('lambda_l1', 1e-8, 10.0),
        'lambda_l2': trial.suggest_loguniform('lambda_l2', 1e-8, 10.0),
        'num_leaves': trial.suggest_int('num_leaves', 2, 512),
        'learning_rate': trial.suggest_loguniform('learning_rate', 1e-8, 1.0),
        'n_estimators': trial.suggest_int('n_estimators', 700, 3000),
        'feature_fraction': trial.suggest_uniform('feature_fraction', 0.4, 1.0),
        'bagging_fraction': trial.suggest_uniform('bagging_fraction', 0.4, 1.0),
        'bagging_freq': trial.suggest_int('bagging_freq', 1, 7),
        'min_child_samples': trial.suggest_int('min_child_samples', 5, 100),
    }

    gbm = xgb.train(param, dtrain)
    return mean_squared_error(y_test, gbm.predict(xgb.DMatrix(X_test, label=np.ones_like(y_test))))

study = optuna.create_study(direction='minimize', sampler=sampler)
study.optimize(objective, n_trials=100)
xgb_params = study.best_params
print(xgb_params)
```

    [32m[I 2022-12-31 08:55:49,015][0m A new study created in memory with name: no-name-976792ff-7d1b-4c02-ab81-46f1fc97336d[0m
    [32m[I 2022-12-31 08:55:49,051][0m Trial 0 finished with value: 5327.20716434545 and parameters: {'lambda_l1': 0.0001888818495451605, 'lambda_l2': 4.316997395148871e-06, 'num_leaves': 34, 'learning_rate': 0.6769446589927728, 'n_estimators': 1481, 'feature_fraction': 0.6970291785294727, 'bagging_fraction': 0.9862484355536091, 'bagging_freq': 4, 'min_child_samples': 35}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,079][0m Trial 1 finished with value: 178522.4041871772 and parameters: {'lambda_l1': 0.0004766206700594015, 'lambda_l2': 0.0015967167049923197, 'num_leaves': 438, 'learning_rate': 3.5057277657330025e-08, 'n_estimators': 1768, 'feature_fraction': 0.869169471171489, 'bagging_fraction': 0.8311616862293502, 'bagging_freq': 5, 'min_child_samples': 8}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,107][0m Trial 2 finished with value: 178107.4634507458 and parameters: {'lambda_l1': 1.4318829623595658e-05, 'lambda_l2': 0.001171429510270195, 'num_leaves': 155, 'learning_rate': 0.00012550852514250831, 'n_estimators': 2249, 'feature_fraction': 0.4955162400268561, 'bagging_fraction': 0.4302866020923986, 'bagging_freq': 3, 'min_child_samples': 15}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,135][0m Trial 3 finished with value: 178520.65759428203 and parameters: {'lambda_l1': 4.0749780818897353e-07, 'lambda_l2': 0.9385207208605129, 'num_leaves': 188, 'learning_rate': 5.625417934541377e-07, 'n_estimators': 2431, 'feature_fraction': 0.46412775063614153, 'bagging_fraction': 0.8467619444653364, 'bagging_freq': 4, 'min_child_samples': 62}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,167][0m Trial 4 finished with value: 178522.43885207467 and parameters: {'lambda_l1': 2.1309915644933492e-07, 'lambda_l2': 4.532245211996864e-07, 'num_leaves': 331, 'learning_rate': 2.4491988683999263e-08, 'n_estimators': 1272, 'feature_fraction': 0.7254451097368025, 'bagging_fraction': 0.5360640059620055, 'bagging_freq': 3, 'min_child_samples': 93}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,195][0m Trial 5 finished with value: 178522.4767138864 and parameters: {'lambda_l1': 2.1291774395752365, 'lambda_l2': 0.0012610994061319214, 'num_leaves': 274, 'learning_rate': 1.3148620689762314e-08, 'n_estimators': 2950, 'feature_fraction': 0.7438173424199115, 'bagging_fraction': 0.8750541977659744, 'bagging_freq': 4, 'min_child_samples': 89}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,231][0m Trial 6 finished with value: 178433.91867963446 and parameters: {'lambda_l1': 0.0018103496266266559, 'lambda_l2': 0.023968918423710666, 'num_leaves': 77, 'learning_rate': 2.6767382919203297e-05, 'n_estimators': 2296, 'feature_fraction': 0.4627718467137119, 'bagging_fraction': 0.6637631426647543, 'bagging_freq': 2, 'min_child_samples': 53}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,259][0m Trial 7 finished with value: 177427.0302202046 and parameters: {'lambda_l1': 0.2351379768824919, 'lambda_l2': 6.470839270888937e-08, 'num_leaves': 410, 'learning_rate': 0.00033190273537724176, 'n_estimators': 2056, 'feature_fraction': 0.5188603943297614, 'bagging_fraction': 0.6616709532033006, 'bagging_freq': 3, 'min_child_samples': 8}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,287][0m Trial 8 finished with value: 177573.7926043661 and parameters: {'lambda_l1': 1.888702535568543e-08, 'lambda_l2': 0.00011965889880637617, 'num_leaves': 382, 'learning_rate': 0.00028731827469375126, 'n_estimators': 1586, 'feature_fraction': 0.5008436785195712, 'bagging_fraction': 0.9029567924222157, 'bagging_freq': 5, 'min_child_samples': 80}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,315][0m Trial 9 finished with value: 175751.27659324958 and parameters: {'lambda_l1': 0.4330944686134719, 'lambda_l2': 0.002682049461800648, 'num_leaves': 401, 'learning_rate': 0.000843130904208232, 'n_estimators': 748, 'feature_fraction': 0.8502787662924947, 'bagging_fraction': 0.5056252799702163, 'bagging_freq': 4, 'min_child_samples': 54}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,403][0m Trial 10 finished with value: 7453.410148460127 and parameters: {'lambda_l1': 0.011761885603161382, 'lambda_l2': 3.996667731664228e-06, 'num_leaves': 12, 'learning_rate': 0.862157387112471, 'n_estimators': 875, 'feature_fraction': 0.9982569677012602, 'bagging_fraction': 0.9604381931791035, 'bagging_freq': 7, 'min_child_samples': 28}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,491][0m Trial 11 finished with value: 8810.749358967072 and parameters: {'lambda_l1': 0.006427294606351526, 'lambda_l2': 3.4406206439893753e-06, 'num_leaves': 6, 'learning_rate': 0.8212195156571136, 'n_estimators': 748, 'feature_fraction': 0.9729196921001799, 'bagging_fraction': 0.967306138778092, 'bagging_freq': 7, 'min_child_samples': 30}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,575][0m Trial 12 finished with value: 7312.721138026601 and parameters: {'lambda_l1': 1.9270993922623997e-05, 'lambda_l2': 4.764630986587589e-06, 'num_leaves': 6, 'learning_rate': 0.7204291387934832, 'n_estimators': 1205, 'feature_fraction': 0.6190972966072006, 'bagging_fraction': 0.9853688902190856, 'bagging_freq': 7, 'min_child_samples': 35}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,651][0m Trial 13 finished with value: 80808.71695107392 and parameters: {'lambda_l1': 2.0403430749397625e-05, 'lambda_l2': 1.2314847116169236e-08, 'num_leaves': 78, 'learning_rate': 0.0431867590038944, 'n_estimators': 1290, 'feature_fraction': 0.6132581364176046, 'bagging_fraction': 0.7589977261675779, 'bagging_freq': 1, 'min_child_samples': 34}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,732][0m Trial 14 finished with value: 105242.8113448466 and parameters: {'lambda_l1': 1.3000667003547095e-05, 'lambda_l2': 2.293836622020224e-05, 'num_leaves': 81, 'learning_rate': 0.028429194991705226, 'n_estimators': 1151, 'feature_fraction': 0.6236975227048235, 'bagging_fraction': 0.9436692396970067, 'bagging_freq': 6, 'min_child_samples': 39}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,848][0m Trial 15 finished with value: 55411.62698410047 and parameters: {'lambda_l1': 3.929964534222476e-05, 'lambda_l2': 2.7022988652088483e-07, 'num_leaves': 163, 'learning_rate': 0.06440504119211755, 'n_estimators': 1511, 'feature_fraction': 0.6219223324085502, 'bagging_fraction': 0.9976896920322766, 'bagging_freq': 6, 'min_child_samples': 70}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:49,932][0m Trial 16 finished with value: 156350.28853019272 and parameters: {'lambda_l1': 8.022679028048681e-07, 'lambda_l2': 2.7622477510271955e-05, 'num_leaves': 3, 'learning_rate': 0.007034276991039631, 'n_estimators': 1051, 'feature_fraction': 0.8098293212307867, 'bagging_fraction': 0.772637094612926, 'bagging_freq': 1, 'min_child_samples': 43}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,012][0m Trial 17 finished with value: 5683.137847590796 and parameters: {'lambda_l1': 0.0002230993595614253, 'lambda_l2': 1.5941051378495475e-08, 'num_leaves': 112, 'learning_rate': 0.3733494571707961, 'n_estimators': 1501, 'feature_fraction': 0.6776093919510502, 'bagging_fraction': 0.9892460247932932, 'bagging_freq': 6, 'min_child_samples': 20}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,092][0m Trial 18 finished with value: 178492.34313819525 and parameters: {'lambda_l1': 0.00026556545264646555, 'lambda_l2': 1.0158446872334201e-08, 'num_leaves': 502, 'learning_rate': 9.115259113442877e-06, 'n_estimators': 1913, 'feature_fraction': 0.6919661871396877, 'bagging_fraction': 0.7918043490002333, 'bagging_freq': 5, 'min_child_samples': 14}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,168][0m Trial 19 finished with value: 169275.3063622441 and parameters: {'lambda_l1': 0.01566127781699684, 'lambda_l2': 9.64684732813375e-08, 'num_leaves': 214, 'learning_rate': 0.002831946306145493, 'n_estimators': 1565, 'feature_fraction': 0.7958224588661117, 'bagging_fraction': 0.9015006884188699, 'bagging_freq': 6, 'min_child_samples': 19}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,253][0m Trial 20 finished with value: 10785.899784692476 and parameters: {'lambda_l1': 0.00019592397985782143, 'lambda_l2': 1.0769020269549733e-08, 'num_leaves': 117, 'learning_rate': 0.1713175660664826, 'n_estimators': 1791, 'feature_fraction': 0.4008662306948068, 'bagging_fraction': 0.700817185696134, 'bagging_freq': 2, 'min_child_samples': 21}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,341][0m Trial 21 finished with value: 5548.905729017896 and parameters: {'lambda_l1': 1.8828717607308233e-06, 'lambda_l2': 1.4862779293268975e-06, 'num_leaves': 44, 'learning_rate': 0.37674327122968787, 'n_estimators': 1494, 'feature_fraction': 0.5779587573716074, 'bagging_fraction': 0.9961666056308704, 'bagging_freq': 7, 'min_child_samples': 44}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,437][0m Trial 22 finished with value: 7529.112451688915 and parameters: {'lambda_l1': 1.8917434695400575e-06, 'lambda_l2': 9.051232889576424e-07, 'num_leaves': 61, 'learning_rate': 0.21522369247191242, 'n_estimators': 1472, 'feature_fraction': 0.5700525597959893, 'bagging_fraction': 0.9338541460416278, 'bagging_freq': 6, 'min_child_samples': 46}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,521][0m Trial 23 finished with value: 148757.50840487878 and parameters: {'lambda_l1': 5.301754941071211e-08, 'lambda_l2': 6.191492941966054e-08, 'num_leaves': 45, 'learning_rate': 0.009652292379460744, 'n_estimators': 1372, 'feature_fraction': 0.680253373412271, 'bagging_fraction': 0.9905093355473467, 'bagging_freq': 7, 'min_child_samples': 26}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,597][0m Trial 24 finished with value: 6434.097305779239 and parameters: {'lambda_l1': 0.0016462237834650863, 'lambda_l2': 1.0921851920445456e-06, 'num_leaves': 103, 'learning_rate': 0.41636767481918363, 'n_estimators': 986, 'feature_fraction': 0.5700895513576169, 'bagging_fraction': 0.9975579872879543, 'bagging_freq': 5, 'min_child_samples': 47}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,685][0m Trial 25 finished with value: 30848.582712203748 and parameters: {'lambda_l1': 3.8009044795753193e-06, 'lambda_l2': 5.6568629700521575e-05, 'num_leaves': 256, 'learning_rate': 0.09890471382711499, 'n_estimators': 1685, 'feature_fraction': 0.6847315302126145, 'bagging_fraction': 0.9193961631057095, 'bagging_freq': 6, 'min_child_samples': 60}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,765][0m Trial 26 finished with value: 128704.36962087214 and parameters: {'lambda_l1': 9.741938640712126e-05, 'lambda_l2': 8.879694518716962e-06, 'num_leaves': 28, 'learning_rate': 0.017221902002557757, 'n_estimators': 1996, 'feature_fraction': 0.7543568531758795, 'bagging_fraction': 0.8624168865379104, 'bagging_freq': 7, 'min_child_samples': 37}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,845][0m Trial 27 finished with value: 171332.05290699628 and parameters: {'lambda_l1': 0.0015657661324485596, 'lambda_l2': 0.00026933164611685277, 'num_leaves': 135, 'learning_rate': 0.00220001437470824, 'n_estimators': 1665, 'feature_fraction': 0.6592617399744385, 'bagging_fraction': 0.9429735449189176, 'bagging_freq': 5, 'min_child_samples': 5}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:50,925][0m Trial 28 finished with value: 6780.36332944866 and parameters: {'lambda_l1': 0.04588593835147481, 'lambda_l2': 4.2019750735925433e-08, 'num_leaves': 223, 'learning_rate': 0.23664659709413213, 'n_estimators': 1357, 'feature_fraction': 0.563378294408683, 'bagging_fraction': 0.8173599775971404, 'bagging_freq': 6, 'min_child_samples': 24}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:51,009][0m Trial 29 finished with value: 7677.694948041178 and parameters: {'lambda_l1': 0.0006749306659443159, 'lambda_l2': 2.9068473154853347e-07, 'num_leaves': 45, 'learning_rate': 0.646558438258129, 'n_estimators': 1805, 'feature_fraction': 0.787685668597583, 'bagging_fraction': 0.8894828441168744, 'bagging_freq': 5, 'min_child_samples': 11}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:51,085][0m Trial 30 finished with value: 178522.03348726628 and parameters: {'lambda_l1': 3.2723776584945307e-06, 'lambda_l2': 1.8421119136266882e-06, 'num_leaves': 117, 'learning_rate': 1.469366594935434e-07, 'n_estimators': 1436, 'feature_fraction': 0.88270071370498, 'bagging_fraction': 0.9977703761746555, 'bagging_freq': 2, 'min_child_samples': 43}. Best is trial 0 with value: 5327.20716434545.[0m
    [32m[I 2022-12-31 08:55:51,187][0m Trial 31 finished with value: 5228.844400863804 and parameters: {'lambda_l1': 0.002229077973427981, 'lambda_l2': 1.1927045607102207e-06, 'num_leaves': 102, 'learning_rate': 0.3123197545985689, 'n_estimators': 931, 'feature_fraction': 0.5703903937540306, 'bagging_fraction': 0.9933039245551636, 'bagging_freq': 5, 'min_child_samples': 48}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,271][0m Trial 32 finished with value: 38610.60909036159 and parameters: {'lambda_l1': 0.0007257123557655791, 'lambda_l2': 1.450394712475575e-05, 'num_leaves': 156, 'learning_rate': 0.08490008373210119, 'n_estimators': 1067, 'feature_fraction': 0.5444916302670612, 'bagging_fraction': 0.9999579266874048, 'bagging_freq': 4, 'min_child_samples': 62}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,359][0m Trial 33 finished with value: 7179.962745852409 and parameters: {'lambda_l1': 0.06494568286291709, 'lambda_l2': 1.8057512092574377e-07, 'num_leaves': 91, 'learning_rate': 0.8456807066421806, 'n_estimators': 875, 'feature_fraction': 0.6442104601550547, 'bagging_fraction': 0.9576096655717095, 'bagging_freq': 5, 'min_child_samples': 50}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,442][0m Trial 34 finished with value: 6898.568617829216 and parameters: {'lambda_l1': 6.692873287544719e-05, 'lambda_l2': 8.034478849061668e-07, 'num_leaves': 139, 'learning_rate': 0.2270998003838242, 'n_estimators': 2708, 'feature_fraction': 0.43324643117656203, 'bagging_fraction': 0.8321897835768459, 'bagging_freq': 4, 'min_child_samples': 31}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,531][0m Trial 35 finished with value: 98404.69838232738 and parameters: {'lambda_l1': 1.663688230637258e-07, 'lambda_l2': 2.1918755994882893e-08, 'num_leaves': 41, 'learning_rate': 0.032137976024368506, 'n_estimators': 2176, 'feature_fraction': 0.7254476238726804, 'bagging_fraction': 0.5782457915127904, 'bagging_freq': 3, 'min_child_samples': 39}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,615][0m Trial 36 finished with value: 178518.73032068904 and parameters: {'lambda_l1': 0.004409707483953395, 'lambda_l2': 1.808925293250357, 'num_leaves': 179, 'learning_rate': 1.1446578041540938e-06, 'n_estimators': 1683, 'feature_fraction': 0.5909573788164116, 'bagging_fraction': 0.4412873291306627, 'bagging_freq': 5, 'min_child_samples': 59}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,699][0m Trial 37 finished with value: 162064.1595233202 and parameters: {'lambda_l1': 7.791108275082438e-06, 'lambda_l2': 0.013226625139358527, 'num_leaves': 201, 'learning_rate': 0.005125502846613707, 'n_estimators': 1231, 'feature_fraction': 0.535186316930605, 'bagging_fraction': 0.9168268500926235, 'bagging_freq': 4, 'min_child_samples': 18}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,787][0m Trial 38 finished with value: 27412.17595299396 and parameters: {'lambda_l1': 0.00013374719695966215, 'lambda_l2': 0.000371560686156239, 'num_leaves': 307, 'learning_rate': 0.10513233863454259, 'n_estimators': 1901, 'feature_fraction': 0.4586602545301737, 'bagging_fraction': 0.8852239739282464, 'bagging_freq': 6, 'min_child_samples': 42}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,868][0m Trial 39 finished with value: 132495.2692042213 and parameters: {'lambda_l1': 0.00036999164964896734, 'lambda_l2': 8.960374434612655e-05, 'num_leaves': 57, 'learning_rate': 0.01564818472576983, 'n_estimators': 912, 'feature_fraction': 0.655024859775838, 'bagging_fraction': 0.9663090535948278, 'bagging_freq': 3, 'min_child_samples': 53}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:51,958][0m Trial 40 finished with value: 5307.959592565971 and parameters: {'lambda_l1': 4.912048755379959e-07, 'lambda_l2': 9.244812249928383, 'num_leaves': 109, 'learning_rate': 0.35199281816341754, 'n_estimators': 1374, 'feature_fraction': 0.4994503746784509, 'bagging_fraction': 0.8539098315358733, 'bagging_freq': 5, 'min_child_samples': 73}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,046][0m Trial 41 finished with value: 5589.757918056296 and parameters: {'lambda_l1': 1.478502461065695e-08, 'lambda_l2': 7.379957552955754, 'num_leaves': 110, 'learning_rate': 0.377658881640157, 'n_estimators': 1374, 'feature_fraction': 0.49466588977287046, 'bagging_fraction': 0.7242084048513233, 'bagging_freq': 5, 'min_child_samples': 68}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,165][0m Trial 42 finished with value: 5606.644463409547 and parameters: {'lambda_l1': 1.3745834752390552e-07, 'lambda_l2': 7.820629404204771, 'num_leaves': 68, 'learning_rate': 0.5081028685470984, 'n_estimators': 1344, 'feature_fraction': 0.4861641679075105, 'bagging_fraction': 0.7080024821084132, 'bagging_freq': 4, 'min_child_samples': 72}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,253][0m Trial 43 finished with value: 9259.662143648697 and parameters: {'lambda_l1': 2.026015729382663e-08, 'lambda_l2': 0.22678150731758637, 'num_leaves': 26, 'learning_rate': 0.8355290256095809, 'n_estimators': 1162, 'feature_fraction': 0.5028599808490792, 'bagging_fraction': 0.6309116041918462, 'bagging_freq': 5, 'min_child_samples': 84}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,333][0m Trial 44 finished with value: 16412.2804025229 and parameters: {'lambda_l1': 9.035449645639488e-07, 'lambda_l2': 7.694568106031403, 'num_leaves': 124, 'learning_rate': 0.14063578879500804, 'n_estimators': 707, 'feature_fraction': 0.40792788975096217, 'bagging_fraction': 0.7443603506111416, 'bagging_freq': 4, 'min_child_samples': 70}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,417][0m Trial 45 finished with value: 9486.746433276576 and parameters: {'lambda_l1': 1.2605367559646974e-08, 'lambda_l2': 0.6436744962186203, 'num_leaves': 92, 'learning_rate': 0.9697459296783214, 'n_estimators': 1615, 'feature_fraction': 0.46387543004896886, 'bagging_fraction': 0.8533458912324587, 'bagging_freq': 5, 'min_child_samples': 97}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,501][0m Trial 46 finished with value: 65765.91305024058 and parameters: {'lambda_l1': 4.393964775056973e-08, 'lambda_l2': 3.0958478400176883, 'num_leaves': 176, 'learning_rate': 0.05477266120123708, 'n_estimators': 1093, 'feature_fraction': 0.5285070591213039, 'bagging_fraction': 0.6251115851713619, 'bagging_freq': 3, 'min_child_samples': 66}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,585][0m Trial 47 finished with value: 178390.31341351627 and parameters: {'lambda_l1': 3.151731702644989e-07, 'lambda_l2': 0.13831915945559498, 'num_leaves': 146, 'learning_rate': 3.994590840595034e-05, 'n_estimators': 1266, 'feature_fraction': 0.43155536340361583, 'bagging_fraction': 0.7262154640776897, 'bagging_freq': 4, 'min_child_samples': 78}. Best is trial 31 with value: 5228.844400863804.[0m
    [32m[I 2022-12-31 08:55:52,677][0m Trial 48 finished with value: 5201.422836991052 and parameters: {'lambda_l1': 2.7807318097494167, 'lambda_l2': 3.1216708735373156e-06, 'num_leaves': 22, 'learning_rate': 0.3404906704798139, 'n_estimators': 1426, 'feature_fraction': 0.4881557373437832, 'bagging_fraction': 0.8133550572509327, 'bagging_freq': 5, 'min_child_samples': 76}. Best is trial 48 with value: 5201.422836991052.[0m
    [32m[I 2022-12-31 08:55:52,757][0m Trial 49 finished with value: 115954.93284115213 and parameters: {'lambda_l1': 2.0031967410730673, 'lambda_l2': 3.1254514588877937e-06, 'num_leaves': 20, 'learning_rate': 0.023048703405750208, 'n_estimators': 1740, 'feature_fraction': 0.5117697663505012, 'bagging_fraction': 0.8044884468957504, 'bagging_freq': 3, 'min_child_samples': 86}. Best is trial 48 with value: 5201.422836991052.[0m
    [32m[I 2022-12-31 08:55:52,841][0m Trial 50 finished with value: 176870.72327434723 and parameters: {'lambda_l1': 0.21797386746254788, 'lambda_l2': 6.793732062733501e-06, 'num_leaves': 9, 'learning_rate': 0.0005012393152603829, 'n_estimators': 1539, 'feature_fraction': 0.6037241966346655, 'bagging_fraction': 0.8515134281815279, 'bagging_freq': 5, 'min_child_samples': 76}. Best is trial 48 with value: 5201.422836991052.[0m
    [32m[I 2022-12-31 08:55:52,929][0m Trial 51 finished with value: 4929.880123656952 and parameters: {'lambda_l1': 6.522307042329539e-08, 'lambda_l2': 4.069619623578273e-07, 'num_leaves': 74, 'learning_rate': 0.3318062589617651, 'n_estimators': 1450, 'feature_fraction': 0.48220569118194867, 'bagging_fraction': 0.6622825298142515, 'bagging_freq': 5, 'min_child_samples': 65}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,021][0m Trial 52 finished with value: 7826.379725384484 and parameters: {'lambda_l1': 6.813279776600302, 'lambda_l2': 4.5221633614841765e-07, 'num_leaves': 72, 'learning_rate': 0.989302508487786, 'n_estimators': 1419, 'feature_fraction': 0.43803976965972397, 'bagging_fraction': 0.6674708050888218, 'bagging_freq': 5, 'min_child_samples': 64}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,113][0m Trial 53 finished with value: 71756.07082764368 and parameters: {'lambda_l1': 6.496177693730432e-07, 'lambda_l2': 2.0716734488931465e-06, 'num_leaves': 41, 'learning_rate': 0.05007991777533474, 'n_estimators': 1276, 'feature_fraction': 0.4888582679689207, 'bagging_fraction': 0.7778875153974801, 'bagging_freq': 4, 'min_child_samples': 56}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,197][0m Trial 54 finished with value: 5882.5693169337355 and parameters: {'lambda_l1': 7.571164900873476e-08, 'lambda_l2': 1.2133754602198733e-07, 'num_leaves': 90, 'learning_rate': 0.2779384952170515, 'n_estimators': 1583, 'feature_fraction': 0.5518799877147943, 'bagging_fraction': 0.6819242746716259, 'bagging_freq': 6, 'min_child_samples': 73}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,285][0m Trial 55 finished with value: 22029.16831225501 and parameters: {'lambda_l1': 1.4862145120088875e-06, 'lambda_l2': 7.377723203806523e-07, 'num_leaves': 55, 'learning_rate': 0.11789937270520089, 'n_estimators': 1488, 'feature_fraction': 0.5976060388251008, 'bagging_fraction': 0.9717365977673831, 'bagging_freq': 4, 'min_child_samples': 50}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,377][0m Trial 56 finished with value: 6063.413975110791 and parameters: {'lambda_l1': 3.195993039913402e-05, 'lambda_l2': 2.5811096433243414e-05, 'num_leaves': 6, 'learning_rate': 0.41553013659181604, 'n_estimators': 1171, 'feature_fraction': 0.5217869058781756, 'bagging_fraction': 0.6064528550832294, 'bagging_freq': 5, 'min_child_samples': 82}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,461][0m Trial 57 finished with value: 10168.448935635894 and parameters: {'lambda_l1': 9.300399756451593e-06, 'lambda_l2': 9.737285989721642e-06, 'num_leaves': 73, 'learning_rate': 0.17442150814277257, 'n_estimators': 977, 'feature_fraction': 0.4730392885844655, 'bagging_fraction': 0.5486805433757734, 'bagging_freq': 6, 'min_child_samples': 57}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,546][0m Trial 58 finished with value: 48011.71904419338 and parameters: {'lambda_l1': 3.6949031222872195e-07, 'lambda_l2': 1.5110649307048073e-06, 'num_leaves': 20, 'learning_rate': 0.07164683065617294, 'n_estimators': 812, 'feature_fraction': 0.5812346906978996, 'bagging_fraction': 0.6432216776273818, 'bagging_freq': 7, 'min_child_samples': 92}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,630][0m Trial 59 finished with value: 5717.708151073216 and parameters: {'lambda_l1': 7.565131692400391, 'lambda_l2': 3.809209425157373e-07, 'num_leaves': 35, 'learning_rate': 0.4220413004934599, 'n_estimators': 1721, 'feature_fraction': 0.40624881728919615, 'bagging_fraction': 0.9252410745970356, 'bagging_freq': 5, 'min_child_samples': 33}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,714][0m Trial 60 finished with value: 145568.42525729723 and parameters: {'lambda_l1': 1.4957522738437274, 'lambda_l2': 2.838214903601212e-06, 'num_leaves': 456, 'learning_rate': 0.010743766353002154, 'n_estimators': 1606, 'feature_fraction': 0.4488915247971426, 'bagging_fraction': 0.7462383759190724, 'bagging_freq': 6, 'min_child_samples': 47}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,799][0m Trial 61 finished with value: 5064.621866857641 and parameters: {'lambda_l1': 3.554001707987721e-08, 'lambda_l2': 4.908066472198148e-06, 'num_leaves': 104, 'learning_rate': 0.32903570431665297, 'n_estimators': 1357, 'feature_fraction': 0.48557100797712033, 'bagging_fraction': 0.690211267689669, 'bagging_freq': 5, 'min_child_samples': 66}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,883][0m Trial 62 finished with value: 8596.599188030777 and parameters: {'lambda_l1': 3.003902639298359e-08, 'lambda_l2': 5.288379532346749e-06, 'num_leaves': 101, 'learning_rate': 0.1929730728494646, 'n_estimators': 1330, 'feature_fraction': 0.5492391079055965, 'bagging_fraction': 0.6810111396799214, 'bagging_freq': 5, 'min_child_samples': 74}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:53,971][0m Trial 63 finished with value: 7998.8544523308 and parameters: {'lambda_l1': 1.1099767582993703e-07, 'lambda_l2': 5.882458801853161e-05, 'num_leaves': 78, 'learning_rate': 0.8909463749798626, 'n_estimators': 1435, 'feature_fraction': 0.4797380133063797, 'bagging_fraction': 0.5853019288232891, 'bagging_freq': 5, 'min_child_samples': 79}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,047][0m Trial 64 finished with value: 86209.24274322383 and parameters: {'lambda_l1': 2.3800780979714826e-07, 'lambda_l2': 1.3031907944142927e-05, 'num_leaves': 128, 'learning_rate': 0.039642193576921635, 'n_estimators': 1109, 'feature_fraction': 0.5105081675876249, 'bagging_fraction': 0.7063443155143873, 'bagging_freq': 4, 'min_child_samples': 63}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,143][0m Trial 65 finished with value: 6275.194499014888 and parameters: {'lambda_l1': 4.370636147464085e-06, 'lambda_l2': 6.888121013538687e-07, 'num_leaves': 51, 'learning_rate': 0.5582518298900702, 'n_estimators': 1223, 'feature_fraction': 0.6262145733217529, 'bagging_fraction': 0.6595564273086352, 'bagging_freq': 5, 'min_child_samples': 67}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,231][0m Trial 66 finished with value: 5865.344054138613 and parameters: {'lambda_l1': 8.192542293931687e-08, 'lambda_l2': 1.383479018595885e-07, 'num_leaves': 161, 'learning_rate': 0.26026431571261927, 'n_estimators': 1513, 'feature_fraction': 0.707011504652704, 'bagging_fraction': 0.9535422812361712, 'bagging_freq': 6, 'min_child_samples': 51}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,312][0m Trial 67 finished with value: 25654.98699783098 and parameters: {'lambda_l1': 5.844938312745742e-07, 'lambda_l2': 3.2703826430772274e-08, 'num_leaves': 96, 'learning_rate': 0.10945387269622832, 'n_estimators': 1835, 'feature_fraction': 0.5642877159944608, 'bagging_fraction': 0.8248476426208649, 'bagging_freq': 5, 'min_child_samples': 59}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,392][0m Trial 68 finished with value: 48152.74255248658 and parameters: {'lambda_l1': 1.2135030384995353e-06, 'lambda_l2': 1.3520789196140966e-06, 'num_leaves': 2, 'learning_rate': 0.07148138895994044, 'n_estimators': 1428, 'feature_fraction': 0.42534365392952095, 'bagging_fraction': 0.9773565596313439, 'bagging_freq': 2, 'min_child_samples': 41}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,484][0m Trial 69 finished with value: 6926.893609549716 and parameters: {'lambda_l1': 0.02363228874456656, 'lambda_l2': 2.4917635456332124e-07, 'num_leaves': 61, 'learning_rate': 0.5570805848856124, 'n_estimators': 993, 'feature_fraction': 0.5293485465015922, 'bagging_fraction': 0.9065956280601339, 'bagging_freq': 4, 'min_child_samples': 37}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,568][0m Trial 70 finished with value: 104974.421212885 and parameters: {'lambda_l1': 2.266882805720712e-06, 'lambda_l2': 6.61293596618239e-08, 'num_leaves': 241, 'learning_rate': 0.02856654114312899, 'n_estimators': 1297, 'feature_fraction': 0.46766991538289826, 'bagging_fraction': 0.7855277749165855, 'bagging_freq': 6, 'min_child_samples': 46}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,656][0m Trial 71 finished with value: 5237.6981538246655 and parameters: {'lambda_l1': 1.0556961277150241e-08, 'lambda_l2': 4.012099722456649e-06, 'num_leaves': 110, 'learning_rate': 0.31037493365905705, 'n_estimators': 1378, 'feature_fraction': 0.500499230367699, 'bagging_fraction': 0.7304144642991167, 'bagging_freq': 5, 'min_child_samples': 69}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,744][0m Trial 72 finished with value: 5529.138809015288 and parameters: {'lambda_l1': 1.0708800734397602e-08, 'lambda_l2': 4.5246620642980816e-06, 'num_leaves': 143, 'learning_rate': 0.26438637616157673, 'n_estimators': 1645, 'feature_fraction': 0.49882949602726073, 'bagging_fraction': 0.74805189461926, 'bagging_freq': 5, 'min_child_samples': 71}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,836][0m Trial 73 finished with value: 5846.21796311963 and parameters: {'lambda_l1': 1.052183011212612e-08, 'lambda_l2': 4.523922190474587e-06, 'num_leaves': 141, 'learning_rate': 0.29546624436975266, 'n_estimators': 1583, 'feature_fraction': 0.4491034747158342, 'bagging_fraction': 0.7608426809495704, 'bagging_freq': 5, 'min_child_samples': 70}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:54,920][0m Trial 74 finished with value: 14327.712322918009 and parameters: {'lambda_l1': 2.624729804312705e-08, 'lambda_l2': 1.7551950289892144e-05, 'num_leaves': 110, 'learning_rate': 0.14869144542626378, 'n_estimators': 1635, 'feature_fraction': 0.4981161645899453, 'bagging_fraction': 0.7282401574316244, 'bagging_freq': 5, 'min_child_samples': 77}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,008][0m Trial 75 finished with value: 9989.190580474497 and parameters: {'lambda_l1': 4.862884660468522e-08, 'lambda_l2': 4.66142730723886e-05, 'num_leaves': 86, 'learning_rate': 0.9852959417156903, 'n_estimators': 1359, 'feature_fraction': 0.4206010688754379, 'bagging_fraction': 0.6932845171861253, 'bagging_freq': 5, 'min_child_samples': 75}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,092][0m Trial 76 finished with value: 5726.00568240619 and parameters: {'lambda_l1': 0.5485015180009217, 'lambda_l2': 0.00016837667215504666, 'num_leaves': 124, 'learning_rate': 0.2801667453674618, 'n_estimators': 1401, 'feature_fraction': 0.5137604244240115, 'bagging_fraction': 0.8072285901844878, 'bagging_freq': 5, 'min_child_samples': 65}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,180][0m Trial 77 finished with value: 14370.618160686421 and parameters: {'lambda_l1': 1.0309280819746047e-08, 'lambda_l2': 2.45663967644043e-06, 'num_leaves': 103, 'learning_rate': 0.148457911305871, 'n_estimators': 1991, 'feature_fraction': 0.8323302635458628, 'bagging_fraction': 0.7706935272816309, 'bagging_freq': 5, 'min_child_samples': 61}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,268][0m Trial 78 finished with value: 5482.014554131035 and parameters: {'lambda_l1': 3.051891895700117e-08, 'lambda_l2': 6.474443686653299e-06, 'num_leaves': 155, 'learning_rate': 0.5756154999559158, 'n_estimators': 1470, 'feature_fraction': 0.8840246056705758, 'bagging_fraction': 0.7480654226971447, 'bagging_freq': 4, 'min_child_samples': 70}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,356][0m Trial 79 finished with value: 7463.067984673889 and parameters: {'lambda_l1': 0.007426221666800978, 'lambda_l2': 0.0005795594821315282, 'num_leaves': 170, 'learning_rate': 0.6664313649257735, 'n_estimators': 1205, 'feature_fraction': 0.9116798131989708, 'bagging_fraction': 0.8769548827248937, 'bagging_freq': 4, 'min_child_samples': 80}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,444][0m Trial 80 finished with value: 54707.030468257675 and parameters: {'lambda_l1': 2.73322208888202e-08, 'lambda_l2': 1.0138941114726107e-05, 'num_leaves': 200, 'learning_rate': 0.0654258319664974, 'n_estimators': 1466, 'feature_fraction': 0.9304649903913199, 'bagging_fraction': 0.8333017851196147, 'bagging_freq': 4, 'min_child_samples': 68}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,532][0m Trial 81 finished with value: 6359.653016042012 and parameters: {'lambda_l1': 4.200030448992559e-08, 'lambda_l2': 0.0034059888863069623, 'num_leaves': 152, 'learning_rate': 0.5602953087928537, 'n_estimators': 1770, 'feature_fraction': 0.759633750224603, 'bagging_fraction': 0.7393780664731161, 'bagging_freq': 5, 'min_child_samples': 71}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,620][0m Trial 82 finished with value: 9504.798617969653 and parameters: {'lambda_l1': 1.6840768555816496e-08, 'lambda_l2': 3.78012083515937e-05, 'num_leaves': 131, 'learning_rate': 0.969329574084732, 'n_estimators': 1548, 'feature_fraction': 0.9850765935649194, 'bagging_fraction': 0.7622587435441954, 'bagging_freq': 5, 'min_child_samples': 73}. Best is trial 51 with value: 4929.880123656952.[0m
    [32m[I 2022-12-31 08:55:55,708][0m Trial 83 finished with value: 4924.653216007027 and parameters: {'lambda_l1': 8.1774182136912e-08, 'lambda_l2': 3.8077681237375737e-06, 'num_leaves': 114, 'learning_rate': 0.35898484150217996, 'n_estimators': 1677, 'feature_fraction': 0.4802817585097421, 'bagging_fraction': 0.714465669890466, 'bagging_freq': 4, 'min_child_samples': 88}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:55,796][0m Trial 84 finished with value: 5653.218304431313 and parameters: {'lambda_l1': 2.2109324765148486e-07, 'lambda_l2': 5.636509850531018e-07, 'num_leaves': 111, 'learning_rate': 0.38218354838636726, 'n_estimators': 1308, 'feature_fraction': 0.45314198017108387, 'bagging_fraction': 0.6585086959891269, 'bagging_freq': 4, 'min_child_samples': 90}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:55,881][0m Trial 85 finished with value: 29106.877030676747 and parameters: {'lambda_l1': 1.2346336312505578e-07, 'lambda_l2': 7.194954179145308e-06, 'num_leaves': 67, 'learning_rate': 0.10222524756159111, 'n_estimators': 1693, 'feature_fraction': 0.4784242252153802, 'bagging_fraction': 0.7189008550484334, 'bagging_freq': 4, 'min_child_samples': 100}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:55,967][0m Trial 86 finished with value: 9836.6100741329 and parameters: {'lambda_l1': 5.7661950381849316e-08, 'lambda_l2': 1.3197116859640406e-06, 'num_leaves': 86, 'learning_rate': 0.18051971060611383, 'n_estimators': 1486, 'feature_fraction': 0.5446337562283012, 'bagging_fraction': 0.6883534806239633, 'bagging_freq': 3, 'min_child_samples': 88}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,056][0m Trial 87 finished with value: 10088.915975656002 and parameters: {'lambda_l1': 0.08846719508871648, 'lambda_l2': 3.118748187924928e-06, 'num_leaves': 33, 'learning_rate': 0.9741635843903163, 'n_estimators': 1389, 'feature_fraction': 0.48537233392611145, 'bagging_fraction': 0.7987653517847071, 'bagging_freq': 4, 'min_child_samples': 83}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,148][0m Trial 88 finished with value: 7638.0165305467635 and parameters: {'lambda_l1': 6.94355865404729e-08, 'lambda_l2': 1.635970880070284e-05, 'num_leaves': 117, 'learning_rate': 0.6005688733642285, 'n_estimators': 1253, 'feature_fraction': 0.4647230135953882, 'bagging_fraction': 0.6674166803109093, 'bagging_freq': 3, 'min_child_samples': 57}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,244][0m Trial 89 finished with value: 87794.43453041912 and parameters: {'lambda_l1': 3.4836038702185986e-08, 'lambda_l2': 8.483563748809485e-07, 'num_leaves': 187, 'learning_rate': 0.03875753827577886, 'n_estimators': 1542, 'feature_fraction': 0.7757285262691371, 'bagging_fraction': 0.7069304037881149, 'bagging_freq': 4, 'min_child_samples': 69}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,336][0m Trial 90 finished with value: 125124.80233502983 and parameters: {'lambda_l1': 0.0031956293968042715, 'lambda_l2': 2.1743677552597109e-07, 'num_leaves': 300, 'learning_rate': 0.01886843567654474, 'n_estimators': 1918, 'feature_fraction': 0.5336476785358962, 'bagging_fraction': 0.7363226796161536, 'bagging_freq': 4, 'min_child_samples': 65}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,432][0m Trial 91 finished with value: 5806.512865500891 and parameters: {'lambda_l1': 2.2662421334209757e-08, 'lambda_l2': 4.148620022128915e-06, 'num_leaves': 164, 'learning_rate': 0.282004329438403, 'n_estimators': 1633, 'feature_fraction': 0.5014516310540491, 'bagging_fraction': 0.7596259720740473, 'bagging_freq': 5, 'min_child_samples': 81}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,525][0m Trial 92 finished with value: 7615.069146179869 and parameters: {'lambda_l1': 1.0224621935372196e-08, 'lambda_l2': 2.0816126016060385e-06, 'num_leaves': 144, 'learning_rate': 0.21602161165129033, 'n_estimators': 1654, 'feature_fraction': 0.4421922236879515, 'bagging_fraction': 0.6463991420759925, 'bagging_freq': 5, 'min_child_samples': 85}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,609][0m Trial 93 finished with value: 178511.02514487045 and parameters: {'lambda_l1': 1.794472986380217e-07, 'lambda_l2': 2.8309686915501005e-05, 'num_leaves': 136, 'learning_rate': 3.47198078653546e-06, 'n_estimators': 1457, 'feature_fraction': 0.5189478452826771, 'bagging_fraction': 0.7163947994125267, 'bagging_freq': 5, 'min_child_samples': 75}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,697][0m Trial 94 finished with value: 5827.201527459335 and parameters: {'lambda_l1': 1.0184156676668268e-07, 'lambda_l2': 5.435219559546598e-06, 'num_leaves': 104, 'learning_rate': 0.39347276420577415, 'n_estimators': 1764, 'feature_fraction': 0.49153647575350956, 'bagging_fraction': 0.6799833595590558, 'bagging_freq': 5, 'min_child_samples': 71}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,784][0m Trial 95 finished with value: 36814.765671422545 and parameters: {'lambda_l1': 1.7091918189079233e-08, 'lambda_l2': 3.37074900189463e-07, 'num_leaves': 80, 'learning_rate': 0.08777049528851753, 'n_estimators': 1530, 'feature_fraction': 0.5047205606274293, 'bagging_fraction': 0.7457133750366673, 'bagging_freq': 5, 'min_child_samples': 77}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,864][0m Trial 96 finished with value: 178522.48540232328 and parameters: {'lambda_l1': 4.259045249370519e-07, 'lambda_l2': 9.839492654868134e-07, 'num_leaves': 126, 'learning_rate': 1.0423848852707996e-08, 'n_estimators': 1328, 'feature_fraction': 0.46553221503054837, 'bagging_fraction': 0.7875015088146501, 'bagging_freq': 6, 'min_child_samples': 66}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:56,964][0m Trial 97 finished with value: 15806.267883927723 and parameters: {'lambda_l1': 3.4336064407741594e-08, 'lambda_l2': 8.111600713030472e-06, 'num_leaves': 355, 'learning_rate': 0.13805745878461398, 'n_estimators': 1584, 'feature_fraction': 0.5587469958068246, 'bagging_fraction': 0.6972280836238254, 'bagging_freq': 4, 'min_child_samples': 62}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:57,052][0m Trial 98 finished with value: 178184.7160724796 and parameters: {'lambda_l1': 0.0007668281005533146, 'lambda_l2': 1.786529323648379e-06, 'num_leaves': 98, 'learning_rate': 0.00010212587367803594, 'n_estimators': 1124, 'feature_fraction': 0.4757038143865762, 'bagging_fraction': 0.6173485042905584, 'bagging_freq': 5, 'min_child_samples': 68}. Best is trial 83 with value: 4924.653216007027.[0m
    [32m[I 2022-12-31 08:55:57,160][0m Trial 99 finished with value: 178522.39869565237 and parameters: {'lambda_l1': 1.0270981271917492e-08, 'lambda_l2': 4.210216668115918e-06, 'num_leaves': 62, 'learning_rate': 3.665198177075711e-08, 'n_estimators': 1875, 'feature_fraction': 0.6388274446191652, 'bagging_fraction': 0.8139678206697841, 'bagging_freq': 4, 'min_child_samples': 27}. Best is trial 83 with value: 4924.653216007027.[0m
    

    {'lambda_l1': 8.1774182136912e-08, 'lambda_l2': 3.8077681237375737e-06, 'num_leaves': 114, 'learning_rate': 0.35898484150217996, 'n_estimators': 1677, 'feature_fraction': 0.4802817585097421, 'bagging_fraction': 0.714465669890466, 'bagging_freq': 4, 'min_child_samples': 88}
    

## 4.6 stacking 融合


```python
part = '4.6'
```

### 4.6.1 sklearn中的stacking


```python
FOLDS = 5
models = []
mses = []

gkf = part4.PurgedGroupTimeSeriesSplit(n_splits = FOLDS, group_gap=14)
splits = list(gkf.split(X_train, groups=X_train.index))
for train_indices, test_indices in splits:
        model = StackingRegressor(
            estimators=[
                ('rf', RandomForestRegressor()),
                ('ada', AdaBoostRegressor()),
                ('gb', GradientBoostingRegressor()),
                ('lgb', LGBMRegressor(**lgb_params)),
                ('xgb', XGBRegressor(**xgb_params))
            ],
            final_estimator=LGBMRegressor(**lgb_params),
            cv=2
        )
        model.fit(
            X_train,
            y_train
        )
        models.append(model)
        mses.append(mean_squared_error(
            model.predict(X_test), y_test
        ))
```

    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    [LightGBM] [Warning] feature_fraction is set=0.4974578727308233, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.4974578727308233
    [LightGBM] [Warning] lambda_l1 is set=0.0005898262404628944, reg_alpha=0.0 will be ignored. Current value: lambda_l1=0.0005898262404628944
    [LightGBM] [Warning] bagging_fraction is set=0.7353514883774996, subsample=1.0 will be ignored. Current value: bagging_fraction=0.7353514883774996
    [LightGBM] [Warning] lambda_l2 is set=0.0026596119232511423, reg_lambda=0.0 will be ignored. Current value: lambda_l2=0.0026596119232511423
    [LightGBM] [Warning] bagging_freq is set=7, subsample_freq=0 will be ignored. Current value: bagging_freq=7
    


```python
print(mses, np.mean(mses))
```

    [4049.038695859121, 3996.564191739484, 3787.412328134763, 3777.6371276732034, 4192.0754613377685] 3960.545560948868
    


```python
pred = pd.DataFrame([model.predict(X_test) for model in models]).mean()
title = f'{part} Predicted value VS real value use sklearn'
plt.figure(figsize=(20, 10))
plt.scatter(y_test, pred, s=600)
plt.xlabel('real value', fontsize=20)
plt.ylabel('predicted value', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.title(title, fontsize=20)
file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100) 
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_206_0.png)
    



```python
mean_squared_error(pred, y_test)
```




    3714.709584046916



### 4.6.2 自己实现stacking


```python
import importlib
from utils import part4
importlib.reload(part4)
```




    <module 'utils.part4' from 'd:\\打卡\\2022\\utils\\part4.py'>




```python
clf_list = [part4.rf_reg, part4.ada_reg, part4.gb_reg, part4.xgb_reg, part4.lgb_reg]
train_y = y_train.values
pred = part4.stacking_pred(
    X_train.values,
    train_y, 
    X_test.values, 
    gkf,
    clf_list, 
    label_split=range(len(train_y)),
    clf_fin='lgb'
)
```

    [Parallel(n_jobs=-1)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=-1)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=-1)]: Done 168 tasks      | elapsed:    0.2s
    [Parallel(n_jobs=-1)]: Done 418 tasks      | elapsed:    0.6s
    [Parallel(n_jobs=-1)]: Done 600 out of 600 | elapsed:    0.9s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    

    rf now score is [21100.437749505607]
    

    [Parallel(n_jobs=-1)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=-1)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=-1)]: Done 168 tasks      | elapsed:    0.2s
    [Parallel(n_jobs=-1)]: Done 418 tasks      | elapsed:    0.6s
    [Parallel(n_jobs=-1)]: Done 600 out of 600 | elapsed:    0.9s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    

    rf now score is [21100.437749505607, 14287.49280900517]
    

    [Parallel(n_jobs=-1)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=-1)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=-1)]: Done 168 tasks      | elapsed:    0.2s
    [Parallel(n_jobs=-1)]: Done 418 tasks      | elapsed:    0.6s
    [Parallel(n_jobs=-1)]: Done 600 out of 600 | elapsed:    0.9s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    

    rf now score is [21100.437749505607, 14287.49280900517, 4115.791666539725]
    

    [Parallel(n_jobs=-1)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=-1)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=-1)]: Done 168 tasks      | elapsed:    0.2s
    [Parallel(n_jobs=-1)]: Done 418 tasks      | elapsed:    0.6s
    [Parallel(n_jobs=-1)]: Done 600 out of 600 | elapsed:    0.9s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    

    rf now score is [21100.437749505607, 14287.49280900517, 4115.791666539725, 1735.5337100299923]
    

    [Parallel(n_jobs=-1)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=-1)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=-1)]: Done 168 tasks      | elapsed:    0.2s
    [Parallel(n_jobs=-1)]: Done 418 tasks      | elapsed:    0.7s
    [Parallel(n_jobs=-1)]: Done 600 out of 600 | elapsed:    0.9s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    [Parallel(n_jobs=16)]: Using backend ThreadingBackend with 16 concurrent workers.
    [Parallel(n_jobs=16)]: Done  18 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 168 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 418 tasks      | elapsed:    0.0s
    [Parallel(n_jobs=16)]: Done 600 out of 600 | elapsed:    0.0s finished
    

    rf now score is [21100.437749505607, 14287.49280900517, 4115.791666539725, 1735.5337100299923, 1688.7512818723455]
    rf_score_list:[21100.437749505607, 14287.49280900517, 4115.791666539725, 1735.5337100299923, 1688.7512818723455]
    rf_Score_mean:8585.60144339057
    train: (292, 13)
    test: (72, 13)
    (292, 12)
    (292, 13)
    rf_reg
    False
    rf_reg
    [LightGBM] [Warning] Auto-choosing row-wise multi-threading, the overhead of testing was 0.000205 seconds.
    You can set `force_row_wise=true` to remove the overhead.
    And if memory is not enough, you can set `force_col_wise=true`.
    [LightGBM] [Info] Total Bins 870
    [LightGBM] [Info] Number of data points in the train set: 292, number of used features: 13
    [LightGBM] [Info] Start training from score 421.345109
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    [LightGBM] [Warning] No further splits with positive gain, best gain: -inf
    pred
    [[403.42708568]
     [415.25105866]
     [424.44514573]
     [416.38364513]
     [479.03995962]
     [379.73202915]
     [417.9884055 ]
     [396.14168049]
     [421.46961272]
     [390.42431795]
     [498.39940231]
     [373.40640425]
     [410.78683569]
     [424.11216654]
     [419.76992824]
     [325.32925384]
     [443.75518716]
     [421.13014087]
     [366.3662155 ]
     [343.15678112]
     [432.06436299]
     [391.54630361]
     [421.77942583]
     [443.84762314]
     [312.7431763 ]
     [398.10274115]
     [470.37324254]
     [489.66075153]
     [473.81695703]
     [409.99446649]
     [427.63445794]
     [320.53039904]
     [313.77358171]
     [399.6453341 ]
     [384.36332046]
     [283.36511991]
     [279.71106148]
     [317.12130062]
     [322.39808482]
     [366.78246368]
     [315.28664781]
     [401.85756382]
     [319.92988632]
     [493.6967303 ]
     [379.00787025]
     [372.77753353]
     [407.0611223 ]
     [330.57352618]
     [378.8617953 ]
     [484.65599814]
     [390.93764962]
     [464.9164151 ]
     [544.57190475]
     [400.06211428]
     [392.07704495]
     [429.19584152]
     [432.3947986 ]
     [382.51470621]
     [407.96824274]
     [535.0559369 ]
     [423.35195564]
     [365.00218147]
     [412.22514807]
     [388.60248975]
     [357.00579203]
     [379.42645217]
     [303.59431095]
     [416.75782   ]
     [438.36809194]
     [385.79598076]
     [408.93364752]
     [497.81018064]]
    


```python
title = f'{part} Predicted value VS real value'
plt.figure(figsize=(20, 10))
plt.scatter(y_test, pred.reshape(1, -1)[0], s=600)
plt.xlabel('real value', fontsize=20)
plt.ylabel('predicted value', fontsize=20)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.title(title, fontsize=20)
file = os.path.join(path, f'{title}.png')
plt.savefig(file, dpi=100) 
```


    
![png](%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_files/%E5%B9%B4%E5%BA%A6%E5%88%86%E6%9E%90_211_0.png)
    



```python
preds = pd.concat(
    [y_test.reset_index(), 
    pd.Series(pred.reshape(1, -1)[0], name='预测有效时间').reset_index()], 
    axis=1
)[['有效时间', '预测有效时间']]

preds
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>有效时间</th>
      <th>预测有效时间</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>460.00000</td>
      <td>403.427086</td>
    </tr>
    <tr>
      <th>1</th>
      <td>459.00000</td>
      <td>415.251059</td>
    </tr>
    <tr>
      <th>2</th>
      <td>375.00000</td>
      <td>424.445146</td>
    </tr>
    <tr>
      <th>3</th>
      <td>426.75707</td>
      <td>416.383645</td>
    </tr>
    <tr>
      <th>4</th>
      <td>463.00000</td>
      <td>479.039960</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>67</th>
      <td>426.00000</td>
      <td>416.757820</td>
    </tr>
    <tr>
      <th>68</th>
      <td>442.00000</td>
      <td>438.368092</td>
    </tr>
    <tr>
      <th>69</th>
      <td>475.00000</td>
      <td>385.795981</td>
    </tr>
    <tr>
      <th>70</th>
      <td>479.00000</td>
      <td>408.933648</td>
    </tr>
    <tr>
      <th>71</th>
      <td>484.00000</td>
      <td>497.810181</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 2 columns</p>
</div>




```python
mean_squared_error(pred, y_test)
```




    2807.8519227845736



# 更多学习笔记，请关注公众号【杰然不同之GR】 #
![公众号二维码](http://m.qpic.cn/psc?/V10twqic2oh0r6/TmEUgtj9EK6.7V8ajmQrEG6xI.X7icgy*l8zd9O9qB3X6.AQyIe0uOSHtI7ti9nULpRDinQuLz61UqAz2Qxai8Ay.JgGp*bQUKKMa4c9AyU!/b&bo=rgGuAa4BrgEBGT4!&rf=viewer_4&t=5)
